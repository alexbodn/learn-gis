<!DOCTYPE html>
<html>
	<head>
		<script src="https://cdn.jsdelivr.net/npm/ol@v8.1.0/dist/ol.js"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v8.1.0/ol.css" />
		<script src="https://unpkg.com/ol-layerswitcher@4.1.1"></script>
		<link rel="stylesheet" href="https://unpkg.com/ol-layerswitcher@4.1.1/dist/ol-layerswitcher.css" />
		<script src="./sld/sldreader.js"></script>
		<script src="./lib/proj4.min.js"></script>
		<style>
			/*@import "./lib/ol.css";*/
			body {
				/*margin: 0px;*/
			}
			.map {
				width: 96vw;
				height: 60vh;
				border: solid 1px grey;
				/*position: fixed;*/
			}
		</style>
	</head>
	<body>
		Import a GeoPackage
		<div id="sqlQuery"></div>
		<div id="map" class="map"></div>
		<!--div id="explanation">OpenLayers displaying a .osm file directly. This <a href="display-osm.osm">display-osm.osm</a> is a very small example. Most .osm files would be too large to do this, and in general you're more likely to load in vector features in a different way</div-->
		
		<script src="./lib/sqlquery.js"></script>
		<script>
function prepKeys(obj, query, label) {
	let ret = obj;
	if (false) warn(label);
	if (Array.isArray(obj)) {
		return obj;
	}
	let paramRe = /:[a-z_A-Z][a-z_A-Z0-9]*/g;
	if (typeof(obj) == 'object') {
		ret = {};
		let paramRe = /:([a-z_A-Z][a-z_A-Z0-9]*)/g;
		query = uncomment(query);
		let param;
		while (param = paramRe.exec(query)) {
			let val = obj[param[1]];
			if (typeof(val) == 'undefined') {
				throw new Error(`parameter ${param[1]} not defined for ${label}.`);
			}
			ret[param[0]] = val;
		}
	}
//console.log(obj, ret, query);
	return ret;
}
		</script>
		<script type="module" src="gpkg-gui.js">
		</script>
	</body>
</html>
