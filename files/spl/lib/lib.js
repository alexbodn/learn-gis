var t=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},e="propertychange";var n=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function i(t,e){return t>e?1:t<e?-1:0}function r(t,e,n){const i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;{let r;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return"function"==typeof n?n(e,t[r-1],t[r])>0?r-1:r:t[r-1]-e<e-t[r]?r-1:r}return i-1}}function o(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function s(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let e=0;e<i;e++)t[t.length]=n[e]}function a(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function l(){return!0}function c(){return!1}function h(){}function u(t){for(const e in t)delete t[e]}function d(t){let e;for(e in t)return!1;return!e}var f=class extends n{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(e){const n="string"==typeof e,i=n?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=n?new t(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;i in s||(s[i]=0,a[i]=0),++s[i];for(let t=0,e=r.length;t<e;++t)if(l="handleEvent"in r[t]?r[t].handleEvent(o):r[t].call(this,o),!1===l||o.propagationStopped){l=!1;break}if(0==--s[i]){let t=a[i];for(delete a[i];t--;)this.removeEventListener(i,h);delete s[i]}return l}disposeInternal(){this.listeners_&&u(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=h,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}},p="change",g="error",m="contextmenu",_="click",v="dblclick",y="keydown",b="keypress",x="load",w="resize",S="touchmove",T="wheel";function C(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function E(t,e,n,i){return C(t,e,n,i,!0)}function M(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),u(t))}class A extends f{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(p)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=C(this,t[r],e);return i}return C(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=E(this,t[r],e)}else n=E(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)M(t[e]);else M(t)}(n);else if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}A.prototype.on,A.prototype.once,A.prototype.un;var R=A;function k(){throw new Error("Unimplemented abstract method.")}let I=0;function P(t){return t.ol_uid||(t.ol_uid=String(++I))}class F extends t{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}var D=class extends R{constructor(t){super(),this.on,this.once,this.un,P(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new F(i,t,n)),i=e,this.hasListener(i)&&this.dispatchEvent(new F(i,t,n))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],d(this.values_)&&(this.values_=null),e||this.notify(t,n)}}};const L={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class O extends Error{constructor(t){const e=L[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}var N=O,z="add",G="remove";const B="length";class U extends t{constructor(t,e,n){super(t),this.element=e,this.index=n}}var j=class extends D{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(B)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new U(z,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new U(G,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new U(G,n,t)),this.dispatchEvent(new U(z,e,t))}updateLength_(){this.set(B,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new N(58)}};const $="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",H=$.includes("firefox");$.includes("safari")&&!$.includes("chrom")&&($.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test($));const W=$.includes("webkit")&&!$.includes("edge"),X=$.includes("macintosh"),Y="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,V="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,q="undefined"!=typeof Image&&Image.prototype.decode,K=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function Z(t,e){if(!t)throw new N(e)}function J(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Q(t,e,n,i,r,o,s,a){const l=Math.sin(o),c=Math.cos(o);return t[0]=i*c,t[1]=r*l,t[2]=-i*l,t[3]=r*c,t[4]=s*i*c-a*i*l+e,t[5]=s*r*l+a*r*c+n,t}function tt(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;Z(0!==n,32);const r=e[0],o=e[1],s=e[2],a=e[3],l=e[4],c=e[5];return t[0]=a/n,t[1]=-o/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*c-a*l)/n,t[5]=-(r*c-o*l)/n,t}let et;function nt(t){const e="matrix("+t.join(", ")+")";if(V)return e;const n=et||(et=document.createElement("div"));return n.style.transform=e,n.style.transform}new Array(6);var it=0,rt=1,ot=2,st=4,at=8,lt=16;function ct(t){const e=_t();for(let n=0,i=t.length;n<i;++n)St(e,t[n]);return e}function ht(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function ut(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function dt(t,e,n){let i,r;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function ft(t,e){return gt(t,e[0],e[1])}function pt(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function gt(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function mt(t,e){const n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1];let l=it;return s<n?l|=lt:s>r&&(l|=st),a<i?l|=at:a>o&&(l|=ot),l===it&&(l=rt),l}function _t(){return[1/0,1/0,-1/0,-1/0]}function vt(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function yt(t){return vt(1/0,1/0,-1/0,-1/0,t)}function bt(t,e,n,i,r){return Tt(yt(r),t,e,n,i)}function xt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function wt(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function St(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Tt(t,e,n,i,r){for(;n<i;n+=r)Ct(t,e[n],e[n+1]);return t}function Ct(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Et(t,e){let n;return n=e(At(t)),n||(n=e(Rt(t)),n||(n=e(Nt(t)),n||(n=e(Ot(t)),n||!1)))}function Mt(t){let e=0;return Bt(t)||(e=zt(t)*Dt(t)),e}function At(t){return[t[0],t[1]]}function Rt(t){return[t[2],t[1]]}function kt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function It(t,e){let n;return"bottom-left"===e?n=At(t):"bottom-right"===e?n=Rt(t):"top-left"===e?n=Ot(t):"top-right"===e?n=Nt(t):Z(!1,13),n}function Pt(t,e,n,i,r){const[o,s,a,l,c,h,u,d]=Ft(t,e,n,i);return vt(Math.min(o,a,c,u),Math.min(s,l,h,d),Math.max(o,a,c,u),Math.max(s,l,h,d),r)}function Ft(t,e,n,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(n),a=Math.sin(n),l=r*s,c=r*a,h=o*s,u=o*a,d=t[0],f=t[1];return[d-l+u,f-c-h,d-l-u,f-c+h,d+l-u,f+c+h,d+l+u,f+c-h,d-l+u,f-c-h]}function Dt(t){return t[3]-t[1]}function Lt(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return Gt(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):yt(i),i}function Ot(t){return[t[0],t[3]]}function Nt(t){return[t[2],t[3]]}function zt(t){return t[2]-t[0]}function Gt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Bt(t){return t[2]<t[0]||t[3]<t[1]}function Ut(t,e){const n=e.getExtent(),i=kt(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=zt(n),r=Math.floor((i[0]-n[0])/e)*e;t[0]-=r,t[2]-=r}return t}function jt(t,e,n){return Math.min(Math.max(t,e),n)}function $t(t,e,n,i,r,o){const s=r-n,a=o-i;if(0!==s||0!==a){const l=((t-n)*s+(e-i)*a)/(s*s+a*a);l>1?(n=r,i=o):l>0&&(n+=s*l,i+=a*l)}return Ht(t,e,n,i)}function Ht(t,e,n,i){const r=n-t,o=i-e;return r*r+o*o}function Wt(t){return t*Math.PI/180}function Xt(t,e){const n=t%e;return n*e<0?n+e:n}function Yt(t,e,n){return t+n*(e-t)}function Vt(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function qt(t,e){return Math.floor(Vt(t,e))}function Kt(t,e){return Math.ceil(Vt(t,e))}const Zt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Jt=/^([a-z]*)$|^hsla?\(.*\)$/i;function Qt(t){return"string"==typeof t?t:ie(t)}const te=function(){const t={};let e=0;return function(n){let i;if(t.hasOwnProperty(n))i=t[n];else{if(e>=1024){let n=0;for(const i in t)0==(3&n++)&&(delete t[i],--e)}i=function(t){let e,n,i,r,o;Jt.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t));if(Zt.exec(t)){const s=t.length-1;let a;a=s<=4?1:2;const l=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),n=parseInt(t.substr(1+1*a,a),16),i=parseInt(t.substr(1+2*a,a),16),r=l?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,n=(n<<4)+n,i=(i<<4)+i,l&&(r=(r<<4)+r)),o=[e,n,i,r/255]}else t.startsWith("rgba(")?(o=t.slice(5,-1).split(",").map(Number),ne(o)):t.startsWith("rgb(")?(o=t.slice(4,-1).split(",").map(Number),o.push(1),ne(o)):Z(!1,14);return o}(n),t[n]=i,++e}return i}}();function ee(t){return Array.isArray(t)?t:te(t)}function ne(t){return t[0]=jt(t[0]+.5|0,0,255),t[1]=jt(t[1]+.5|0,0,255),t[2]=jt(t[2]+.5|0,0,255),t[3]=jt(t[3],0,1),t}function ie(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];i!=(0|i)&&(i=i+.5|0);return"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function re(t,e,n){return e+":"+t+":"+(n?Qt(n):"null")}const oe=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const i=re(t,e,n);return i in this.cache_?this.cache_[i]:null}set(t,e,n,i){const r=re(t,e,n);this.cache_[r]=i,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};var se="opacity",ae="visible",le="extent",ce="zIndex",he="maxResolution",ue="minResolution",de="maxZoom",fe="minZoom",pe="source",ge="map";var me=class extends D{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[se]=void 0!==t.opacity?t.opacity:1,Z("number"==typeof e[se],64),e[ae]=void 0===t.visible||t.visible,e[ce]=t.zIndex,e[he]=void 0!==t.maxResolution?t.maxResolution:1/0,e[ue]=void 0!==t.minResolution?t.minResolution:0,e[fe]=void 0!==t.minZoom?t.minZoom:-1/0,e[de]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=jt(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return k()}getLayerStatesArray(t){return k()}getExtent(){return this.get(le)}getMaxResolution(){return this.get(he)}getMinResolution(){return this.get(ue)}getMinZoom(){return this.get(fe)}getMaxZoom(){return this.get(de)}getOpacity(){return this.get(se)}getSourceState(){return k()}getVisible(){return this.get(ae)}getZIndex(){return this.get(ce)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(le,t)}setMaxResolution(t){this.set(he,t)}setMinResolution(t){this.set(ue,t)}setMaxZoom(t){this.set(de,t)}setMinZoom(t){this.set(fe,t)}setOpacity(t){Z("number"==typeof t,64),this.set(se,t)}setVisible(t){this.set(ae,t)}setZIndex(t){this.set(ce,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},_e="prerender",ve="postrender",ye="precompose",be="postcompose",xe="rendercomplete";function we(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}var Se=class extends me{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(pe,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(pe)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(M(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=C(t,p,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((t=>t([])))}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}render(t,e){const n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(ge,t)}getMapInternal(){return this.get(ge)}setMap(t){this.mapPrecomposeKey_&&(M(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(M(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=C(t,ye,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Z(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=C(this,p,t.render,t),this.changed())}setSource(t){this.set(pe,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function Te(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function Ce(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function Ee(t,e){if(e.canWrapX()){const n=zt(e.getExtent()),i=function(t,e,n){const i=e.getExtent();let r=0;e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||zt(i),r=Math.floor((t[0]-i[0])/n));return r}(t,e,n);i&&(t[0]-=i*n)}return t}function Me(t,e){oe.expire()}var Ae=class extends n{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){k()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Q(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),tt(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,o,s,a){let l;const c=e.viewState;function h(t,e,n,i){return r.call(o,e,t?n:null,i)}const u=c.projection,d=Ee(t.slice(),u),f=[[0,0]];if(u.canWrapX()&&i){const t=zt(u.getExtent());f.push([-t,0],[t,0])}const p=e.layerStatesArray,g=p.length,m=[],_=[];for(let i=0;i<f.length;i++)for(let r=g-1;r>=0;--r){const o=p[r],u=o.layer;if(u.hasRenderer()&&we(o,c)&&s.call(a,u)){const r=u.getRenderer(),s=u.getSource();if(r&&s){const a=s.getWrapX()?d:t,c=h.bind(null,o.managed);_[0]=a[0]+f[i][0],_[1]=a[1]+f[i][1],l=r.forEachFeatureAtCoordinate(_,e,n,c,m)}if(l)return l}}if(0===m.length)return;const v=1/m.length;return m.forEach(((t,e)=>t.distanceSq+=e*v)),m.sort(((t,e)=>t.distanceSq-e.distanceSq)),m.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,l,this,r,o)}getMap(){return this.map_}renderFrame(t){k()}scheduleExpireIconCache(t){oe.canExpireCache()&&t.postRenderFunctions.push(Me)}};var Re=class extends t{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}};const ke=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ie=["style","variant","weight","size","lineHeight","family"],Pe=function(t){const e=t.match(ke);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let t=0,i=Ie.length;t<i;++t){const i=e[t+1];void 0!==i&&(n[Ie[t]]=i)}return n.families=n.family.split(/,\s?/),n};function Fe(t,e,n,i){let r;return r=n&&n.length?n.shift():V?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}function De(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Le(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function Oe(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}const Ne=[],ze=[0,0,0,0],Ge=new D;let Be,Ue=null;const je={},$e=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10";let r,o;function s(r,s,a){let l=!0;for(let c=0;c<n;++c){const n=e[c];if(o=Xe(r+" "+s+" "+t+n,i),a!=n){const e=Xe(r+" "+s+" "+t+a+","+n,i);l=l&&e!=o}}return!!l}function a(){let t=!0;const e=Ge.getKeys();for(let n=0,i=e.length;n<i;++n){const i=e[n];Ge.get(i)<100&&(s.apply(this,i.split("\n"))?(u(je),Ue=null,Be=void 0,Ge.set(i,100)):(Ge.set(i,Ge.get(i)+1,!0),t=!1))}t&&(clearInterval(r),r=void 0)}return function(t){const e=Pe(t);if(!e)return;const n=e.families;for(let t=0,i=n.length;t<i;++t){const i=n[t],o=e.style+"\n"+e.weight+"\n"+i;void 0===Ge.get(o)&&(Ge.set(o,100,!0),s(e.style,e.weight,i)||(Ge.set(o,0,!0),void 0===r&&(r=setInterval(a,32))))}}}(),He=function(){let t;return function(e){let n=je[e];if(null==n){if(V){const t=Pe(e),i=We(e,"Žg");n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);je[e]=n}return n}}();function We(t,e){return Ue||(Ue=Fe(1,1)),t!=Be&&(Ue.font=t,Be=Ue.font),Ue.measureText(e)}function Xe(t,e){return We(t,e).width}function Ye(t,e,n){if(e in n)return n[e];const i=e.split("\n").reduce(((e,n)=>Math.max(e,Xe(t,n))),0);return n[e]=i,i}function Ve(t,e,n,i,r,o,s,a,l,c,h){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),i.contextInstructions?(t.translate(l,c),t.scale(h[0],h[1]),function(t,e){const n=t.contextInstructions;for(let t=0,i=n.length;t<i;t+=2)Array.isArray(n[t+1])?e[n[t]].apply(e,n[t+1]):e[n[t]]=n[t+1]}(i,t)):h[0]<0||h[1]<0?(t.translate(l,c),t.scale(h[0],h[1]),t.drawImage(i,r,o,s,a,0,0,s,a)):t.drawImage(i,r,o,s,a,l,c,s*h[0],a*h[1]),t.restore()}var qe=class extends Ae{constructor(t){super(t),this.fontChangeListenerKey_=C(Ge,e,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className="ol-unselectable ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new Re(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){M(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(ye,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;const i=[];let r=null;for(let o=0,s=e.length;o<s;++o){const s=e[o];t.layerIndex=o;const a=s.layer,l=a.getSourceState();if(!we(s,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const c=a.render(t,r);c&&(c!==r&&(this.children_.push(c),r=c),"getDeclutter"in a&&i.push(a))}for(let e=i.length-1;e>=0;--e)i[e].renderDeclutter(t);!function(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],o=e[i];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--i):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(be,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}};class Ke extends t{constructor(t,e){super(t),this.layer=e}}const Ze="layers";class Je extends me{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ze,this.handleLayersChanged_),n?Array.isArray(n)?n=new j(n.slice(),{unique:!0}):Z("function"==typeof n.getArray,43):n=new j(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(M),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(C(t,z,this.handleLayersAdd_,this),C(t,G,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(M);u(this.listenerKeys_);const e=t.getArray();for(let t=0,n=e.length;t<n;t++){const n=e[t];this.registerLayerListeners_(n),this.dispatchEvent(new Ke("addlayer",n))}this.changed()}registerLayerListeners_(t){const n=[C(t,e,this.handleLayerChange_,this),C(t,p,this.handleLayerChange_,this)];t instanceof Je&&n.push(C(t,"addlayer",this.handleLayerGroupAdd_,this),C(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[P(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new Ke("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ke("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Ke("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=P(e);this.listenerKeys_[n].forEach(M),delete this.listenerKeys_[n],this.dispatchEvent(new Ke("removelayer",e)),this.changed()}getLayers(){return this.get(Ze)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new Ke("removelayer",t[e]))}this.set(Ze,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(let t=n,o=e.length;t<o;t++){const n=e[t];n.opacity*=i.opacity,n.visible=n.visible&&i.visible,n.maxResolution=Math.min(n.maxResolution,i.maxResolution),n.minResolution=Math.max(n.minResolution,i.minResolution),n.minZoom=Math.max(n.minZoom,i.minZoom),n.maxZoom=Math.min(n.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==n.extent?n.extent=Lt(n.extent,i.extent):n.extent=i.extent),void 0===n.zIndex&&(n.zIndex=r)}return e}getSourceState(){return"ready"}}var Qe=Je;var tn=class extends t{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}};var en=class extends tn{constructor(t,e,n,i,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},nn={SINGLECLICK:"singleclick",CLICK:_,DBLCLICK:v,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},rn="pointermove",on="pointerdown";var sn=class extends f{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=C(n,on,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=C(n,rn,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(S,this.boundHandleTouchMove_,!!K&&{passive:!1})}emulateClick_(t){let e=new en(nn.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new en(nn.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const e=new en(nn.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==nn.POINTERUP||e.type==nn.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=nn.POINTERDOWN&&e.type!=nn.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new en(nn.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(M),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new en(nn.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const e in t){const n=t[e];this.down_[e]="function"==typeof n?h:n}if(0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(C(t,nn.POINTERMOVE,this.handlePointerMove_,this),C(t,nn.POINTERUP,this.handlePointerUp_,this),C(this.element_,nn.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(C(this.element_.getRootNode(),nn.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new en(nn.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new en(nn.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(M(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(S,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(M(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(M),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},an="postrender",ln="movestart",cn="moveend",hn="loadstart",un="loadend",dn="layergroup",fn="size",pn="target",gn="view";const mn=1/0;var _n=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,u(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){Z(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=mn&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],s=t;for(;t<i>>1;){const r=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),s=o<i&&n[o]<n[r]?o:r;e[t]=e[s],n[t]=n[s],t=s}e[t]=r,n[t]=o,this.siftDown_(s,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],o=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>o))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const r=e.length;let o,s,a;for(s=0;s<r;++s)o=e[s],a=t(o),a==mn?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=a,e[i++]=o);e.length=i,n.length=i,this.heapify_()}},vn=0,yn=1,bn=2,xn=3,wn=4;var Sn=class extends _n{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(p,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===bn||n===xn||n===wn){n!==xn&&e.removeEventListener(p,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,r,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=this.dequeue()[0],r=i.getKey(),n=i.getState(),n!==vn||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load())}};var Tn=0,Cn=1,En={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Mn={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var An=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Mn[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Rn=6378137*Math.PI,kn=[-Rn,-Rn,Rn,Rn],In=[-180,-85,180,85],Pn=6378137*Math.log(Math.tan(Math.PI/2));class Fn extends An{constructor(t){super({code:t,units:"m",extent:kn,global:!0,worldExtent:In,getPointResolution:function(t,e){return t/Math.cosh(e[1]/6378137)}})}}const Dn=[new Fn("EPSG:3857"),new Fn("EPSG:102100"),new Fn("EPSG:102113"),new Fn("EPSG:900913"),new Fn("http://www.opengis.net/def/crs/EPSG/0/3857"),new Fn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ln(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n){e[r]=Rn*t[r]/180;let n=6378137*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));n>Pn?n=Pn:n<-Pn&&(n=-Pn),e[r+1]=n}return e}function On(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/Rn,e[r+1]=360*Math.atan(Math.exp(t[r+1]/6378137))/Math.PI-90;return e}const Nn=[-180,-90,180,90],zn=6378137*Math.PI/180;class Gn extends An{constructor(t,e){super({code:t,units:"degrees",extent:Nn,axisOrientation:e,global:!0,metersPerUnit:zn,worldExtent:Nn})}}const Bn=[new Gn("CRS:84"),new Gn("EPSG:4326","neu"),new Gn("urn:ogc:def:crs:OGC:1.3:CRS84"),new Gn("urn:ogc:def:crs:OGC:2:84"),new Gn("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Gn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Gn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Un={};let jn={};function $n(t,e,n){const i=t.getCode(),r=e.getCode();i in jn||(jn[i]={}),jn[i][r]=n}function Hn(t,e,n){n=n||6371008.8;const i=Wt(t[1]),r=Wt(e[1]),o=(r-i)/2,s=Wt(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}let Wn=!0;function Xn(t,e,n){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function Yn(t,e,n){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function Vn(t){!function(t,e){Un[t]=e}(t.getCode(),t),$n(t,t,Xn)}function qn(t){return"string"==typeof t?Un[e=t]||Un[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Kn(t,e,n,i){let r;const o=(t=qn(t)).getPointResolutionFunc();if(o){if(r=o(e,n),i&&i!==t.getUnits()){const e=t.getMetersPerUnit();e&&(r=r*e/Mn[i])}}else{const o=t.getUnits();if("degrees"==o&&!i||"degrees"==i)r=e;else{const s=ti(t,qn("EPSG:4326"));if(s===Yn&&"degrees"!==o)r=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=s(t,t,2);r=(Hn(t.slice(0,2),t.slice(2,4))+Hn(t.slice(4,6),t.slice(6,8)))/2}const a=i?Mn[i]:t.getMetersPerUnit();void 0!==a&&(r/=a)}}return r}function Zn(t){!function(t){t.forEach(Vn)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&$n(e,t,Xn)}))}))}function Jn(t,e){return t?"string"==typeof t?qn(t):t:qn(e)}function Qn(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;return ti(t,e)===Xn&&n}function ti(t,e){let n=function(t,e){let n;return t in jn&&e in jn[t]&&(n=jn[t][e]),n}(t.getCode(),e.getCode());return n||(n=Yn),n}function ei(t,e){return ti(qn(t),qn(e))}function ni(t,e){return t}function ii(t,e){return Wn&&!Te(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Wn=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function ri(t,e){return t}function oi(t,e){return t}var si,ai,li;function ci(t,e,n){return function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const l=e?0:o[0]*r,c=e?0:o[1]*r,h=a?a[0]:0,u=a?a[1]:0;let d=t[0]+l/2+h,f=t[2]-l/2+h,p=t[1]+c/2+u,g=t[3]-c/2+u;d>f&&(d=(f+d)/2,f=d),p>g&&(p=(g+p)/2,g=p);let m=jt(i[0],d,f),_=jt(i[1],p,g);if(s&&n&&r){const t=30*r;m+=-t*Math.log(1+Math.max(0,d-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-f)/t),_+=-t*Math.log(1+Math.max(0,p-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-g)/t)}return[m,_]}}function hi(t){return t}function ui(t,e,n,i){const r=zt(e)/n[0],o=Dt(e)/n[1];return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function di(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),jt(i,n/2,2*e)}function fi(t,e,n,i,r){return n=void 0===n||n,function(o,s,a,l){if(void 0!==o){const s=i?ui(t,i,a,r):t;return n&&l?di(o,s,e):jt(o,e,s)}}}function pi(t){return void 0!==t?0:void 0}function gi(t){return void 0!==t?t:void 0}function mi(t){return Math.pow(t,3)}function _i(t){return 1-mi(1-t)}function vi(t){return 3*t*t-2*t*t*t}function yi(t){return t}function bi(t,e,n,i,r,o){o=o||[];let s=0;for(let a=e;a<n;a+=i){const e=t[a],n=t[a+1];o[s++]=r[0]*e+r[2]*n+r[4],o[s++]=r[1]*e+r[3]*n+r[5]}return o&&o.length!=s&&(o.length=s),o}function xi(t,e,n,i,r,o,s){s=s||[];const a=Math.cos(r),l=Math.sin(r),c=o[0],h=o[1];let u=0;for(let r=e;r<n;r+=i){const e=t[r]-c,n=t[r+1]-h;s[u++]=c+e*a-n*l,s[u++]=h+e*l+n*a;for(let e=r+2;e<r+i;++e)s[u++]=t[e]}return s&&s.length!=u&&(s.length=u),s}Zn(Dn),Zn(Bn),si=Dn,ai=Ln,li=On,Bn.forEach((function(t){si.forEach((function(e){$n(t,e,ai),$n(e,t,li)}))}));const wi=[1,0,0,1,0,0];var Si=class extends D{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(t){let e,n,i,r=!1;return function(){const o=Array.prototype.slice.call(arguments);return r&&this===i&&a(o,n)||(r=!0,i=this,n=o,e=t.apply(this,arguments)),e}}((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return k()}closestPointXY(t,e,n,i){return k()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return k()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&yt(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){k()}scale(t,e,n){k()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return k()}getType(){return k()}applyTransform(t){k()}intersectsExtent(t){return k()}translate(t,e){k()}transform(t,e){const n=qn(t),i="tile-pixels"==n.getUnits()?function(t,i,r){const o=n.getExtent(),s=n.getWorldExtent(),a=Dt(s)/Dt(o);return Q(wi,s[0],s[3],a,-a,0,0,0),bi(t,0,t.length,r,wi,i),ei(n,e)(t,i,r)}:ei(n,e);return this.applyTransform(i),this}};function Ti(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}var Ci=class extends Si{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return bt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return k()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Ti(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){k()}setLayout(t,e,n){let i;if(t)i=Ti(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=function(t){let e;2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM");return e}(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();xi(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=kt(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();!function(t,e,n,i,r,o,s,a){a=a||[];const l=s[0],c=s[1];let h=0;for(let s=e;s<n;s+=i){const e=t[s]-l,n=t[s+1]-c;a[h++]=l+r*e,a[h++]=c+o*n;for(let e=s+2;e<s+i;++e)a[h++]=t[e]}a&&a.length!=h&&(a.length=h)}(i,0,i.length,r,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,r,o,s){s=s||[];let a=0;for(let l=e;l<n;l+=i){s[a++]=t[l]+r,s[a++]=t[l+1]+o;for(let e=l+2;e<l+i;++e)s[a++]=t[e]}s&&s.length!=a&&(s.length=a)}(n,0,n.length,i,t,e,n),this.changed()}}};function Ei(t,e,n,i,r,o,s){const a=t[e],l=t[e+1],c=t[n]-a,h=t[n+1]-l;let u;if(0===c&&0===h)u=e;else{const d=((r-a)*c+(o-l)*h)/(c*c+h*h);if(d>1)u=n;else{if(d>0){for(let r=0;r<i;++r)s[r]=Yt(t[e+r],t[n+r],d);return void(s.length=i)}u=e}}for(let e=0;e<i;++e)s[e]=t[u+e];s.length=i}function Mi(t,e,n,i,r){let o=t[e],s=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=Ht(o,s,n,i);a>r&&(r=a),o=n,s=i}return r}function Ai(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];r=Mi(t,e,s,i,r),e=s}return r}function Ri(t,e,n,i,r,o,s,a,l,c,h){if(e==n)return c;let u,d;if(0===r){if(d=Ht(s,a,t[e],t[e+1]),d<c){for(u=0;u<i;++u)l[u]=t[e+u];return l.length=i,d}return c}h=h||[NaN,NaN];let f=e+i;for(;f<n;)if(Ei(t,f-i,f,i,s,a,h),d=Ht(s,a,h[0],h[1]),d<c){for(c=d,u=0;u<i;++u)l[u]=h[u];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(o&&(Ei(t,n-i,e,i,s,a,h),d=Ht(s,a,h[0],h[1]),d<c)){for(c=d,u=0;u<i;++u)l[u]=h[u];l.length=i}return c}function ki(t,e,n,i,r,o,s,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=n.length;u<d;++u){const d=n[u];c=Ri(t,e,d,i,r,o,s,a,l,c,h),e=d}return c}function Ii(t,e,n,i){for(let r=0,o=n.length;r<o;++r){const o=n[r];for(let n=0;n<i;++n)t[e++]=o[n]}return e}function Pi(t,e,n,i,r){r=r||[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=Ii(t,e,n[s],i);r[o++]=a,e=a}return r.length=o,r}function Fi(t,e,n,i,r,o,s){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)o[s++]=t[e],o[s++]=t[e+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-i];let h=0;for(;c.length>0;){const n=c.pop(),o=c.pop();let s=0;const a=t[o],u=t[o+1],d=t[n],f=t[n+1];for(let e=o+i;e<n;e+=i){const n=$t(t[e],t[e+1],a,u,d,f);n>s&&(h=e,s=n)}s>r&&(l[(h-e)/i]=1,o+i<h&&c.push(o,h),h+i<n&&c.push(h,n))}for(let n=0;n<a;++n)l[n]&&(o[s++]=t[e+n*i],o[s++]=t[e+n*i+1]);return s}function Di(t,e){return e*Math.round(t/e)}function Li(t,e,n,i,r,o,s){if(e==n)return s;let a,l,c=Di(t[e],r),h=Di(t[e+1],r);e+=i,o[s++]=c,o[s++]=h;do{if(a=Di(t[e],r),l=Di(t[e+1],r),(e+=i)==n)return o[s++]=a,o[s++]=l,s}while(a==c&&l==h);for(;e<n;){const n=Di(t[e],r),u=Di(t[e+1],r);if(e+=i,n==a&&u==l)continue;const d=a-c,f=l-h,p=n-c,g=u-h;d*g==f*p&&(d<0&&p<d||d==p||d>0&&p>d)&&(f<0&&g<f||f==g||f>0&&g>f)?(a=n,l=u):(o[s++]=a,o[s++]=l,c=a,h=l,a=n,l=u)}return o[s++]=a,o[s++]=l,s}function Oi(t,e,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){const c=n[l];s=Li(t,e,c,i,r,o,s),a.push(s),e=c}return s}function Ni(t,e,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=e;s<n;s+=i)r[o++]=t.slice(s,s+i);return r.length=o,r}function zi(t,e,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];r[o++]=Ni(t,e,a,i,r[o]),e=a}return r.length=o,r}function Gi(t,e,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];r[o++]=1===a.length&&a[0]===e?[]:zi(t,e,a,i,r[o]),e=a[a.length-1]}return r.length=o,r}function Bi(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=s*n-o*i,o=n,s=i}return r/2}function Ui(t,e,n,i){let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o];r+=Bi(t,e,s,i),e=s}return r}class ji extends Ci{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new ji(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<dt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Mi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return Bi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ni(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Fi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new ji(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ii(this.flatCoordinates,0,t,this.stride),this.changed()}}var $i=ji;class Hi extends Ci{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Hi(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,o=Ht(t,e,r[0],r[1]);if(o<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=r[e];return n.length=t,o}return i}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return function(t,e){const n=t[0],i=t[1];return vt(n,i,n,i,e)}(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return gt(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(let i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}var Wi=Hi;function Xi(t,e,n,i,r){return!Et(r,(function(r){return!Yi(t,e,n,i,r[0],r[1])}))}function Yi(t,e,n,i,r,o){let s=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=o?i>o&&(n-a)*(o-l)-(r-a)*(i-l)>0&&s++:i<=o&&(n-a)*(o-l)-(r-a)*(i-l)<0&&s--,a=n,l=i}return 0!==s}function Vi(t,e,n,i,r,o){if(0===n.length)return!1;if(!Yi(t,e,n[0],i,r,o))return!1;for(let e=1,s=n.length;e<s;++e)if(Yi(t,n[e-1],n[e],i,r,o))return!1;return!0}function qi(t,e,n,r,o,s,a){let l,c,h,u,d,f,p;const g=o[s+1],m=[];for(let i=0,o=n.length;i<o;++i){const o=n[i];for(u=t[o-r],f=t[o-r+1],l=e;l<o;l+=r)d=t[l],p=t[l+1],(g<=f&&p<=g||f<=g&&g<=p)&&(h=(g-f)/(p-f)*(d-u)+u,m.push(h)),u=d,f=p}let _=NaN,v=-1/0;for(m.sort(i),u=m[0],l=1,c=m.length;l<c;++l){d=m[l];const i=Math.abs(d-u);i>v&&(h=(u+d)/2,Vi(t,e,n,r,h,g)&&(_=h,v=i)),u=d}return isNaN(_)&&(_=o[s]),a?(a.push(_,g,v),a):[_,g,v]}function Ki(t,e,n,i,r){let o;for(e+=i;e<n;e+=i)if(o=r(t.slice(e-i,e),t.slice(e,e+i)),o)return o;return!1}function Zi(t,e,n,i,r){const o=Tt([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!Gt(r,o)&&(!!pt(r,o)||(o[0]>=r[0]&&o[2]<=r[2]||(o[1]>=r[1]&&o[3]<=r[3]||Ki(t,e,n,i,(function(t,e){return function(t,e,n){let i=!1;const r=mt(t,e),o=mt(t,n);if(r===rt||o===rt)i=!0;else{const s=t[0],a=t[1],l=t[2],c=t[3],h=e[0],u=e[1],d=n[0],f=n[1],p=(f-u)/(d-h);let g,m;o&ot&&!(r&ot)&&(g=d-(f-c)/p,i=g>=s&&g<=l),i||!(o&st)||r&st||(m=f-(d-l)*p,i=m>=a&&m<=c),i||!(o&at)||r&at||(g=d-(f-a)/p,i=g>=s&&g<=l),i||!(o&lt)||r&lt||(m=f-(d-s)*p,i=m>=a&&m<=c)}return i}(r,t,e)})))))}function Ji(t,e,n,i,r){return!!Zi(t,e,n,i,r)||(!!Yi(t,e,n,i,r[0],r[1])||(!!Yi(t,e,n,i,r[0],r[3])||(!!Yi(t,e,n,i,r[2],r[1])||!!Yi(t,e,n,i,r[2],r[3]))))}function Qi(t,e,n,i,r){if(!Ji(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(let e=1,o=n.length;e<o;++e)if(Xi(t,n[e-1],n[e],i,r)&&!Zi(t,n[e-1],n[e],i,r))return!1;return!0}function tr(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function er(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=(n-o)*(i+s),o=n,s=i}return 0===r?void 0:r>0}function nr(t,e,n,i,r){r=void 0!==r&&r;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=er(t,e,s,i);if(0===o){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=s}return!0}function ir(t,e,n,i,r){r=void 0!==r&&r;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=er(t,e,s,i);(0===o?r&&a||!r&&!a:r&&!a||!r&&a)&&tr(t,e,s,i),e=s}return e}function rr(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o)e=ir(t,e,n[o],i,r);return e}let or=class extends Ci{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?s(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new or(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<dt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ai(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ki(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Vi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Ui(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),ir(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,zi(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=kt(this.getExtent());this.flatInteriorPoint_=qi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Wi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new $i(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=new $i(e.slice(r,s),t);i.push(a),r=s}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;nr(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ir(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Oi(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new or(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return Qi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Pi(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}};var sr=or;function ar(t){const e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new or(o,"XY",[o.length])}function lr(t,e){setTimeout((function(){t(e)}),0)}function cr(t){return!(t.sourceCenter&&t.targetCenter&&!Te(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function hr(t,e,n,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,s=-s;return[a*o-l*s,l*o+a*s]}var ur=class extends D{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Jn(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&function(t){Wn=!(void 0===t||t)}(),t.center&&(t.center=ii(t.center,this.projection_)),t.extent&&(t.extent=oi(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in En)delete e[t];this.setProperties(e,!0);const n=function(t){let e,n,i;const o=28,s=2;let a=void 0!==t.minZoom?t.minZoom:0,l=void 0!==t.maxZoom?t.maxZoom:o;const c=void 0!==t.zoomFactor?t.zoomFactor:s,h=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,d=void 0!==t.showFullExtent&&t.showFullExtent,f=Jn(t.projection,"EPSG:3857"),p=f.getExtent();let g=t.constrainOnlyCenter,m=t.extent;h||m||!f.isGlobal()||(g=!1,m=p);if(void 0!==t.resolutions){const o=t.resolutions;n=o[a],i=void 0!==o[l]?o[l]:o[o.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(o,s,a,l){if(void 0!==o){const c=t[0],h=t[t.length-1],u=n?ui(c,n,a,i):c;if(l)return e?di(o,u,h):jt(o,h,u);const d=Math.min(u,o),f=Math.floor(r(t,d,s));return t[f]>u&&f<t.length-1?t[f+1]:t[f]}}}(o,u,!g&&m,d):fi(n,i,u,!g&&m,d)}else{const r=(p?Math.max(zt(p),Dt(p)):360*Mn.degrees/f.getMetersPerUnit())/256/Math.pow(s,0),h=r/Math.pow(s,o-0);n=t.maxResolution,void 0!==n?a=0:n=r/Math.pow(c,a),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(c,l):r/Math.pow(c,l):h),l=a+Math.floor(Math.log(n/i)/Math.log(c)),i=n/Math.pow(c,l-a),e=t.constrainResolution?function(t,e,n,i,r,o){return i=void 0===i||i,n=void 0!==n?n:0,function(s,a,l,c){if(void 0!==s){const h=r?ui(e,r,l,o):e;if(c)return i?di(s,h,n):jt(s,n,h);const u=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(t)-u),f=-a*(.5-u)+.5,p=Math.min(h,s),g=Math.floor(Math.log(e/p)/Math.log(t)+f),m=Math.max(d,g);return jt(e/Math.pow(t,m),n,h)}}}(c,n,i,u,!g&&m,d):fi(n,i,u,!g&&m,d)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:a,zoomFactor:c}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ci(t.extent,t.constrainOnlyCenter,e)}const e=Jn(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ci(t,!1,!1)}return hi}(t),o=n.constraint,s=function(t){if(void 0===t.enableRotation||t.enableRotation){const n=t.constrainRotation;return void 0===n||!0===n?(e=e||Wt(5),function(t,n){return n?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}):!1===n?gi:"number"==typeof n?function(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(n):gi}return pi;var e}(t);this.constraints_={center:i,resolution:o,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenter();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(i[3]-e[3]+e[1]-i[1]),s=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let n=arguments[t];n.center&&(n=Object.assign({},n),n.center=ii(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=ii(n.anchor,this.getProjection())),e[t]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&lr(e,!0));let r=Date.now(),o=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_;const l=[];for(;i<n;++i){const t=arguments[i],n={start:r,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||vi,callback:e};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center.slice(),o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=s,n.targetResolution=this.getResolutionForZoom(t.zoom),s=n.targetResolution):t.resolution&&(n.sourceResolution=s,n.targetResolution=t.resolution,s=n.targetResolution),void 0!==t.rotation){n.sourceRotation=a;const e=Xt(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=a+e,a=n.targetRotation}cr(n)?n.complete=!0:r+=n.duration,l.push(n)}this.animations_.push(l),this.setHint(Tn,1),this.updateAnimations_()}getAnimating(){return this.hints_[Tn]>0}getInteracting(){return this.hints_[Cn]>0}cancelAnimations(){let t;this.setHint(Tn,-this.hints_[Tn]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&lr(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let r=!0;for(let n=0,o=i.length;n<o;++n){const o=i[n];if(o.complete)continue;const s=t-o.start;let a=o.duration>0?s/o.duration:1;a>=1?(o.complete=!0,a=1):r=!1;const l=o.easing(a);if(o.sourceCenter){const t=o.sourceCenter[0],e=o.sourceCenter[1],n=o.targetCenter[0],i=o.targetCenter[1];this.nextCenter_=o.targetCenter;const r=t+l*(n-t),s=e+l*(i-e);this.targetCenter_=[r,s]}if(o.sourceResolution&&o.targetResolution){const t=1===l?o.targetResolution:o.sourceResolution+l*(o.targetResolution-o.sourceResolution);if(o.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const t=1===l?Xt(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+l*(o.targetRotation-o.sourceRotation);if(o.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!o.complete)break}if(r){this.animations_[n]=null,this.setHint(Tn,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&lr(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();var r,o;return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Ce(n,t-this.getRotation()),o=e,(r=n)[0]+=+o[0],r[1]+=+o[1]),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),r=this.getResolution();if(void 0!==i&&void 0!==r){n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?ni(t,this.getProjection()):t}getCenterInternal(){return this.get(En.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return ri(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Z(e,1);const n=this.getResolution();Z(void 0!==n,2);const i=this.getRotation();return Z(void 0!==i,3),Pt(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(En.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(oi(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=zt(t)/e[0],i=Dt(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(En.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();i=hr(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const o=r(this.resolutions_,t,1);i=o,e=this.resolutions_[o],n=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=jt(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,jt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(Z(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){Z(!Bt(t),25);n=ar(oi(t,this.getProjection()))}else if("Circle"===t.getType()){const e=oi(t.getExtent(),this.getProjection());n=ar(e),n.rotate(this.getRotation(),kt(e))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let s=1/0,a=1/0,l=-1/0,c=-1/0;for(let t=0,e=r.length;t<e;t+=o){const e=r[t]*n-r[t+1]*i,o=r[t]*i+r[t+1]*n;s=Math.min(s,e),a=Math.min(a,o),l=Math.max(l,e),c=Math.max(c,o)}return[s,a,l,c]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const s=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),c=Math.sin(l),u=Math.cos(l),d=kt(s);d[0]+=(i[1]-i[3])/2*a,d[1]+=(i[0]-i[2])/2*a;const f=d[0]*u-d[1]*c,p=d[1]*u+d[0]*c,g=this.getConstrainedCenter([f,p],a),m=e.callback?e.callback:h;void 0!==e.duration?this.animateInternal({resolution:a,center:g,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=g,this.applyTargetState_(!1,!0),lr(m,!0))}centerOn(t,e,n){this.centerOnInternal(ii(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(hr(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r;const o=this.padding_;if(o&&t){const s=this.getViewportSizeMinusPadding_(-n),a=hr(t,i,[s[0]/2+o[3],s[1]/2+o[0]],e,n);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=ni(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&ii(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=ii(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?ii(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,r,n),s=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,i,r));this.get(En.ROTATION)!==i&&this.set(En.ROTATION,i),this.get(En.RESOLUTION)!==o&&(this.set(En.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),s&&this.get(En.CENTER)&&Te(this.get(En.CENTER),s)||this.set(En.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,i,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,r,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&Te(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:s,duration:t,easing:_i,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Cn,1)}endInteraction(t,e,n){n=n&&ii(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.setHint(Cn,-1),this.resolveConstraints(t,e,n)}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}};var dr=class extends D{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Oe(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Oe(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)M(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=t,t){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==h&&this.listenerKeys.push(C(t,an,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}};var fr=class extends dr{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"›",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const s=void 0!==t.label?t.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(_,this.handleClick_.bind(this),!1);const l=e+" ol-unselectable ol-control"+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=l,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},n=[];let i=!0;const r=t.layerStatesArray;for(let o=0,s=r.length;o<s;++o){const s=r[o];if(!we(s,t.viewState))continue;const a=s.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const c=l(t);if(c)if(i=i&&!1!==a.getAttributionsCollapsible(),Array.isArray(c))for(let t=0,i=c.length;t<i;++t)c[t]in e||(n.push(c[t]),e[c[t]]=!0);else c in e||(n.push(c),e[c]=!0)}return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!a(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Le(this.collapseLabel_,this.label_):Le(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}};var pr=class extends dr{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"⇧",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(_,this.handleClick_.bind(this),!1);const s=e+" ol-unselectable ol-control",a=this.element;a.className=s,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add("ol-hidden")}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:_i}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains("ol-hidden");t||0!==n?t&&0!==n&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.transform=t}this.rotation_=n}};var gr=class extends dr{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",s=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i,c.setAttribute("type","button"),c.title=a,c.appendChild("string"==typeof o?document.createTextNode(o):o),c.addEventListener(_,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(_,this.handleClick_.bind(this,-n),!1);const u=e+" ol-unselectable ol-control",d=this.element;d.className=u,d.appendChild(c),d.appendChild(h),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:_i})):e.setZoom(i)}}};var mr="active";function _r(t,e,n,i){const r=t.getZoom();if(void 0===r)return;const o=t.getConstrainedZoom(r+e),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==i?i:250,easing:_i})}var vr=class extends D{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(mr)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(mr,t)}setMap(t){this.map_=t}};var yr=class extends vr{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==nn.DBLCLICK){const n=t.originalEvent,i=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;_r(i.getView(),o,r,this.duration_),n.preventDefault(),e=!0}return!e}};function br(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}var xr=class extends vr{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==nn.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==nn.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==nn.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==nn.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function wr(t){const e=arguments;return function(t){let n=!0;for(let i=0,r=e.length;i<r&&(n=n&&e[i](t),n);++i);return n}}const Sr=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Tr=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},Cr=l,Er=function(t){const e=t.originalEvent;return 0==e.button&&!(W&&X&&e.ctrlKey)},Mr=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Ar=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Rr=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},kr=function(t){const e=t.originalEvent;return Z(void 0!==e,56),"mouse"==e.pointerType},Ir=function(t){const e=t.originalEvent;return Z(void 0!==e,56),e.isPrimary&&0===e.button};var Pr=class extends xr{constructor(t){super({stopDown:c}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:wr(Mr,Ir);this.condition_=t.onFocusOnly?wr(Tr,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,n=br(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();!function(t,e){t[0]*=e,t[1]*=e}(e,i.getResolution()),Ce(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(r),s=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(i),o[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:_i})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var Fr=class extends xr{constructor(t){t=t||{},super({stopDown:c}),this.condition_=t.condition?t.condition:Sr,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!kr(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===pi)return;const i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){if(!kr(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!kr(t))return!1;if(Er(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}};var Dr=class extends n{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new sr([n])}getGeometry(){return this.geometry_}};const Lr="boxstart",Or="boxdrag",Nr="boxend",zr="boxcancel";class Gr extends t{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}var Br=class extends xr{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Dr(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Er,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Gr(Or,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Gr(e?Nr:zr,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Gr(Lr,t.coordinate,t)),!0)}onBoxEnd(t){}};var Ur=class extends Br{constructor(t){super({condition:(t=t||{}).condition?t.condition:Ar,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),r=e.getResolution()/i;n=n.clone(),n.scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:_i})}},jr=37,$r=38,Hr=39,Wr=40;var Xr=class extends vr{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return Mr(t)&&Rr(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==y){const n=t.originalEvent,i=n.keyCode;if(this.condition_(t)&&(i==Wr||i==jr||i==Hr||i==$r)){const r=t.map.getView(),o=r.getResolution()*this.pixelDelta_;let s=0,a=0;i==Wr?a=-o:i==jr?s=-o:i==Hr?s=o:a=o;const l=[s,a];Ce(l,r.getRotation()),function(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:yi,center:t.getConstrainedCenter(r)})}}(r,l,this.duration_),n.preventDefault(),e=!0}}return!e}};var Yr=class extends vr{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:Rr,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==y||t.type==b){const n=t.originalEvent,i=n.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){const r=t.map,o=i=="+".charCodeAt(0)?this.delta_:-this.delta_;_r(r.getView(),o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}};var Vr=class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var qr=class extends vr{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:Cr;this.condition_=t.onFocusOnly?wr(Tr,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==T)return!0;const e=t.map,n=t.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==T&&(i=n.deltaY,H&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=Y),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=i;const s=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),s),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-jt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),_r(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}};var Kr=class extends xr{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=c),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const o=t.map,s=o.getView();if(s.getConstraints().rotation===pi)return;const a=o.getViewport().getBoundingClientRect(),l=br(this.targetPointers);l[0]-=a.left,l[1]-=a.top,this.anchor_=o.getCoordinateFromPixelInternal(l),this.rotating_&&(o.render(),s.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};var Zr=class extends xr{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=c),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);const c=a.getViewport().getBoundingClientRect(),h=br(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=a.getCoordinateFromPixelInternal(h),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function Jr(t){return t[0]>0&&t[1]>0}function Qr(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function to(t){t instanceof Se?t.setMapInternal(null):t instanceof Qe&&t.getLayers().forEach(to)}function eo(t,e){if(t instanceof Se)t.setMapInternal(e);else if(t instanceof Qe){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)eo(n[t],e)}}var no=class extends D{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Qe({layers:t.layers});let r,o,s;n[dn]=i,n[pn]=t.target,n[gn]=t.view instanceof ur?t.view:new ur,void 0!==t.controls&&(Array.isArray(t.controls)?r=new j(t.controls.slice()):(Z("function"==typeof t.controls.getArray,47),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new j(t.interactions.slice()):(Z("function"==typeof t.interactions.getArray,48),o=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?s=new j(t.overlays.slice()):(Z("function"==typeof t.overlays.getArray,49),s=t.overlays):s=new j;return{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:n}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:Y,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||function(t){t=t||{};const e=new j;return(void 0===t.zoom||t.zoom)&&e.push(new gr(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new pr(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new fr(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new j,n=new Vr(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Fr),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new yr({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new Pr({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Kr),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Zr({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Xr),e.push(new Yr({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new qr({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new Ur({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Sn(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(dn,this.handleLayerGroupChanged_),this.addChangeListener(gn,this.handleViewChanged_),this.addChangeListener(fn,this.handleSizeChanged_),this.addChangeListener(pn,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof ur||t.view.then((function(t){n.setView(new ur(t))})),this.controls.addEventListener(z,function(t){t.element.setMap(this)}.bind(this)),this.controls.addEventListener(G,function(t){t.element.setMap(null)}.bind(this)),this.interactions.addEventListener(z,function(t){t.element.setMap(this)}.bind(this)),this.interactions.addEventListener(G,function(t){t.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(z,function(t){this.addOverlayInternal_(t.element)}.bind(this)),this.overlays_.addEventListener(G,function(t){const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(this)),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){eo(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:l,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,s,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof Qe?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l,r=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]}getTarget(){return this.get(pn)}getTargetElement(){const t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null}getCoordinateFromPixel(t){return ni(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?J(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(dn)}setLayers(t){const e=this.getLayerGroup();if(t instanceof j)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=ii(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?J(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(fn)}getView(){return this.get(gn)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return function(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return mn;if(!t.wantedTiles[n][e.getKey()])return mn;const o=t.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new en(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===on||n===T||n===y){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;if(!i.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[Tn]||e[Cn]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(xe)&&this.renderer_.dispatchRenderEvent(xe,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new tn(un,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new tn(hn,this,t))));const n=this.postRenderFunctions_;for(let e=0,i=n.length;e<i;++e)n[e](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)M(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(m,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(T,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Oe(this.viewport_)}const t=this.getTargetElement();if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new qe(this)),this.mapBrowserEventHandler_=new sn(this,this.moveTolerance_);for(const t in nn)this.mapBrowserEventHandler_.addEventListener(nn[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(m,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(T,this.boundHandleBrowserEvent_,!!K&&{passive:!1});const e=this.getOwnerDocument().defaultView,n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[C(n,y,this.handleBrowserEvent,this),C(n,b,this.handleBrowserEvent,this),C(e,w,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(M(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(M(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=C(t,e,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=C(t,p,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(M),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ke("addlayer",t)),this.layerGroupPropertyListenerKeys_=[C(t,e,this.render,this),C(t,p,this.render,this),C(t,"addlayer",this.handleLayerAdd_,this),C(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){to(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==e&&Jr(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Pt(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:i,wantedTiles:{},mapId:P(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;r.nextExtent=Pt(o.nextCenter,o.nextResolution,t,e)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i){(!this.previousExtent_||!Bt(this.previousExtent_)&&!xt(r.extent,this.previousExtent_))&&(this.dispatchEvent(new tn(ln,this,i)),this.previousExtent_=yt(this.previousExtent_))}this.previousExtent_&&!r.viewHints[Tn]&&!r.viewHints[Cn]&&!xt(r.extent,this.previousExtent_)&&(this.dispatchEvent(new tn(cn,this,r)),ut(r.extent,this.previousExtent_))}this.dispatchEvent(new tn(an,this,r)),this.renderComplete_=this.hasListener(hn)||this.hasListener(un)||this.hasListener(xe)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Ke("removelayer",e)),this.set(dn,t)}setSize(t){this.set(fn,t)}setTarget(t){this.set(pn,t)}setView(t){if(!t||t instanceof ur)return void this.set(gn,t);this.set(gn,new ur);const e=this;t.then((function(t){e.setView(new ur(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(e=[i,r],!Jr(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}},io="preload",ro="useInterimTilesOnError";var oo=class extends Se{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(io)}setPreload(t){this.set(io,t)}getUseInterimTilesOnError(){return this.get(ro)}setUseInterimTilesOnError(t){this.set(ro,t)}getData(t){return super.getData(t)}},so=0,ao=1,lo=2,co=3;var ho=class extends R{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return k()}getData(t){return null}prepareFrame(t){return k()}renderFrame(t,e){return k()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return function(i,r){const o=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,o)}.bind(this)}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===lo&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=lo&&e!=co&&t.addEventListener(p,this.boundHandleImageChange_),e==so&&(t.load(),e=t.getState()),e==lo}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}};const uo=[];let fo=null;var po=class extends ho{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i;fo||function(){const t=document.createElement("canvas");t.width=1,t.height=1,fo=t.getContext("2d")}(),fo.clearRect(0,0,1,1);try{fo.drawImage(t,e,n,1,1,0,0,1,1),i=fo.getImageData(0,0,1,1).data}catch(t){return fo=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let r,o;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&a(ee(t.style.backgroundColor),ee(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=i;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",o=Fe();const e=o.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=Ot(n),r=Nt(n),o=Rt(n),s=At(n);J(e.coordinateToPixelTransform,i),J(e.coordinateToPixelTransform,r),J(e.coordinateToPixelTransform,o),J(e.coordinateToPixelTransform,s);const a=this.inversePixelTransform;J(a,i),J(a,r),J(a,o),J(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const r=new Re(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(_e,t,e)}postRender(t,e){this.dispatchRenderEvent_(ve,t,e)}getRenderTransform(t,e,n,i,r,o,s){const a=r/2,l=o/2,c=i/e,h=-c,u=-t[0]+s,d=-t[1];return Q(this.tempTransform,a,l,c,h,-n,u,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}};var go=class extends f{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(p)}release(){this.state===xn&&this.setState(wn)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==bn)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==bn){t.interimTile=null;break}t.getState()==yn?e=t:t.getState()==vn?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==xn&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){k()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const i=e-n+1e3/60;return i>=this.transition_?1:mi(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}};function mo(t,e,n){const i=t;let r=!0,o=!1,s=!1;const a=[E(i,x,(function(){s=!0,o||e()}))];return i.src&&q?(o=!0,i.decode().then((function(){r&&e()})).catch((function(t){r&&(s?e():n())}))):a.push(E(i,g,n)),function(){r=!1,a.forEach(M)}}var _o=class extends go{constructor(t,e,n,i,r,o){super(t,e,o),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=bn,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=xn,this.unlistenImage_(),this.image_=function(){const t=Fe(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=bn:this.state=wn,this.unlistenImage_(),this.changed()}load(){this.state==xn&&(this.state=vn,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==vn&&(this.state=yn,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=mo(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};var vo=class{constructor(t,e,n,i,r,o){this.sourceProj_=t,this.targetProj_=e;let s={};const a=ei(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&zt(i)==zt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?zt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?zt(this.targetProj_.getExtent()):null;const l=Ot(n),c=Nt(n),h=Rt(n),u=At(n),d=this.transformInv_(l),f=this.transformInv_(c),p=this.transformInv_(h),g=this.transformInv_(u),m=10+(o?Math.max(0,Math.ceil(Math.log2(Mt(n)/(o*o*256*256)))):0);if(this.addQuad_(l,c,h,u,d,f,p,g,m),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}.bind(this))}s={}}addTriangle_(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})}addQuad_(t,e,n,i,r,o,s,a,l){const c=ct([r,o,s,a]),h=this.sourceWorldWidth_?zt(c)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&h>.5&&h<1;let f=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){f=zt(ct([t,e,n,i]))/this.targetWorldWidth_>.25||f}!d&&this.sourceProj_.isGlobal()&&h&&(f=h>.25||f)}if(!f&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Gt(c,this.maxSourceExtent_))return;let p=0;if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)f=!0;else if(p=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=p&&2!=p&&4!=p&&8!=p)return;if(l>0){if(!f){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let o;if(d){o=(Xt(r[0],u)+Xt(s[0],u))/2-Xt(i[0],u)}else o=(r[0]+s[0])/2-i[0];const a=(r[1]+s[1])/2-i[1];f=o*o+a*a>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const c=[(e[0]+n[0])/2,(e[1]+n[1])/2],h=this.transformInv_(c),u=[(i[0]+t[0])/2,(i[1]+t[1])/2],d=this.transformInv_(u);this.addQuad_(t,e,c,u,r,o,h,d,l-1),this.addQuad_(u,c,n,i,d,h,s,a,l-1)}else{const c=[(t[0]+e[0])/2,(t[1]+e[1])/2],h=this.transformInv_(c),u=[(n[0]+i[0])/2,(n[1]+i[1])/2],d=this.transformInv_(u);this.addQuad_(t,c,u,i,r,h,d,a,l-1),this.addQuad_(c,e,n,u,h,o,s,d,l-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&p)&&this.addTriangle_(t,n,i,r,s,a),0==(14&p)&&this.addTriangle_(t,n,e,r,s,o),p&&(0==(13&p)&&this.addTriangle_(e,i,t,o,a,r),0==(7&p)&&this.addTriangle_(e,i,n,o,a,s))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,i){const r=e.source;St(t,r[0]),St(t,r[1]),St(t,r[2])})),t}getTriangles(){return this.triangles_}};let yo;const bo=[];function xo(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function wo(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function So(t,e,n,i){const r=(o=n,ei(e,t)(o,void 0,o.length));var o;let s=Kn(e,i,n);const a=e.getMetersPerUnit();void 0!==a&&(s*=a);const l=t.getMetersPerUnit();void 0!==l&&(s/=l);const c=t.getExtent();if(!c||ft(c,r)){const e=Kn(t,s,r)/s;isFinite(e)&&e>0&&(s/=e)}return s}function To(t,e,n,i,r,o,s,a,l,c,h,u){const d=Fe(Math.round(n*t),Math.round(n*e),bo);if(u||(d.imageSmoothingEnabled=!1),0===l.length)return d.canvas;function f(t){return Math.round(t*n)/n}d.scale(n,n),d.globalCompositeOperation="lighter";const p=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){wt(p,t.extent)}));const g=zt(p),m=Dt(p),_=Fe(Math.round(n*g/i),Math.round(n*m/i));u||(_.imageSmoothingEnabled=!1);const v=n/i;l.forEach((function(t,e,n){const i=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),o=zt(t.extent),s=Dt(t.extent);t.image.width>0&&t.image.height>0&&_.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,i*v,r*v,o*v,s*v)}));const y=Ot(s);return a.getTriangles().forEach((function(t,e,r){const s=t.source,a=t.target;let l=s[0][0],c=s[0][1],h=s[1][0],g=s[1][1],m=s[2][0],v=s[2][1];const b=f((a[0][0]-y[0])/o),x=f(-(a[0][1]-y[1])/o),w=f((a[1][0]-y[0])/o),S=f(-(a[1][1]-y[1])/o),T=f((a[2][0]-y[0])/o),C=f(-(a[2][1]-y[1])/o),E=l,M=c;l=0,c=0,h-=E,g-=M,m-=E,v-=M;const A=function(t){const e=t.length;for(let n=0;n<e;n++){let i=n,r=Math.abs(t[n][n]);for(let o=n+1;o<e;o++){const e=Math.abs(t[o][n]);e>r&&(r=e,i=o)}if(0===r)return null;const o=t[i];t[i]=t[n],t[n]=o;for(let i=n+1;i<e;i++){const r=-t[i][n]/t[n][n];for(let o=n;o<e+1;o++)n==o?t[i][o]=0:t[i][o]+=r*t[n][o]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}([[h,g,0,0,w-b],[m,v,0,0,T-b],[0,0,h,g,S-x],[0,0,m,v,C-x]]);if(A){if(d.save(),d.beginPath(),function(){if(void 0===yo){const t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",xo(t,4,5,4,0),xo(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;yo=wo(e,0)||wo(e,4)||wo(e,8)}return yo}()||!u){d.moveTo(w,S);const t=4,e=b-w,n=x-S;for(let i=0;i<t;i++)d.lineTo(w+f((i+1)*e/t),S+f(i*n/(t-1))),i!=t-1&&d.lineTo(w+f((i+1)*e/t),S+f((i+1)*n/(t-1)));d.lineTo(T,C)}else d.moveTo(w,S),d.lineTo(b,x),d.lineTo(T,C);d.clip(),d.transform(A[0],A[2],A[1],A[3],b,x),d.translate(p[0]-E,p[3]-M),d.scale(i/n,-i/n),d.drawImage(_.canvas,0,0),d.restore()}})),h&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-y[0])/o,s=-(i[0][1]-y[1])/o,a=(i[1][0]-y[0])/o,l=-(i[1][1]-y[1])/o,c=(i[2][0]-y[0])/o,h=-(i[2][1]-y[1])/o;d.beginPath(),d.moveTo(a,l),d.lineTo(r,s),d.lineTo(c,h),d.closePath(),d.stroke()})),d.restore()),d.canvas}var Co=class extends go{constructor(t,e,n,i,r,o,s,a,l,c,h,u){super(r,vn,{interpolate:!!u}),this.renderEdges_=void 0!==h&&h,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=i.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const g=f?Lt(d,f):d;if(0===Mt(g))return void(this.state=wn);const m=t.getExtent();m&&(p=p?Lt(p,m):m);const _=i.getResolution(this.wrappedTileCoord_[0]),v=function(t,e,n,i){const r=kt(n);let o=So(t,e,r,i);return(!isFinite(o)||o<=0)&&Et(n,(function(n){return o=So(t,e,n,i),isFinite(o)&&o>0})),o}(t,n,g,_);if(!isFinite(v)||v<=0)return void(this.state=wn);const y=void 0!==c?c:.5;if(this.triangulation_=new vo(t,n,g,p,v*y,_),0===this.triangulation_.getTriangles().length)return void(this.state=wn);this.sourceZ_=e.getZForResolution(v);let b=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(b[1]=jt(b[1],p[1],p[3]),b[3]=jt(b[3],p[1],p[3])):b=Lt(b,p)),Mt(b)){const t=e.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=l(this.sourceZ_,e,n,s);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=wn)}else this.state=wn}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&e.getState()==bn&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=xn;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=To(i,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=bn}this.changed()}load(){if(this.state==vn){this.state=yn,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,i){const r=e.getState();if(r==vn||r==yn){t++;const n=C(e,p,(function(i){const r=e.getState();r!=bn&&r!=xn&&r!=wn||(M(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){t.getState()==vn&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(M),this.sourcesListenerKeys_=null}release(){this.canvas_&&(De(this.canvas_.getContext("2d")),bo.push(this.canvas_),this.canvas_=null),super.release()}};class Eo{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Mo(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new Eo(t,e,n,i)}var Ao=Eo;var Ro=class extends po{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Ao(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==bn||n==wn||n==xn&&!i}getTile(t,e,n,i){const r=i.pixelRatio,o=i.viewState.projection,s=this.getLayer();let a=s.getSource().getTile(t,e,n,r,o);return a.getState()==xn&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=J(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!ft(r,i))return null;const o=e.pixelRatio,s=e.viewState.projection,a=e.viewState,l=n.getRenderSource(),c=l.getTileGridForProjection(a.projection),h=l.getTilePixelRatio(e.pixelRatio);for(let t=c.getZForResolution(a.resolution);t>=c.getMinZoom();--t){const e=c.getTileCoordForCoordAndZ(i,t),n=l.getTile(t,e[1],e[2],o,s);if(!(n instanceof _o||n instanceof Co)||n instanceof Co&&n.getState()===wn)return null;if(n.getState()!==bn)continue;const r=c.getOrigin(t),u=Qr(c.getTileSize(t)),d=c.getResolution(t),f=Math.floor(h*((i[0]-r[0])/d-e[1]*u[0])),p=Math.floor(h*((r[1]-i[1])/d-e[2]*u[1])),g=Math.round(h*l.getGutterForProjection(a.projection));return this.getImageData(n.getImage(),f+g,p+g)}return null}loadedTileCallback(t,e,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(t,e,n)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],r=t.viewState,o=r.projection,s=r.resolution,a=r.center,l=r.rotation,c=t.pixelRatio,h=this.getLayer(),u=h.getSource(),d=u.getRevision(),f=u.getTileGridForProjection(o),p=f.getZForResolution(s,u.zDirection),g=f.getResolution(p);let m=t.extent;const _=t.viewState.resolution,v=u.getTilePixelRatio(c),y=Math.round(zt(m)/_*c),b=Math.round(Dt(m)/_*c),x=n.extent&&oi(n.extent);x&&(m=Lt(m,oi(n.extent)));const w=g*y/2/v,S=g*b/2/v,T=[a[0]-w,a[1]-S,a[0]+w,a[1]+S],C=f.getTileRangeForExtentAndZ(m,p),E={};E[p]={};const M=this.createLoadedTileFinder(u,o,E),A=this.tmpExtent,R=this.tmpTileRange_;this.newTiles_=!1;const k=l?Ft(r.center,_,l,t.size):void 0;for(let e=C.minX;e<=C.maxX;++e)for(let i=C.minY;i<=C.maxY;++i){if(l&&!f.tileCoordIntersectsViewport([p,e,i],k))continue;const r=this.getTile(p,e,i,t);if(this.isDrawableTile(r)){const e=P(this);if(r.getState()==bn){E[p][r.tileCoord.toString()]=r;let t=r.inTransition(e);t&&1!==n.opacity&&(r.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(r)||(this.newTiles_=!0)}if(1===r.getAlpha(e,t.time))continue}const o=f.getTileCoordChildTileRange(r.tileCoord,R,A);let s=!1;o&&(s=M(p+1,o)),s||f.forEachTileCoordParentTileRange(r.tileCoord,M,R,A)}const I=g/s*c/v;Q(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-y/2,-b/2);const F=nt(this.pixelTransform);this.useContainer(e,F,this.getBackground(t));const D=this.context,L=D.canvas;tt(this.inversePixelTransform,this.pixelTransform),Q(this.tempTransform,y/2,b/2,I,I,0,-y/2,-b/2),L.width!=y||L.height!=b?(L.width=y,L.height=b):this.containerReused||D.clearRect(0,0,y,b),x&&this.clipUnrotated(D,t,x),u.getInterpolate()||(D.imageSmoothingEnabled=!1),this.preRender(D,t),this.renderedTiles.length=0;let O,N,z,G=Object.keys(E).map(Number);G.sort(i),1!==n.opacity||this.containerReused&&!u.getOpaque(t.viewState.projection)?(O=[],N=[]):G=G.reverse();for(let e=G.length-1;e>=0;--e){const n=G[e],i=u.getTilePixelSize(n,c,o),r=f.getResolution(n)/g,s=i[0]*r*I,a=i[1]*r*I,l=f.getTileCoordForCoordAndZ(Ot(T),n),h=f.getTileCoordExtent(l),d=J(this.tempTransform,[v*(h[0]-T[0])/g,v*(T[3]-h[3])/g]),m=v*u.getGutterForProjection(o),_=E[n];for(const e in _){const i=_[e],r=i.tileCoord,o=l[1]-r[1],c=Math.round(d[0]-(o-1)*s),h=l[2]-r[2],f=Math.round(d[1]-(h-1)*a),g=Math.round(d[0]-o*s),v=Math.round(d[1]-h*a),y=c-g,b=f-v,x=p===n,w=x&&1!==i.getAlpha(P(this),t.time);let S=!1;if(!w)if(O){z=[g,v,g+y,v,g+y,v+b,g,v+b];for(let t=0,e=O.length;t<e;++t)if(p!==n&&n<N[t]){const e=O[t];Gt([g,v,g+y,v+b],[e[0],e[3],e[4],e[7]])&&(S||(D.save(),S=!0),D.beginPath(),D.moveTo(z[0],z[1]),D.lineTo(z[2],z[3]),D.lineTo(z[4],z[5]),D.lineTo(z[6],z[7]),D.moveTo(e[6],e[7]),D.lineTo(e[4],e[5]),D.lineTo(e[2],e[3]),D.lineTo(e[0],e[1]),D.clip())}O.push(z),N.push(n)}else D.clearRect(g,v,y,b);this.drawTileImage(i,t,g,v,y,b,m,x),O&&!w?(S&&D.restore(),this.renderedTiles.unshift(i)):this.renderedTiles.push(i),this.updateUsedTiles(t.usedTiles,u,i)}}return this.renderedRevision=d,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!xt(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=c,this.renderedProjection=o,this.manageTilePyramid(t,u,f,c,o,m,p,h.getPreload()),this.scheduleExpireCache(t,u),this.postRender(D,t),n.extent&&D.restore(),D.imageSmoothingEnabled=!0,F!==L.style.transform&&(L.style.transform=F),this.container}drawTileImage(t,e,n,i,r,o,s,a){const l=this.getTileImage(t);if(!l)return;const c=P(this),h=e.layerStatesArray[e.layerIndex],u=h.opacity*(a?t.getAlpha(c,e.time):1),d=u!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,i,r,o),d&&this.context.restore(),u!==h.opacity?e.animate=!0:a&&t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(t,e,n){const i=P(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const i=P(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}manageTilePyramid(t,e,n,i,r,o,s,a,l){const c=P(e);c in t.wantedTiles||(t.wantedTiles[c]={});const h=t.wantedTiles[c],u=t.tileQueue,d=n.getMinZoom(),f=t.viewState.rotation,p=f?Ft(t.viewState.center,t.viewState.resolution,f,t.size):void 0;let g,m,_,v,y,b,x=0;for(b=d;b<=s;++b)for(m=n.getTileRangeForExtentAndZ(o,b,m),_=n.getResolution(b),v=m.minX;v<=m.maxX;++v)for(y=m.minY;y<=m.maxY;++y)f&&!n.tileCoordIntersectsViewport([b,v,y],p)||(s-b<=a?(++x,g=e.getTile(b,v,y,i,r),g.getState()==vn&&(h[g.getKey()]=!0,u.isKeyQueued(g.getKey())||u.enqueue([g,c,n.getTileCoordCenter(g.tileCoord),_])),void 0!==l&&l(g)):e.useTile(b,v,y,r));e.updateCacheSize(x,r)}};var ko=class extends oo{constructor(t){super(t)}createRenderer(){return new Ro(this)}};function Io(t,e,n,i,r){Po(t,e,n||0,i||t.length-1,r||Do)}function Po(t,e,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,s=e-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);Po(t,e,Math.max(n,Math.floor(e-s*l/o+c)),Math.min(i,Math.floor(e+(o-s)*l/o+c)),r)}var h=t[e],u=n,d=i;for(Fo(t,n,e),r(t[i],h)>0&&Fo(t,n,i);u<d;){for(Fo(t,u,d),u++,d--;r(t[u],h)<0;)u++;for(;r(t[d],h)>0;)d--}0===r(t[n],h)?Fo(t,n,d):Fo(t,++d,i),d<=e&&(n=d+1),e<=d&&(i=d-1)}}function Fo(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Do(t,e){return t<e?-1:t>e?1:0}let Lo=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!Yo(t,e))return n;const i=this.toBBox,r=[];for(;e;){for(let o=0;o<e.children.length;o++){const s=e.children[o],a=e.leaf?i(s):s;Yo(t,a)&&(e.leaf?n.push(s):Xo(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n}collides(t){let e=this.data;if(!Yo(t,e))return!1;const n=[];for(;e;){for(let i=0;i<e.children.length;i++){const r=e.children[i],o=e.leaf?this.toBBox(r):r;if(Yo(t,o)){if(e.leaf||Xo(t,o))return!0;n.push(r)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Vo([]),this}remove(t,e){if(!t)return this;let n=this.data;const i=this.toBBox(t),r=[],o=[];let s,a,l;for(;n||r.length;){if(n||(n=r.pop(),a=r[r.length-1],s=o.pop(),l=!0),n.leaf){const i=Oo(t,n.children,e);if(-1!==i)return n.children.splice(i,1),r.push(n),this._condense(r),this}l||n.leaf||!Xo(n,i)?a?(s++,n=a.children[s],l=!1):n=null:(r.push(n),o.push(s),s=0,a=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,i){const r=n-e+1;let o,s=this._maxEntries;if(r<=s)return o=Vo(t.slice(e,n+1)),No(o,this.toBBox),o;i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,i-1))),o=Vo([]),o.leaf=!1,o.height=i;const a=Math.ceil(r/s),l=a*Math.ceil(Math.sqrt(s));qo(t,e,n,l,this.compareMinX);for(let r=e;r<=n;r+=l){const e=Math.min(r+l-1,n);qo(t,r,e,a,this.compareMinY);for(let n=r;n<=e;n+=a){const r=Math.min(n+a-1,e);o.children.push(this._build(t,n,r,i-1))}}return No(o,this.toBBox),o}_chooseSubtree(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){let n,i=1/0,r=1/0;for(let o=0;o<e.children.length;o++){const s=e.children[o],a=jo(s),l=Ho(t,s)-a;l<r?(r=l,i=a<i?a:i,n=s):l===r&&a<i&&(i=a,n=s)}e=n||e.children[0]}return e}_insert(t,e,n){const i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),Go(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)}_split(t,e){const n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);const o=this._chooseSplitIndex(n,r,i),s=Vo(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,No(n,this.toBBox),No(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,e){this.data=Vo([t,e]),this.data.height=t.height+1,this.data.leaf=!1,No(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,r=1/0,o=1/0;for(let s=e;s<=n-e;s++){const e=zo(t,0,s,this.toBBox),a=zo(t,s,n,this.toBBox),l=Wo(e,a),c=jo(e)+jo(a);l<r?(r=l,i=s,o=c<o?c:o):l===r&&c<o&&(o=c,i=s)}return i||n-e}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:Bo,r=t.leaf?this.compareMinY:Uo;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const r=this.toBBox,o=zo(t,0,e,r),s=zo(t,n-e,n,r);let a=$o(o)+$o(s);for(let i=e;i<n-e;i++){const e=t.children[i];Go(o,t.leaf?r(e):e),a+=$o(o)}for(let i=n-e-1;i>=e;i--){const e=t.children[i];Go(s,t.leaf?r(e):e),a+=$o(s)}return a}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)Go(e[i],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():No(t[n],this.toBBox)}};function Oo(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function No(t,e){zo(t,0,t.children.length,e,t)}function zo(t,e,n,i,r){r||(r=Vo(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<n;o++){const e=t.children[o];Go(r,t.leaf?i(e):e)}return r}function Go(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Bo(t,e){return t.minX-e.minX}function Uo(t,e){return t.minY-e.minY}function jo(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function $o(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ho(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Wo(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}function Xo(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Yo(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Vo(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function qo(t,e,n,i,r){const o=[e,n];for(;o.length;){if((n=o.pop())-(e=o.pop())<=i)continue;const s=e+Math.ceil((n-e)/i/2)*i;Io(t,s,e,n,r),o.push(e,s,s,n)}}class Ko{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Qr(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Ko({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return k()}getImage(t){return k()}getHitDetectionImage(){return k()}getPixelRatio(t){return 1}getImageState(){return k()}getImageSize(){return k()}getOrigin(){return k()}getSize(){return k()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Qr(t)}listenImageChange(t){k()}load(){k()}unlistenImageChange(t){k()}}var Zo=Ko;function Jo(t){return Array.isArray(t)?ie(t):t}class Qo extends Zo{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new Qo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const n=this.renderOptions_,i=Fe(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return lo}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let i=this.radius_,r=void 0===this.radius2_?i:this.radius2_;if(i<r){const t=i;i=r,r=t}const o=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/o,a=r*Math.sin(s),l=i-Math.sqrt(r*r-a*a),c=Math.sqrt(a*a+l*l),h=c/a;if("miter"===t&&h<=n)return h*e;const u=e/2/h,d=e/2*(l/c),f=Math.sqrt((i+u)*(i+u)+d*d)-i;if(void 0===this.radius2_||"bevel"===t)return 2*f;const p=i*Math.sin(s),g=r-Math.sqrt(i*i-p*p),m=Math.sqrt(p*p+g*g)/p;if(m<=n){const t=m*e/2-r-i;return 2*Math.max(f,t)}return 2*f}createRenderOptions(){let t,e="round",n=0,i=null,r=0,o=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t="#000"),t=Jo(t),o=this.stroke_.getWidth(),void 0===o&&(o=1),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e="round"),n=this.stroke_.getMiterLimit(),void 0===n&&(n=10));const s=this.calculateLineJoinSize_(e,o,n),a=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*a+s),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t="#000"),e.fillStyle=Jo(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),n=0;if("string"==typeof e&&(e=ee(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){const e=Fe(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let s=0;s<e;s++){const e=r+s*o,a=s%2==0?n:i;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}var ts=Qo;class es extends ts{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new es({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}var ns=es;class is{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new is({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}var rs=is;class os{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new os({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var ss=os;class as{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=hs,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new as({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=hs,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let ls=null;function cs(t,e){if(!ls){const t=new rs({color:"rgba(255,255,255,0.4)"}),e=new ss({color:"#3399CC",width:1.25});ls=[new as({image:new ns({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return ls}function hs(t){return t.getGeometry()}var us=as;let ds=null;class fs extends f{constructor(t,e,n,i,r,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=n,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===lo){ds||(ds=Fe(1,1)),ds.drawImage(this.image_,0,0);try{ds.getImageData(0,0,1,1),this.tainted_=!1}catch(t){ds=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(p)}handleImageError_(){this.imageState_=co,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=lo,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=Fe(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===so){this.image_||this.initializeImage_(),this.imageState_=ao;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=mo(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==lo)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const i=n.getContext("2d");i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Qt(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class ps extends Zo{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,r=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:n,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const o=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let s=t.src;Z(!(void 0!==s&&o),4),Z(!o||o&&this.imgSize_,5),void 0!==s&&0!==s.length||!o||(s=o.src||P(o)),Z(void 0!==s&&s.length>0,6);const a=void 0!==t.src?so:lo;this.color_=void 0!==t.color?ee(t.color):null,this.iconImage_=function(t,e,n,i,r,o){let s=oe.get(e,i,o);return s||(s=new fs(t,e,n,i,r,o),oe.set(e,i,o,s)),s}(o,s,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,a,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const t=this.getScale();return new ps({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(p,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(p,t)}}var gs=ps;class ms{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Qr(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new rs({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new ms({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Qr(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var _s=ms;function vs(t){return new us({fill:ys(t,""),stroke:bs(t,""),text:xs(t),image:ws(t)})}function ys(t,e){const n=t[e+"fill-color"];if(n)return new rs({color:n})}function bs(t,e){const n=t[e+"stroke-width"],i=t[e+"stroke-color"];if(n||i)return new ss({width:n,color:i,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function xs(t){const e=t["text-value"];if(!e)return;return new _s({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:ys(t,"text-"),backgroundFill:ys(t,"text-background-"),stroke:bs(t,"text-"),backgroundStroke:bs(t,"text-background-")})}function ws(t){const e=t["icon-src"],n=t["icon-img"];if(e||n){return new gs({src:e,img:n,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]})}const i=t["shape-points"];if(i){const e="shape-";return new ts({points:i,fill:ys(t,e),stroke:bs(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const r=t["circle-radius"];if(r){const e="circle-";return new ns({radius:r,fill:ys(t,e),stroke:bs(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}const Ss="renderOrder";var Ts=class extends Se{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Ss)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Lo(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(Ss,t)}setStyle(t){let e;if(void 0===t)e=cs;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof us)e=t;else if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let e=0;e<n;++e){const n=t[e];i[e]=n instanceof us?n:vs(n)}e=i}else e=vs(t);this.style_=e,this.styleFunction_=null===t?void 0:function(t){let e;if("function"==typeof t)e=t;else{let n;Array.isArray(t)?n=t:(Z("function"==typeof t.getZIndex,41),n=[t]),e=function(){return n}}return e}(this.style_),this.changed()}};const Cs={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Es=[Cs.FILL],Ms=[Cs.STROKE],As=[Cs.BEGIN_PATH],Rs=[Cs.CLOSE_PATH];var ks=Cs;var Is=class{drawCustom(t,e,n,i){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}};var Ps=class extends Is{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let s=0,a=t.length;s<a;s+=e)i[0]=t[s],i[1]=t[s+1],ft(n,i)&&(r[o++]=i[0],r[o++]=i[1]);return o}appendFlatLineCoordinates(t,e,n,i,r,o){const s=this.coordinates;let a=s.length;const l=this.getBufferedMaxExtent();o&&(e+=i);let c=t[e],h=t[e+1];const u=this.tmpCoordinate_;let d,f,p,g=!0;for(d=e+i;d<n;d+=i)u[0]=t[d],u[1]=t[d+1],p=mt(l,u),p!==f?(g&&(s[a++]=c,s[a++]=h,g=!1),s[a++]=u[0],s[a++]=u[1]):p===rt?(s[a++]=u[0],s[a++]=u[1],g=!1):g=!0,c=u[0],h=u[1],f=p;return(r&&g||d===e+i)&&(s[a++]=c,s[a++]=h),a}drawCustomCoordinates_(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o],a=this.appendFlatLineCoordinates(t,e,s,i,!1,!1);r.push(a),e=s}return e}drawCustom(t,e,n,i){this.beginGeometry(t,e);const r=t.getType(),o=t.getStride(),s=this.coordinates.length;let a,l,c,h,u;switch(r){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),h=[];const e=t.getEndss();u=0;for(let t=0,n=e.length;t<n;++t){const n=[];u=this.drawCustomCoordinates_(a,u,e[t],o,n),h.push(n)}this.instructions.push([ks.CUSTOM,s,h,t,n,Gi]),this.hitDetectionInstructions.push([ks.CUSTOM,s,h,t,i||n,Gi]);break;case"Polygon":case"MultiLineString":c=[],a="Polygon"==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(a,0,t.getEnds(),o,c),this.instructions.push([ks.CUSTOM,s,c,t,n,zi]),this.hitDetectionInstructions.push([ks.CUSTOM,s,c,t,i||n,zi]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),l=this.appendFlatLineCoordinates(a,0,a.length,o,!1,!1),this.instructions.push([ks.CUSTOM,s,l,t,n,Ni]),this.hitDetectionInstructions.push([ks.CUSTOM,s,l,t,i||n,Ni]);break;case"MultiPoint":a=t.getFlatCoordinates(),l=this.appendFlatPointCoordinates(a,o),l>s&&(this.instructions.push([ks.CUSTOM,s,l,t,n,Ni]),this.hitDetectionInstructions.push([ks.CUSTOM,s,l,t,i||n,Ni]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),l=this.coordinates.length,this.instructions.push([ks.CUSTOM,s,l,t,n]),this.hitDetectionInstructions.push([ks.CUSTOM,s,l,t,i||n])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[ks.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ks.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,r,s=-1;for(e=0;e<n;++e)i=t[e],r=i[0],r==ks.END_GEOMETRY?s=e:r==ks.BEGIN_GEOMETRY&&(i[2]=e,o(this.hitDetectionInstructions,s,e),s=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const e=t.getColor();n.fillStyle=Jo(e||"#000")}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=Jo(t||"#000");const i=e.getLineCap();n.lineCap=void 0!==i?i:"round";const r=e.getLineDash();n.lineDash=r?r.slice():Ne;const o=e.getLineDashOffset();n.lineDashOffset=o||0;const s=e.getLineJoin();n.lineJoin=void 0!==s?s:"round";const a=e.getWidth();n.lineWidth=void 0!==a?a:1;const l=e.getMiterLimit();n.miterLimit=void 0!==l?l:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[ks.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[ks.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!a(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[ks.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ut(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;ht(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}};var Fs=class extends Ps{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,i);this.instructions.push([ks.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ks.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,i);this.instructions.push([ks.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ks.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}};var Ds=class extends Ps{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),s=[ks.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}drawLineString(t,e){const n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0===i||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ks.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ne,0],As);const o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(Ms),this.endGeometry(e)}drawMultiLineString(t,e){const n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0===i||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ks.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],As);const o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride();let l=0;for(let t=0,e=o.length;t<e;++t)l=this.drawFlatCoordinates_(s,l,o[t],a);this.hitDetectionInstructions.push(Ms),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ms),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ms),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(As)}};var Ls=class extends Ps{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=n.length;this.instructions.push(As),this.hitDetectionInstructions.push(As);for(let r=0;r<a;++r){const o=n[r],a=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,o,i,!0,!s),c=[ks.MOVE_TO_LINE_TO,a,l];this.instructions.push(c),this.hitDetectionInstructions.push(c),s&&(this.instructions.push(Rs),this.hitDetectionInstructions.push(Rs)),e=o}return o&&(this.instructions.push(Es),this.hitDetectionInstructions.push(Es)),s&&(this.instructions.push(Ms),this.hitDetectionInstructions.push(Ms)),e}drawCircle(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ks.SET_FILL_STYLE,"#000"]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ks.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);const l=[ks.CIRCLE,a];this.instructions.push(As,l),this.hitDetectionInstructions.push(As,l),void 0!==n.fillStyle&&(this.instructions.push(Es),this.hitDetectionInstructions.push(Es)),void 0!==n.strokeStyle&&(this.instructions.push(Ms),this.hitDetectionInstructions.push(Ms)),this.endGeometry(e)}drawPolygon(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ks.SET_FILL_STYLE,"#000"]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ks.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}drawMultiPolygon(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ks.SET_FILL_STYLE,"#000"]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ks.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride();let l=0;for(let t=0,e=o.length;t<e;++t)l=this.drawFlatCoordinatess_(s,l,o[t],a);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=Di(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};function Os(t,e,n,i,r){let o,s,a,l,c,h,u,d,f,p,g=n,m=n,_=0,v=0,y=n;for(s=n;s<i;s+=r){const n=e[s],i=e[s+1];void 0!==c&&(f=n-c,p=i-h,l=Math.sqrt(f*f+p*p),void 0!==u&&(v+=a,o=Math.acos((u*f+d*p)/(a*l)),o>t&&(v>_&&(_=v,g=y,m=s),v=0,y=s-r)),a=l,u=f,d=p),c=n,h=i}return v+=l,v>_?[y,s]:[g,m]}const Ns={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const zs={Circle:Ls,Default:Ps,Image:Fs,LineString:Ds,Polygon:Ls,Text:class extends Ps{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const n=this.textFillState_,i=this.textStrokeState_,r=this.textState_;if(""===this.text_||!r||!n&&!i)return;const o=this.coordinates;let s=o.length;const a=t.getType();let l=null,c=t.getStride();if("line"!==r.placement||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){let n=r.overflow?null:[];switch(a){case"Point":case"MultiPoint":l=t.getFlatCoordinates();break;case"LineString":l=t.getFlatMidpoint();break;case"Circle":l=t.getCenter();break;case"MultiLineString":l=t.getFlatMidpoints(),c=2;break;case"Polygon":l=t.getFlatInteriorPoint(),r.overflow||n.push(l[2]/this.resolution),c=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();l=[];for(let t=0,i=e.length;t<i;t+=3)r.overflow||n.push(e[t+2]/this.resolution),l.push(e[t],e[t+1]);if(0===l.length)return;c=2}const i=this.appendFlatPointCoordinates(l,c);if(i===s)return;if(n&&(i-s)/2!=l.length/c){let t=s/2;n=n.filter(((e,n)=>{const i=o[2*(t+n)]===l[n*c]&&o[2*(t+n)+1]===l[n*c+1];return i||--t,i}))}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let h=r.padding;if(h!=ze&&(r.scale[0]<0||r.scale[1]<0)){let t=r.padding[0],e=r.padding[1],n=r.padding[2],i=r.padding[3];r.scale[0]<0&&(e=-e,i=-i),r.scale[1]<0&&(t=-t,n=-n),h=[t,e,n,i]}const u=this.pixelRatio;this.instructions.push([ks.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,h==ze?ze:h.map((function(t){return t*u})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]);const d=1/u;this.hitDetectionInstructions.push([ks.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[d,d],NaN,void 0,this.declutterImageWithText_,h,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]),this.endGeometry(e)}else{if(!Gt(this.getBufferedMaxExtent(),t.getExtent()))return;let n;if(l=t.getFlatCoordinates(),"LineString"==a)n=[l.length];else if("MultiLineString"==a)n=t.getEnds();else if("Polygon"==a)n=t.getEnds().slice(0,1);else if("MultiPolygon"==a){const e=t.getEndss();n=[];for(let t=0,i=e.length;t<i;++t)n.push(e[t][0])}this.beginGeometry(t,e);const i=r.textAlign;let h,u=0;for(let t=0,e=n.length;t<e;++t){if(null==i){const e=Os(r.maxAngle,l,u,n[t],c);u=e[0],h=e[1]}else h=n[t];for(let t=u;t<h;t+=c)o.push(l[t],l[t+1]);const e=o.length;u=n[t],this.drawChars_(s,e),s=e}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||"center",justify:e.justify,textBaseline:e.textBaseline||"middle",scale:e.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=Ns[i.textBaseline],c=this.textOffsetY_*a,h=this.text_,u=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([ks.DRAW_CHARS,t,e,l,i.overflow,s,i.maxAngle,a,c,r,u*a,h,o,1]),this.hitDetectionInstructions.push([ks.DRAW_CHARS,t,e,l,i.overflow,s,i.maxAngle,1,c,r,u,h,o,1/a])}setTextStyle(t,e){let n,i,r;if(t){const e=t.getFill();e?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Jo(e.getColor()||"#000")):(i=null,this.textFillState_=i);const o=t.getStroke();if(o){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const t=o.getLineDash(),e=o.getLineDashOffset(),n=o.getWidth(),i=o.getMiterLimit();r.lineCap=o.getLineCap()||"round",r.lineDash=t?t.slice():Ne,r.lineDashOffset=void 0===e?0:e,r.lineJoin=o.getLineJoin()||"round",r.lineWidth=void 0===n?1:n,r.miterLimit=void 0===i?10:i,r.strokeStyle=Jo(o.getColor()||"#000")}else r=null,this.textStrokeState_=r;n=this.textState_;const s=t.getFont()||"10px sans-serif";$e(s);const a=t.getScaleArray();n.overflow=t.getOverflow(),n.font=s,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||"middle",n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||ze,n.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),c=t.getOffsetY(),h=t.getRotateWithView(),u=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===c?0:c,this.textRotateWithView_=void 0!==h&&h,this.textRotation_=void 0===u?0:u,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:P(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+P(i.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}};var Gs=class{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const r=n[i].finish();t[e][i]=r}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);let r=i[e];if(void 0===r){r=new(0,zs[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r}return r}};function Bs(t,e,n,i,r,o,s,a,l,c,h,u){let d=t[e],f=t[e+1],p=0,g=0,m=0,_=0;function v(){p=d,g=f,d=t[e+=i],f=t[e+1],_+=m,m=Math.sqrt((d-p)*(d-p)+(f-g)*(f-g))}do{v()}while(e<n-i&&_+m<o);let y=0===m?0:(o-_)/m;const b=Yt(p,d,y),x=Yt(g,f,y),w=e-i,S=_,T=o+a*l(c,r,h);for(;e<n-i&&_+m<T;)v();y=0===m?0:(T-_)/m;const C=Yt(p,d,y),E=Yt(g,f,y);let M;if(u){const t=[b,x,C,E];xi(t,0,4,2,u,t,t),M=t[0]>t[2]}else M=b>C;const A=Math.PI,R=[],k=w+i===e;let I;if(m=0,_=S,d=t[e=w],f=t[e+1],k){v(),I=Math.atan2(f-g,d-p),M&&(I+=I>0?-A:A);const t=(C+b)/2,e=(E+x)/2;return R[0]=[t,e,(T-o)/2,I,r],R}for(let t=0,u=(r=r.replace(/\n/g," ")).length;t<u;){v();let b=Math.atan2(f-g,d-p);if(M&&(b+=b>0?-A:A),void 0!==I){let t=b-I;if(t+=t>A?-2*A:t<-A?2*A:0,Math.abs(t)>s)return null}I=b;const x=t;let w=0;for(;t<u;++t){const s=a*l(c,r[M?u-t-1:t],h);if(e+i<n&&_+m<o+w+s/2)break;w+=s}if(t===x)continue;const S=M?r.substring(u-x,u-t):r.substring(x,t);y=0===m?0:(o+w/2-_)/m;const T=Yt(p,d,y),C=Yt(g,f,y);R.push([T,C,w/2,b,S]),o+=w}return R}function Us(t,e,n,i){let r=t[e],o=t[e+1],s=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];s+=Math.sqrt((e-r)*(e-r)+(n-o)*(n-o)),r=e,o=n}return s}const js=[1/0,1/0,-1/0,-1/0],$s=[],Hs=[],Ws=[],Xs=[];function Ys(t){return t[3].declutterBox}const Vs=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function qs(t,e){return"start"!==e&&"end"!==e||Vs.test(t)||(e="start"===e?"left":"right"),Ns[e]}function Ks(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}var Zs=class{constructor(t,e,n,i){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,n,i){const r=t+e+n+i;if(this.labels_[r])return this.labels_[r];const o=i?this.strokeStates[i]:null,s=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,c=[a.scale[0]*l,a.scale[1]*l],h=Array.isArray(t),u=a.justify?Ns[a.justify]:qs(Array.isArray(t)?t[0]:t,a.textAlign||"center"),d=i&&o.lineWidth?o.lineWidth:0,f=h?t:t.split("\n").reduce(Ks,[]),{width:p,height:g,widths:m,heights:_,lineWidths:v}=function(t,e){const n=[],i=[],r=[];let o=0,s=0,a=0,l=0;for(let c=0,h=e.length;c<=h;c+=2){const u=e[c];if("\n"===u||c===h){o=Math.max(o,s),r.push(s),s=0,a+=l;continue}const d=e[c+1]||t.font,f=Xe(d,u);n.push(f),s+=f;const p=He(d);i.push(p),l=Math.max(l,p)}return{width:o,height:a,widths:n,heights:i,lineWidths:r}}(a,f),y=p+d,b=[],x=(y+2)*c[0],w=(g+d)*c[1],S={width:x<0?Math.floor(x):Math.ceil(x),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:b};1==c[0]&&1==c[1]||b.push("scale",c),i&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",d),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)),n&&b.push("fillStyle",s.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const T=.5-u;let C=u*y+T*d;const E=[],M=[];let A,R=0,k=0,I=0,P=0;for(let t=0,e=f.length;t<e;t+=2){const e=f[t];if("\n"===e){k+=R,R=0,C=u*y+T*d,++P;continue}const r=f[t+1]||a.font;r!==A&&(i&&E.push("font",r),n&&M.push("font",r),A=r),R=Math.max(R,_[I]);const o=[e,C+T*m[I]+u*(m[I]-v[P]),.5*(d+R)+k];C+=m[I],i&&E.push("strokeText",o),n&&M.push("fillText",o),++I}return Array.prototype.push.apply(b,E),Array.prototype.push.apply(b,M),this.labels_[r]=S,S}replayTextBackground_(t,e,n,i,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,r,o,s,a,l,c,h,u,d,f,p,g){let m=n-(s*=u[0]),_=i-(a*=u[1]);const v=r+l>t?t-l:r,y=o+c>e?e-c:o,b=f[3]+v*u[0]+f[1],x=f[0]+y*u[1]+f[2],w=m-f[3],S=_-f[0];let T;return(p||0!==h)&&($s[0]=w,Xs[0]=w,$s[1]=S,Hs[1]=S,Hs[0]=w+b,Ws[0]=Hs[0],Ws[1]=S+x,Xs[1]=Ws[1]),0!==h?(T=Q([1,0,0,1,0,0],n,i,1,1,h,-n,-i),J(T,$s),J(T,Hs),J(T,Ws),J(T,Xs),vt(Math.min($s[0],Hs[0],Ws[0],Xs[0]),Math.min($s[1],Hs[1],Ws[1],Xs[1]),Math.max($s[0],Hs[0],Ws[0],Xs[0]),Math.max($s[1],Hs[1],Ws[1],Xs[1]),js)):vt(Math.min(w,w+b),Math.min(S,S+x),Math.max(w,w+b),Math.max(S,S+x),js),d&&(m=Math.round(m),_=Math.round(_)),{drawImageX:m,drawImageY:_,drawImageW:v,drawImageH:y,originX:l,originY:c,declutterBox:{minX:js[0],minY:js[1],maxX:js[2],maxY:js[3],value:g},canvasTransform:T,scale:u}}replayImageOrLabel_(t,e,n,i,r,o,s){const a=!(!o&&!s),l=i.declutterBox,c=t.canvas,h=s?s[2]*i.scale[0]/2:0;return l.minX-h<=c.width/e&&l.maxX+h>=0&&l.minY-h<=c.height/e&&l.maxY+h>=0&&(a&&this.replayTextBackground_(t,$s,Hs,Ws,Xs,o,s),Ve(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){if(this.alignFill_){const e=J(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const r=this.textStates[e],o=this.createLabel(t,e,i,n),s=this.strokeStates[n],a=this.pixelRatio,l=qs(Array.isArray(t)?t[0]:t,r.textAlign||"center"),c=Ns[r.textBaseline||"middle"],h=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:l*(o.width/a-2*r.scale[0])+2*(.5-l)*h,anchorY:c*o.height/a+2*(.5-c)*h}}execute_(t,e,n,i,r,o,s,l){let c;var h,u;this.pixelCoordinates_&&a(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=bi(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),h=this.renderedTransform_,u=n,h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5]);let d=0;const f=i.length;let p,g,m,_,v,y,b,x,w,S,T,C,E=0,M=0,A=0,R=null,k=null;const I=this.coordinateCache_,P=this.viewRotation_,F=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:P},L=this.instructions!=i||this.overlaps?0:200;let O,N,z,G;for(;d<f;){const n=i[d];switch(n[0]){case ks.BEGIN_GEOMETRY:O=n[1],G=n[3],O.getGeometry()?void 0===s||Gt(s,G.getExtent())?++d:d=n[2]+1:d=n[2];break;case ks.BEGIN_PATH:M>L&&(this.fill_(t),M=0),A>L&&(t.stroke(),A=0),M||A||(t.beginPath(),_=NaN,v=NaN),++d;break;case ks.CIRCLE:E=n[1];const i=c[E],a=c[E+1],h=c[E+2]-i,u=c[E+3]-a,f=Math.sqrt(h*h+u*u);t.moveTo(i+f,a),t.arc(i,a,f,0,2*Math.PI,!0),++d;break;case ks.CLOSE_PATH:t.closePath(),++d;break;case ks.CUSTOM:E=n[1],p=n[2];const B=n[3],U=n[4],j=6==n.length?n[5]:void 0;D.geometry=B,D.feature=O,d in I||(I[d]=[]);const $=I[d];j?j(c,E,p,2,$):($[0]=c[E],$[1]=c[E+1],$.length=2),U($,D),++d;break;case ks.DRAW_IMAGE:E=n[1],p=n[2],x=n[3],g=n[4],m=n[5];let H=n[6];const W=n[7],X=n[8],Y=n[9],V=n[10];let q=n[11];const K=n[12];let Z=n[13];const J=n[14],Q=n[15];if(!x&&n.length>=20){w=n[19],S=n[20],T=n[21],C=n[22];const t=this.drawLabelWithPointPlacement_(w,S,T,C);x=t.label,n[3]=x;const e=n[23];g=(t.anchorX-e)*this.pixelRatio,n[4]=g;const i=n[24];m=(t.anchorY-i)*this.pixelRatio,n[5]=m,H=x.height,n[6]=H,Z=x.width,n[13]=Z}let tt,et,nt,it;n.length>25&&(tt=n[25]),n.length>17?(et=n[16],nt=n[17],it=n[18]):(et=ze,nt=!1,it=!1),V&&F?q+=P:V||F||(q-=P);let rt=0;for(;E<p;E+=2){if(tt&&tt[rt++]<Z/this.pixelRatio)continue;const n=this.calculateImageOrLabelDimensions_(x.width,x.height,c[E],c[E+1],Z,H,g,m,X,Y,q,K,r,et,nt||it,O),i=[t,e,x,n,W,nt?R:null,it?k:null];if(l){if("none"===J)continue;if("obstacle"===J){l.insert(n.declutterBox);continue}{let t,e;if(Q){const n=p-E;if(!Q[n]){Q[n]=i;continue}if(t=Q[n],delete Q[n],e=Ys(t),l.collides(e))continue}if(l.collides(n.declutterBox))continue;t&&(l.insert(e),this.replayImageOrLabel_.apply(this,t)),l.insert(n.declutterBox)}}this.replayImageOrLabel_.apply(this,i)}++d;break;case ks.DRAW_CHARS:const ot=n[1],st=n[2],at=n[3],lt=n[4];C=n[5];const ct=n[6],ht=n[7],ut=n[8];T=n[9];const dt=n[10];w=n[11],S=n[12];const ft=[n[13],n[13]],pt=this.textStates[S],gt=pt.font,mt=[pt.scale[0]*ht,pt.scale[1]*ht];let _t;gt in this.widths_?_t=this.widths_[gt]:(_t={},this.widths_[gt]=_t);const vt=Us(c,ot,st,2),yt=Math.abs(mt[0])*Ye(gt,w,_t);if(lt||yt<=vt){const n=this.textStates[S].textAlign,i=Bs(c,ot,st,2,w,(vt-yt)*Ns[n],ct,Math.abs(mt[0]),Ye,gt,_t,F?0:this.viewRotation_);t:if(i){const n=[];let r,o,s,a,c;if(T)for(r=0,o=i.length;r<o;++r){c=i[r],s=c[4],a=this.createLabel(s,S,"",T),g=c[2]+(mt[0]<0?-dt:dt),m=at*a.height+2*(.5-at)*dt*mt[1]/mt[0]-ut;const o=this.calculateImageOrLabelDimensions_(a.width,a.height,c[0],c[1],a.width,a.height,g,m,0,0,c[3],ft,!1,ze,!1,O);if(l&&l.collides(o.declutterBox))break t;n.push([t,e,a,o,1,null,null])}if(C)for(r=0,o=i.length;r<o;++r){c=i[r],s=c[4],a=this.createLabel(s,S,C,""),g=c[2],m=at*a.height-ut;const o=this.calculateImageOrLabelDimensions_(a.width,a.height,c[0],c[1],a.width,a.height,g,m,0,0,c[3],ft,!1,ze,!1,O);if(l&&l.collides(o.declutterBox))break t;n.push([t,e,a,o,1,null,null])}l&&l.load(n.map(Ys));for(let t=0,e=n.length;t<e;++t)this.replayImageOrLabel_.apply(this,n[t])}}++d;break;case ks.END_GEOMETRY:if(void 0!==o){O=n[1];const t=o(O,G);if(t)return t}++d;break;case ks.FILL:L?M++:this.fill_(t),++d;break;case ks.MOVE_TO_LINE_TO:for(E=n[1],p=n[2],N=c[E],z=c[E+1],y=N+.5|0,b=z+.5|0,y===_&&b===v||(t.moveTo(N,z),_=y,v=b),E+=2;E<p;E+=2)N=c[E],z=c[E+1],y=N+.5|0,b=z+.5|0,E!=p-2&&y===_&&b===v||(t.lineTo(N,z),_=y,v=b);++d;break;case ks.SET_FILL_STYLE:R=n,this.alignFill_=n[2],M&&(this.fill_(t),M=0,A&&(t.stroke(),A=0)),t.fillStyle=n[1],++d;break;case ks.SET_STROKE_STYLE:k=n,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,n),++d;break;case ks.STROKE:L?A++:t.stroke(),++d;break;default:++d}}M&&this.fill_(t),A&&t.stroke()}execute(t,e,n,i,r,o){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,r)}};const Js=["Polygon","Circle","LineString","Image","Text","Default"];const Qs={};var ta=class{constructor(t,e,n,i,r,o){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t){for(const e in t){let n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);const i=t[e];for(const t in i){const e=i[t];n[t]=new Zs(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,r,o,s){const a=2*(r=Math.round(r))+1,l=Q(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Fe(a,a));const h=this.hitDetectionContext_;let u;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(u=[1/0,1/0,-1/0,-1/0],St(u,t),ht(u,e*(this.renderBuffer_+r),u));const d=function(t){if(void 0!==Qs[t])return Qs[t];const e=2*t+1,n=t*t,i=new Array(n+1);for(let r=0;r<=t;++r)for(let o=0;o<=t;++o){const s=r*r+o*o;if(s>n)break;let a=i[s];a||(a=[],i[s]=a),a.push(4*((t+r)*e+(t+o))+3),r>0&&a.push(4*((t-r)*e+(t+o))+3),o>0&&(a.push(4*((t+r)*e+(t-o))+3),r>0&&a.push(4*((t-r)*e+(t-o))+3))}const r=[];for(let t=0,e=i.length;t<e;++t)i[t]&&r.push(...i[t]);return Qs[t]=r,r}(r);let f;function p(t,e){const n=h.getImageData(0,0,a,a).data;for(let i=0,l=d.length;i<l;i++)if(n[d[i]]>0){if(!s||"Image"!==f&&"Text"!==f||s.includes(t)){const n=(d[i]-3)/4,s=r-n%a,l=r-(n/a|0),c=o(t,e,s*s+l*l);if(c)return c}h.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);let m,_,v,y,b;for(g.sort(i),m=g.length-1;m>=0;--m){const t=g[m].toString();for(v=this.executorsByZIndex_[t],_=Js.length-1;_>=0;--_)if(f=Js[_],y=v[f],void 0!==y&&(b=y.executeHitDetection(h,l,n,p,u),b))return b}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],r=e[2],o=e[3],s=[n,i,n,o,r,o,r,i];return bi(s,0,8,2,t,s),s}isEmpty(){return d(this.executorsByZIndex_)}execute(t,e,n,r,o,s,a){const l=Object.keys(this.executorsByZIndex_).map(Number);let c,h,u,d,f,p;for(l.sort(i),this.maxExtent_&&(t.save(),this.clip(t,n)),s=s||Js,a&&l.reverse(),c=0,h=l.length;c<h;++c){const i=l[c].toString();for(f=this.executorsByZIndex_[i],u=0,d=s.length;u<d;++u){p=f[s[u]],void 0!==p&&p.execute(t,e,n,r,o,a)}}this.maxExtent_&&t.restore()}};var ea=class extends Is{constructor(t,e,n,i,r,o,s){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,n,i){if(!this.image_)return;const r=bi(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let t=0,e=r.length;t<e;t+=2){const e=r[t]-this.imageAnchorX_,n=r[t+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,i=n+this.imageAnchorY_;Q(s,t,i,1,1,l,-t,-i),o.setTransform.apply(o,s),o.translate(t,i),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,n,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=bi(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_;let s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){const t=r[e]+this.textOffsetX_,n=r[e+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(t-this.textOffsetX_,n-this.textOffsetY_),o.rotate(s),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,t,n),this.textFillState_&&o.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,r){const o=this.context_,s=bi(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);let a=s.length;r&&(a-=2);for(let t=2;t<a;t+=2)o.lineTo(s[t],s[t+1]);return r&&o.closePath(),n}drawRings_(t,e,n,i){for(let r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e}drawCircle(t){if(Gt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(t,e,n){const i=t.getFlatCoordinates();if(i){const r=t.getStride();return bi(i,0,i.length,r,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&Gt(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,n=e.length;t<n;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Gt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Gt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const r=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t)i=this.moveToLineTo_(n,i,r[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Gt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Gt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t){const e=r[t];i=this.drawRings_(n,i,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),a(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:"center";n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:Jo(e||"#000")}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),r=e.getLineDashOffset(),o=e.getLineJoin(),s=e.getWidth(),a=e.getMiterLimit(),l=i||Ne;this.strokeState_={lineCap:void 0!==n?n:"round",lineDash:1===this.pixelRatio_?l:l.map((t=>t*this.pixelRatio_)),lineDashOffset:(r||0)*this.pixelRatio_,lineJoin:void 0!==o?o:"round",lineWidth:(void 0!==s?s:1)*this.pixelRatio_,miterLimit:void 0!==a?a:10,strokeStyle:Jo(t||"#000")}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:Jo(t||"#000")}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),r=n.getLineDashOffset(),o=n.getLineJoin(),s=n.getWidth(),a=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:"round",lineDash:i||Ne,lineDashOffset:r||0,lineJoin:void 0!==o?o:"round",lineWidth:void 0!==s?s:1,miterLimit:void 0!==a?a:10,strokeStyle:Jo(t||"#000")}}else this.textStrokeState_=null;const i=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),s=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),c=t.getText(),h=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:void 0!==i?i:"10px sans-serif",textAlign:void 0!==h?h:"center",textBaseline:void 0!==u?u:"middle"},this.text_=void 0!==c?Array.isArray(c)?c.reduce(((t,e,n)=>t+(n%2?" ":e)),""):c:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}};const na={Point:function(t,e,n,i,r){const o=n.getImage(),s=n.getText();let a;if(o){if(o.getImageState()!=lo)return;let l=t;if(r){const c=o.getDeclutterMode();if("none"!==c)if(l=r,"obstacle"===c){const r=t.getBuilder(n.getZIndex(),"Image");r.setImageStyle(o,a),r.drawPoint(e,i)}else s&&s.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(o,a),c.drawPoint(e,i)}if(s&&s.getText()){let o=t;r&&(o=r);const l=o.getBuilder(n.getZIndex(),"Text");l.setTextStyle(s,a),l.drawText(e,i)}},LineString:function(t,e,n,i,r){const o=n.getStroke();if(o){const r=t.getBuilder(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawLineString(e,i)}const s=n.getText();if(s&&s.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,i)}},Polygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const r=t.getBuilder(n.getZIndex(),"Polygon");r.setFillStrokeStyle(o,s),r.drawPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}},MultiPoint:function(t,e,n,i,r){const o=n.getImage(),s=n.getText();let a;if(o){if(o.getImageState()!=lo)return;let l=t;if(r){const c=o.getDeclutterMode();if("none"!==c)if(l=r,"obstacle"===c){const r=t.getBuilder(n.getZIndex(),"Image");r.setImageStyle(o,a),r.drawMultiPoint(e,i)}else s&&s.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(o,a),c.drawMultiPoint(e,i)}if(s&&s.getText()){let o=t;r&&(o=r);const l=o.getBuilder(n.getZIndex(),"Text");l.setTextStyle(s,a),l.drawText(e,i)}},MultiLineString:function(t,e,n,i,r){const o=n.getStroke();if(o){const r=t.getBuilder(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,i)}const s=n.getText();if(s&&s.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,i)}},MultiPolygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(s||o){const r=t.getBuilder(n.getZIndex(),"Polygon");r.setFillStrokeStyle(o,s),r.drawMultiPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}},GeometryCollection:function(t,e,n,i,r){const o=e.getGeometriesArray();let s,a;for(s=0,a=o.length;s<a;++s){(0,na[o[s].getType()])(t,o[s],n,i,r)}},Circle:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const r=t.getBuilder(n.getZIndex(),"Circle");r.setFillStrokeStyle(o,s),r.drawCircle(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}}};function ia(t,e){return parseInt(P(t),10)-parseInt(P(e),10)}function ra(t,e){return.5*t/e}function oa(t,e,n,i,r,o,s){let a=!1;const l=n.getImage();if(l){const t=l.getImageState();t==lo||t==co?l.unlistenImageChange(r):(t==so&&l.load(),l.listenImageChange(r),a=!0)}return function(t,e,n,i,r,o){const s=n.getGeometryFunction()(e);if(!s)return;const a=s.simplifyTransformed(i,r);if(n.getRenderer())sa(t,a,n,e);else{(0,na[a.getType()])(t,a,n,e,o)}}(t,e,n,i,o,s),a}function sa(t,e,n,i){if("GeometryCollection"==e.getType()){const r=e.getGeometries();for(let e=0,o=r.length;e<o;++e)sa(t,r[e],n,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer())}var aa=class extends po{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,l=r.rotation,c=a.getExtent(),h=this.getLayer().getSource(),u=e.pixelRatio,d=e.viewHints,f=!(d[Tn]||d[Cn]),p=this.compositionContext_,g=Math.round(e.size[0]*u),m=Math.round(e.size[1]*u),_=h.getWrapX()&&a.canWrapX(),v=_?zt(c):null,y=_?Math.ceil((i[2]-c[2])/v)+1:1;let b=_?Math.floor((i[0]-c[0])/v):0;do{const e=this.getRenderTransform(o,s,l,u,g,m,b*v);t.execute(p,1,e,l,f,void 0,n)}while(++b<y)}setupCompositionContext_(){if(1!==this.opacity_){const t=Fe(this.context.canvas.width,this.context.canvas.height,uo);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,De(this.compositionContext_),uo.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];!function(t,e,n){(function(t,e,n,i,r,o,s){t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s})(t,e,0,0,n,0,0)}(this.pixelTransform,1/n,1/n),tt(this.inversePixelTransform,this.pixelTransform);const r=nt(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const o=this.context,s=o.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;const c=Math.round(t.size[0]*n),h=Math.round(t.size[1]*n);s.width!=c||s.height!=h?(s.width=c,s.height=h,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,c,h),this.preRender(o,t);const u=t.viewState;u.projection,this.opacity_=i.opacity,this.setupCompositionContext_();let d=!1,f=!0;if(i.extent&&this.clipping){const e=oi(i.extent);f=Gt(e,t.extent),d=f&&!pt(e,t.extent),d&&this.clipUnrotated(this.compositionContext_,t,e)}return f&&this.renderWorlds(a,t),d&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==u.rotation&&(this.renderedRotation_=u.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];J(this.pixelTransform,t);const e=this.renderedCenter_,n=this.renderedResolution_,r=this.renderedRotation_,o=this.renderedProjection_,s=this.wrappedRenderedExtent_,a=this.getLayer(),l=[],c=.5*t[0],h=.5*t[1];l.push(this.getRenderTransform(e,n,r,.5,c,h,0).slice());const u=a.getSource(),d=o.getExtent();if(u.getWrapX()&&o.canWrapX()&&!pt(d,s)){let t=s[0];const i=zt(d);let o,a=0;for(;t<d[0];)--a,o=i*a,l.push(this.getRenderTransform(e,n,r,.5,c,h,o).slice()),t+=i;for(a=0,t=s[2];t>d[2];)++a,o=i*a,l.push(this.getRenderTransform(e,n,r,.5,c,h,o).slice()),t-=i}this.hitDetectionImageData_=function(t,e,n,r,o,s,a){const l=Fe(.5*t[0],.5*t[1]);l.imageSmoothingEnabled=!1;const c=l.canvas,h=new ea(l,.5,o,null,a),u=n.length,d=Math.floor(16777215/u),f={};for(let t=1;t<=u;++t){const e=n[t-1],i=e.getStyleFunction()||r;if(!r)continue;let a=i(e,s);if(!a)continue;Array.isArray(a)||(a=[a]);const l="#"+("000000"+(t*d).toString(16)).slice(-6);for(let t=0,n=a.length;t<n;++t){const n=a[t],i=n.getGeometryFunction()(e);if(!i||!Gt(o,i.getExtent()))continue;const r=n.clone(),s=r.getFill();s&&s.setColor(l);const c=r.getStroke();c&&(c.setColor(l),c.setLineDash(null)),r.setText(void 0);const h=n.getImage();if(h&&0!==h.getOpacity()){const t=h.getImageSize();if(!t)continue;const e=Fe(t[0],t[1],void 0,{alpha:!1}),n=e.canvas;e.fillStyle=l,e.fillRect(0,0,n.width,n.height),r.setImage(new gs({img:n,imgSize:t,anchor:h.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:h.getOrigin(),opacity:1,size:h.getSize(),scale:h.getScale(),rotation:h.getRotation(),rotateWithView:h.getRotateWithView()}))}const u=r.getZIndex()||0;let d=f[u];d||(d={},f[u]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[]),d[i.getType().replace("Multi","")].push(i,r)}}const p=Object.keys(f).map(Number).sort(i);for(let t=0,n=p.length;t<n;++t){const n=f[p[t]];for(const t in n){const i=n[t];for(let t=0,n=i.length;t<n;t+=2){h.setStyle(i[t+1]);for(let n=0,r=e.length;n<r;++n)h.setTransform(e[n]),h.drawGeometry(i[t])}}}return l.getImageData(0,0,c.width,c.height)}(t,l,this.renderedFeatures_,a.getStyleFunction(),s,n,r)}e(function(t,e,n){const i=[];if(n){const r=Math.floor(.5*Math.round(t[0])),o=Math.floor(.5*Math.round(t[1])),s=4*(jt(r,0,n.width-1)+jt(o,0,n.height-1)*n.width),a=n.data[s],l=n.data[s+1],c=n.data[s+2]+256*(l+256*a),h=Math.floor(16777215/e.length);c&&c%h==0&&i.push(e[c/h-1])}return i}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,n,i,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={},c=function(t,e,n){const o=P(t),s=l[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return l[o]=!0,r.splice(r.lastIndexOf(s),1),i(t,a,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return l[o]=!0,i(t,a,e);r.push(l[o]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}};let h;const u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some((i=>h=i.forEachFeatureAtCoordinate(t,o,s,n,c,i===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),h}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[Tn],r=t.viewHints[Cn],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(this.ready&&!o&&i||!s&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,h=c.projection,u=c.resolution,d=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer();let g=e.getRenderOrder();void 0===g&&(g=ia);const m=c.center.slice(),_=ht(l,p*u),v=_.slice(),y=[_.slice()],b=h.getExtent();if(n.getWrapX()&&h.canWrapX()&&!pt(b,t.extent)){const t=zt(b),e=Math.max(zt(_)/2,t);_[0]=b[0]-e,_[2]=b[2]+e,Ee(m,h);const n=Ut(y[0],h);n[0]<b[0]&&n[2]<b[2]?y.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>b[0]&&n[2]>b[2]&&y.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&pt(this.wrappedRenderedExtent_,_))return a(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new Gs(ra(u,d),_,u,d);let w;this.getLayer().getDeclutter()&&(w=new Gs(ra(u,d),_,u,d));for(let t=0,e=y.length;t<e;++t)n.loadFeatures(y[t],u,h);const S=function(t,e){const n=ra(t,e);return n*n}(u,d);let T=!0;const C=function(t){let n;const i=t.getStyleFunction()||e.getStyleFunction();if(i&&(n=i(t,u)),n){const e=this.renderFeature(t,S,n,x,undefined,w);T=T&&!e}}.bind(this),E=ri(_),M=n.getFeaturesInExtent(E);g&&M.sort(g);for(let t=0,e=M.length;t<e;++t)C(M[t]);this.renderedFeatures_=M,this.ready=T;const A=x.finish(),R=new ta(_,u,d,n.getOverlaps(),A,e.getRenderBuffer());return w&&(this.declutterExecutorGroup=new ta(_,u,d,n.getOverlaps(),w.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=v,this.wrappedRenderedExtent_=_,this.renderedCenter_=m,this.renderedProjection_=h,this.replayGroup_=R,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,r,o){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)s=oa(i,t,n[a],e,this.boundHandleStyleImageChange_,r,o)||s;else s=oa(i,t,n,e,this.boundHandleStyleImageChange_,r,o);return s}};var la=class extends Ts{constructor(t){super(t)}createRenderer(){return new aa(this)}};var ca=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return Z(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return Z(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Z(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}};function ha(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function ua(t,e,n){return t+"/"+e+"/"+n}function da(t){return ua(t[0],t[1],t[2])}var fa=class extends ca{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=function(t){return t.split("/").map(Number)}(this.peekFirstKey()),e=t[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(da(t.tileCoord)),t.release())}.bind(this))}},pa="tileloadstart",ga="tileloadend",ma="tileloaderror";function _a(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var va=class extends D{constructor(t){super(),this.projection=qn(t.projection),this.attributions_=_a(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return k()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=_a(t),this.changed()}setState(t){this.state_=t,this.changed()}};const ya=[0,0,0];var ba=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Z(function(t,e,n){const r=e||i;return t.every((function(e,i){if(0===i)return!0;const o=r(t[i-1],e);return!(o>0||n&&0===o)}))}(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let t=0,n=this.resolutions_.length-1;t<n;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Z(this.origins_.length==this.resolutions_.length,20));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=Ot(n)),Z(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Z(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Z(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const i=new Ao(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){const t=this.getTileRangeForExtentAndZ(n,e);i.minX=Math.max(t.minX,i.minX),i.maxX=Math.min(t.maxX,i.maxX),i.minY=Math.max(t.minY,i.minY),i.maxY=Math.min(t.maxY,i.maxY)}return i}),this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let t=i.minX,r=i.maxX;t<=r;++t)for(let r=i.minY,o=i.maxY;r<=o;++r)n([e,t,r])}forEachTileCoordParentTileRange(t,e,n,i){let r,o,s,a=null,l=t[0]-1;for(2===this.zoomFactor_?(o=t[1],s=t[2]):a=this.getTileCoordExtent(t,i);l>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),s=Math.floor(s/2),r=Mo(o,o,s,s,n)):r=this.getTileRangeForExtentAndZ(a,l,n),e(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],i=2*t[2];return Mo(n,n+1,i,i+1,e)}const i=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const i=t[0],r=t[1],o=t[2];if(e===i)return Mo(r,o,r,o,n);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-i),s=Math.floor(r*t),a=Math.floor(o*t);if(e<i)return Mo(s,s,a,a,n);return Mo(s,Math.floor(t*(r+1))-1,a,Math.floor(t*(o+1))-1,n)}const s=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e,n)}getTileRangeExtent(t,e,n){const i=this.getOrigin(t),r=this.getResolution(t),o=Qr(this.getTileSize(t),this.tmpSize_),s=i[0]+e.minX*o[0]*r,a=i[0]+(e.maxX+1)*o[0]*r;return vt(s,i[1]+e.minY*o[1]*r,a,i[1]+(e.maxY+1)*o[1]*r,n)}getTileRangeForExtentAndZ(t,e,n){const i=ya;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);const r=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),Mo(r,i[1],o,i[2],n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Qr(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Qr(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,s=n[1]-(t[2]+1)*r[1]*i;return vt(o,s,o+r[0]*i,s+r[1]*i,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),l=Qr(this.getTileSize(o),this.tmpSize_);let c=s*(t-a[0])/n/l[0],h=s*(a[1]-e)/n/l[1];return i?(c=Kt(c,5)-1,h=Kt(h,5)-1):(c=qt(c,5),h=qt(h,5)),ha(o,c,h,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const o=this.getOrigin(n),s=this.getResolution(n),a=Qr(this.getTileSize(n),this.tmpSize_);let l=(t-o[0])/s/a[0],c=(o[1]-e)/s/a[1];return i?(l=Kt(l,5)-1,c=Kt(c,5)-1):(l=qt(l,5),c=qt(c,5)),ha(n,l,c,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){return jt(r(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Ji(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}};function xa(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){i=void 0!==i?i:"top-left";const r=wa(t,e,n);return new ba({extent:t,origin:It(t,i),resolutions:r,tileSize:n})}(Sa(t),e,n,i)}(t),t.setDefaultTileGrid(e)),e}function wa(t,e,n,i){e=void 0!==e?e:42,n=Qr(void 0!==n?n:256);const r=Dt(t),o=zt(t);i=i>0?i:Math.max(o/n[0],r/n[1]);const s=e+1,a=new Array(s);for(let t=0;t<s;++t)a[t]=i/Math.pow(2,t);return a}function Sa(t){let e=(t=qn(t)).getExtent();if(!e){const n=180*Mn.degrees/t.getMetersPerUnit();e=vt(-n,-n,n,n)}return e}class Ta extends t{constructor(t,e){super(t),this.tile=e}}var Ca=class extends va{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Qr(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new fa(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,i){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o,s,a,l=!0;for(let t=n.minX;t<=n.maxX;++t)for(let c=n.minY;c<=n.maxY;++c)s=ua(e,t,c),a=!1,r.containsKey(s)&&(o=r.get(s),a=o.getState()===bn,a&&(a=!1!==i(o))),a||(l=!1);return l}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,n,i,r){return k()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:xa(t)}getTileCacheForProjection(t){const e=this.getProjection();return Z(null===e||Qn(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=Qr(i.getTileSize(t),this.tmpSize);return 1==r?o:(s=o,a=r,void 0===(l=this.tmpSize)&&(l=[0,0]),l[0]=s[0]*a+.5|0,l[1]=s[1]*a+.5|0,l);var s,a,l}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),o=Sa(n);if(ft(o,r))return e;{const e=zt(o),n=Math.ceil((o[0]-r[0])/e);return r[0]+=e*n,t.getTileCoordForCoordAndZ(r,i)}}(n,t,e)),function(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const o=e.getFullTileRange(n);return!o||o.containsXY(i,r)}(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,i){}};function Ea(t,e){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(r,s[2].toString()).replace(o,(function(){const t=s[0],n=e.getFullTileRange(t);Z(n,55);return(n.getHeight()-s[2]-1).toString()})):void 0}}function Ma(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ea(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(e){const r=function(t){return(t[1]<<t[0])+t[2]}(e),o=Xt(r,t.length);return t[o](e,n,i)}}}(i)}class Aa extends Ca{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Aa.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=P(e),i=e.getState();let r;i==yn?(this.tileLoadingKeys_[n]=!0,r=pa):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==xn?ma:i==bn?ga:void 0),null!=r&&this.dispatchEvent(new Ta(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=function(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Ma(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=ua(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}var Ra=Aa;function ka(t,e){t.getImage().src=e}var Ia=class extends Ra{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:ka,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:_o,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const t in this.tileCacheForProjection){const i=this.tileCacheForProjection[t];i.expireCache(i==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Qn(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!Qn(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(!this.tileGrid||e&&!Qn(e,t)){const e=P(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=xa(t)),this.tileGridForProjection[e]}return this.tileGrid}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Qn(e,t))return this.tileCache;{const e=P(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new fa(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}}createTile_(t,e,n,i,r,o){const s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,r),l=a?this.tileUrlFunction(a,i,r):void 0,c=new this.tileClass(s,void 0!==l?vn:wn,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(p,this.handleTileChange.bind(this)),c}getTile(t,e,n,i,r){const o=this.getProjection();if(o&&r&&!Qn(o,r)){const s=this.getTileCacheForProjection(r),a=[t,e,n];let l;const c=da(a);s.containsKey(c)&&(l=s.get(c));const h=this.getKey();if(l&&l.key==h)return l;{const t=this.getTileGridForProjection(o),e=this.getTileGridForProjection(r),n=this.getTileCoordForTileUrlFunction(a,r),u=new Co(o,t,r,e,a,n,this.getTilePixelRatio(i),this.getGutter(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return u.key=h,l?(u.interimTile=l,u.refreshInterimChain(),s.replace(c,u)):s.set(c,u),u}}return this.getTileInternal(t,e,n,i,o||r)}getTileInternal(t,e,n,i,r){let o=null;const s=ua(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if(o=this.tileCache.get(s),o.key!=a){const l=o;o=this.createTile_(t,e,n,i,r,a),l.getState()==vn?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,n,i,r,a),this.tileCache.set(s,o);return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const n=qn(t);if(n){const t=P(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};var Pa=class extends Ia{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:function(t){const e=t||{},n=e.extent||qn("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:wa(n,e.maxZoom,e.tileSize,e.maxResolution)};return new ba(i)}({extent:Sa(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}};var Fa=class extends Pa{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}};var Da=class{constructor(t){this.rbush_=new Lo(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[P(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const r=t[i],o=e[i],s={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o};n[i]=s,this.items_[P(o)]=s}this.rbush_.load(n)}remove(t){const e=P(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[P(e)];xt([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,r=t.length;i<r;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return d(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return vt(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}},La="addfeature",Oa="changefeature",Na="clear",za="removefeature",Ga="featuresloadstart",Ba="featuresloadend",Ua="featuresloaderror";function ja(t,e){return[[-1/0,-1/0,1/0,1/0]]}function $a(t,e){return function(n,i,r,o,s){const a=this;!function(t,e,n,i,r,o,s){const a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,i,r):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=!1,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let i;"json"==t||"text"==t?i=a.responseText:"xml"==t?(i=a.responseXML,i||(i=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(i=a.response),i?o(e.readFeatures(i,{extent:n,featureProjection:r}),e.readProjection(i)):s()}else s()},a.onerror=s,a.send()}(t,e,n,i,r,(function(t,e){a.addFeatures(t),void 0!==o&&o(t)}),s||h)}}class Ha extends t{constructor(t,e,n){super(t),this.feature=e,this.features=n}}var Wa=class extends va{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=h,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(Z(this.format_,7),this.loader_=$a(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:ja;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,i;this.featuresRtree_=e?new Da:null,this.loadedExtentsRtree_=new Da,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(n=t.features,i=n.getArray()),e||void 0!==n||(n=new j(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=P(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Ha(La,t))}setupChangeEvents_(t,n){this.featureChangeKeys_[t]=[C(n,p,this.handleFeatureChange_,this),C(n,e,this.handleFeatureChange_,this)]}addToIndex_(t,e){let n=!0;const i=e.getId();return void 0!==i&&(i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e),n&&(Z(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let e=0,i=t.length;e<i;e++){const i=t[e],r=P(i);this.addToIndex_(r,i)&&n.push(i)}for(let t=0,r=n.length;t<r;t++){const r=n[t],o=P(r);this.setupChangeEvents_(o,r);const s=r.getGeometry();if(s){const t=s.getExtent();e.push(t),i.push(r)}else this.nullGeometryFeatures_[o]=r}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(La))for(let t=0,e=n.length;t<e;t++)this.dispatchEvent(new Ha(La,n[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(La,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(za,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(z,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(G,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(M)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=function(t){this.removeFeatureInternal(t)}.bind(this);this.featuresRtree_.forEach(t);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Ha(Na);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){const t=e(n);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),d(this.nullGeometryFeatures_)||s(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=function(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];Ut(t,e);const i=zt(n);if(zt(t)>i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}(t,e);return[].concat(...n.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let r=null;const o=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||l,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=s;if(s=e.closestPointXY(n,i,o,s),s<l){r=t;const e=Math.sqrt(s);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=P(e),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new Ha(Oa,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:P(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&d(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let t=0,o=r.length;t<o;++t){const o=r[t],s=i.forEachInExtent(o,(function(t){return pt(t.extent,o)}));s||(++this.loadingExtentsCount_,this.dispatchEvent(new Ha(Ga)),this.loader_.call(this,o,e,n,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new Ha(Ba,void 0,t))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Ha(Ua))}.bind(this)),i.insert(o,{extent:o.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,(function(e){if(xt(e.extent,t))return n=e,!0})),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=P(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=P(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(M),delete this.featureChangeKeys_[e];const i=t.getId();return void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Ha(za,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){Z(this.format_,7),this.url_=t,this.setLoader($a(t,this.format_))}};class Xa extends D{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Xa(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(M(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=C(t,p,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;{let e;if(Array.isArray(t))e=t;else{Z("function"==typeof t.getZIndex,41);e=[t]}return function(){return e}}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}var Ya=Xa;class Va extends Si{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(M),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(C(this.geometries_[t],p,this.changed,this))}clone(){const t=new Va(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<dt(this.getExtent(),t,e))return i;const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)i=r[o].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){yt(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)wt(t,e[n].getExtent());return t}getGeometries(){return qa(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let r=0,o=n.length;r<o;++r){const o=n[r],s=o.getSimplifiedGeometry(t);e.push(s),s!==o&&(i=!0)}if(i){const t=new Va(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=kt(this.getExtent()));const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(qa(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function qa(t){const e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}var Ka=Va;var Za=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?qn(e.dataProjection):this.readProjection(t);e.extent&&n&&"tile-pixels"===n.getUnits()&&(n=qn(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return k()}readFeature(t,e){return k()}readFeatures(t,e){return k()}readGeometry(t,e){return k()}readProjection(t){return k()}writeFeature(t,e){return k()}writeFeatures(t,e){return k()}writeGeometry(t,e){return k()}};function Ja(t,e,n){const i=n?qn(n.featureProjection):null,r=n?qn(n.dataProjection):null;let o;if(o=i&&r&&!Qn(i,r)?(e?t.clone():t).transform(e?i:r,e?r:i):t,e&&n&&void 0!==n.decimals){const e=Math.pow(10,n.decimals),i=function(t){for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e)/e;return t};o===t&&(o=t.clone()),o.applyTransform(i)}return o}function Qa(t){if("string"==typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}var tl=class extends Za{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Qa(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Qa(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return k()}readFeaturesFromObject(t,e){return k()}readGeometry(t,e){return this.readGeometryFromObject(Qa(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return k()}readProjection(t){return this.readProjectionFromObject(Qa(t))}readProjectionFromObject(t){return k()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return k()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return k()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return k()}};function el(t,e,n,r,o,s,a){let l,c;const h=(n-e)/r;if(1===h)l=e;else if(2===h)l=e,c=o;else if(0!==h){let s=t[e],a=t[e+1],h=0;const u=[0];for(let i=e+r;i<n;i+=r){const e=t[i],n=t[i+1];h+=Math.sqrt((e-s)*(e-s)+(n-a)*(n-a)),u.push(h),s=e,a=n}const d=o*h,f=function(t,e,n){let r,o;n=n||i;let s=0,a=t.length,l=!1;for(;s<a;)r=s+(a-s>>1),o=+n(t[r],e),o<0?s=r+1:(a=r,l=!o);return l?s:~s}(u,d);f<0?(c=(d-u[-f-2])/(u[-f-1]-u[-f-2]),l=e+(-f-2)*r):l=e+f*r}a=a>1?a:2,s=s||new Array(a);for(let e=0;e<a;++e)s[e]=void 0===l?NaN:void 0===c?t[l+e]:Yt(t[l+e],t[l+r+e],c);return s}function nl(t,e,n,i,r,o){if(n==e)return null;let s;if(r<t[e+i-1])return o?(s=t.slice(e,e+i),s[i-1]=r,s):null;if(t[n-1]<r)return o?(s=t.slice(n-i,n),s[i-1]=r,s):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const e=a+l>>1;r<t[(e+1)*i-1]?l=e:a=e+1}const c=t[a*i-1];if(r==c)return t.slice((a-1)*i,(a-1)*i+i);const h=(r-c)/(t[(a+1)*i-1]-c);s=[];for(let e=0;e<i-1;++e)s.push(Yt(t[(a-1)*i+e],t[a*i+e],h));return s.push(r),s}class il extends Ci{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?s(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new il(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<dt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Mi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return Ki(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,nl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Ni(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return el(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Us(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Fi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new il(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Zi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ii(this.flatCoordinates,0,t,this.stride),this.changed()}}var rl=il;class ol extends Ci{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{let e=this.getLayout();const n=t,i=[],r=[];for(let t=0,o=n.length;t<o;++t){const o=n[t];0===t&&(e=o.getLayout()),s(i,o.getFlatCoordinates()),r.push(i.length)}this.setFlatCoordinates(e,i),this.ends_=r}}appendLineString(t){this.flatCoordinates?s(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ol(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<dt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ai(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ki(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,function(t,e,n,i,r,o,s){if(s)return nl(t,e,n[n.length-1],i,r,o);let a;if(r<t[i-1])return o?(a=t.slice(0,i),a[i-1]=r,a):null;if(t[t.length-1]<r)return o?(a=t.slice(t.length-i),a[i-1]=r,a):null;for(let o=0,s=n.length;o<s;++o){const s=n[o];if(e!=s){if(r<t[e+i-1])return null;if(r<=t[s-1])return nl(t,e,s,i,r,!1);e=s}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return zi(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new rl(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let r=0;for(let o=0,s=e.length;o<s;++o){const s=e[o],a=new rl(t.slice(r,s),n);i.push(a),r=s}return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,r=this.stride;for(let o=0,a=i.length;o<a;++o){const a=i[o];s(t,el(e,n,a,r,.5)),n=a}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=function(t,e,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){const c=n[l];s=Fi(t,e,c,i,r,o,s),a.push(s),e=c}return s}(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new ol(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return function(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){if(Zi(t,e,n[o],i,r))return!0;e=n[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Pi(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}var sl=ol;class al extends Ci{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?s(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new al(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<dt(this.getExtent(),t,e))return i;const r=this.flatCoordinates,o=this.stride;for(let s=0,a=r.length;s<a;s+=o){const a=Ht(t,e,r[s],r[s+1]);if(a<i){i=a;for(let t=0;t<o;++t)n[t]=r[s+t];n.length=o}}return i}getCoordinates(){return Ni(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Wi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let r=0,o=t.length;r<o;r+=n){const o=new Wi(t.slice(r,r+n),e);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,r=e.length;i<r;i+=n){if(gt(t,e[i],e[i+1]))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ii(this.flatCoordinates,0,t,this.stride),this.changed()}}var ll=al;class cl extends Ci{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){let i=this.getLayout();const r=t,o=[],a=[];for(let t=0,e=r.length;t<e;++t){const e=r[t];0===t&&(i=e.getLayout());const n=o.length,l=e.getEnds();for(let t=0,e=l.length;t<e;++t)l[t]+=n;s(o,e.getFlatCoordinates()),a.push(l)}e=i,t=o,n=a}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;s(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const n=new cl(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<dt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];r=Ai(t,e,s,i,r),e=s[s.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,r,o,s,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=n.length;u<d;++u){const d=n[u];c=ki(t,e,d,i,r,o,s,a,l,c,h),e=d[d.length-1]}return c}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return function(t,e,n,i,r,o){if(0===n.length)return!1;for(let s=0,a=n.length;s<a;++s){const a=n[s];if(Vi(t,e,a,i,r,o))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function(t,e,n,i){let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o];r+=Ui(t,e,s,i),e=s[s.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),rr(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Gi(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=function(t,e,n,i){const r=[];let o=[1/0,1/0,-1/0,-1/0];for(let s=0,a=n.length;s<a;++s){const a=n[s];o=bt(t,e,a[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,n,i,r){let o=[];for(let s=0,a=n.length;s<a;++s){const a=n[s];o=qi(t,e,a,i,r,2*s,o),e=a[a.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ll(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];if(!nr(t,e,s,i,r))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=rr(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=function(t,e,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){const c=n[l],h=[];s=Oi(t,e,c,i,r,o,s,h),a.push(h),e=c[c.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new cl(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let t=0,i=n.length;t<i;++t)n[t]-=e;return new sr(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o].slice(),a=s[s.length-1];if(0!==r)for(let t=0,e=s.length;t<e;++t)s[t]-=r;const l=new sr(e.slice(r,a),t,s);i.push(l),r=a}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return function(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];if(Qi(t,e,s,i,r))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=function(t,e,n,i,r){r=r||[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=Pi(t,e,n[s],i,r[o]);0===a.length&&(a[0]=e),r[o++]=a,e=a[a.length-1]}return r.length=o,r}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var hl=cl;function ul(t,e){if(!t)return null;let n;switch(t.type){case"Point":n=function(t){return new Wi(t.coordinates)}(t);break;case"LineString":n=function(t){return new rl(t.coordinates)}(t);break;case"Polygon":n=function(t){return new sr(t.coordinates)}(t);break;case"MultiPoint":n=function(t){return new ll(t.coordinates)}(t);break;case"MultiLineString":n=function(t){return new sl(t.coordinates)}(t);break;case"MultiPolygon":n=function(t){return new hl(t.coordinates)}(t);break;case"GeometryCollection":n=function(t,e){const n=t.geometries.map((function(t){return ul(t,e)}));return new Ka(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Ja(n,!1,e)}function dl(t,e){const n=(t=Ja(t,!0,e)).getType();let i;switch(n){case"Point":i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"MultiPoint":i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"GeometryCollection":i=function(t,e){delete(e=Object.assign({},e)).featureProjection;return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){return dl(t,e)}))}}(t,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}var fl=class extends tl{constructor(t){t=t||{},super(),this.dataProjection=qn(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=qn(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const i=ul(n.geometry,e),r=new Ya;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&r.setGeometryName(n.geometry_name),r.setGeometry(i),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r}readFeaturesFromObject(t,e){let n=null;if("FeatureCollection"===t.type){n=[];const i=t.features;for(let t=0,r=i.length;t<r;++t)n.push(this.readFeatureFromObject(i[t],e))}else n=[this.readFeatureFromObject(t,e)];return n}readGeometryFromObject(t,e){return ul(t,e)}readProjectionFromObject(t){const e=t.crs;let n;return e?"name"==e.type?n=qn(e.properties.name):"EPSG"===e.type?n=qn("EPSG:"+e.properties.code):Z(!1,36):n=this.dataProjection,n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(n.id=i),!t.hasProperties())return n;const r=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=dl(o,e),delete r[t.getGeometryName()]),d(r)||(n.properties=r),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return dl(t,this.adaptOptions(e))}};const pl=1,gl=2,ml=3,_l=4,vl=5,yl=6,bl=7,xl=15,wl=16,Sl=17;class Tl{constructor(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(t){return this.view_.getUint32((this.pos_+=4)-4,void 0!==t?t:this.isLittleEndian_)}readDouble(t){return this.view_.getFloat64((this.pos_+=8)-8,void 0!==t?t:this.isLittleEndian_)}readPoint(){const t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t}readLineString(){const t=this.readUint32(),e=[];for(let n=0;n<t;n++)e.push(this.readPoint());return e}readPolygon(){const t=this.readUint32(),e=[];for(let n=0;n<t;n++)e.push(this.readLineString());return e}readWkbHeader(t){const e=this.readUint8()>0,n=this.readUint32(e),i=Math.floor((268435455&n)/1e3),r=Boolean(2147483648&n)||1===i||3===i,o=Boolean(1073741824&n)||2===i||3===i,s=Boolean(536870912&n),a=(268435455&n)%1e3,l=["XY",r?"Z":"",o?"M":""].join(""),c=s?this.readUint32(e):null;if(void 0!==t&&t!==a)throw new Error("Unexpected WKB geometry type "+a);if(this.initialized_){if(this.isLittleEndian_!==e)throw new Error("Inconsistent endian");if(this.layout_!==l)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=e,this.hasZ_=r,this.hasM_=o,this.layout_=l,this.srid_=c,this.initialized_=!0;return a}readWkbPayload(t){switch(t){case pl:return this.readPoint();case gl:return this.readLineString();case ml:case Sl:return this.readPolygon();case _l:return this.readMultiPoint();case vl:return this.readMultiLineString();case yl:case xl:case wl:return this.readMultiPolygon();case bl:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}}readWkbBlock(t){return this.readWkbPayload(this.readWkbHeader(t))}readWkbCollection(t,e){const n=this.readUint32(),i=[];for(let r=0;r<n;r++){const n=t.call(this,e);n&&i.push(n)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,pl)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,gl)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,ml)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const t=this.readWkbHeader(),e=this.readWkbPayload(t);switch(t){case pl:return new Wi(e,this.layout_);case gl:return new rl(e,this.layout_);case ml:case Sl:return new sr(e,this.layout_);case _l:return new ll(e,this.layout_);case vl:return new sl(e,this.layout_);case yl:case xl:case wl:return new hl(e,this.layout_);case bl:return new Ka(e);default:return null}}getSrid(){return this.srid_}}class Cl{constructor(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=!1!==t.littleEndian,this.isEWKB_=!1!==t.ewkb,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}writeUint8(t){this.writeQueue_.push([1,t])}writeUint32(t){this.writeQueue_.push([4,t])}writeDouble(t){this.writeQueue_.push([8,t])}writePoint(t,e){const n=Object.assign.apply(null,e.split("").map(((e,n)=>({[e]:t[n]}))));for(const t of this.layout_)this.writeDouble(t in n?n[t]:this.nodata_[t])}writeLineString(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writePoint(t[n],e)}writePolygon(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeLineString(t[n],e)}writeWkbHeader(t,e){t%=1e3,this.layout_.includes("Z")&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(e)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(e)&&this.writeUint32(e)}writeMultiPoint(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(1),this.writePoint(t[n],e)}writeMultiLineString(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(2),this.writeLineString(t[n],e)}writeMultiPolygon(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(3),this.writePolygon(t[n],e)}writeGeometryCollection(t){this.writeUint32(t.length);for(let e=0;e<t.length;e++)this.writeGeometry(t[e])}findMinimumLayout(t,e="XYZM"){if(t instanceof Ci)return((t,e)=>t===e?t:"XYZM"===t?e:"XYZM"===e?t:"XY")(t.getLayout(),e);if(t instanceof Ka){const n=t.getGeometriesArray();for(let t=0;t<n.length&&"XY"!==e;t++)e=this.findMinimumLayout(n[t],e)}return e}writeGeometry(t,e){const n={Point:pl,LineString:gl,Polygon:ml,MultiPoint:_l,MultiLineString:vl,MultiPolygon:yl,GeometryCollection:bl},i=t.getType(),r=n[i];if(!r)throw new Error("GeometryType "+i+" is not supported");if(this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(r,e),t instanceof Ci){({Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon})[i].call(this,t.getCoordinates(),t.getLayout())}else t instanceof Ka&&this.writeGeometryCollection(t.getGeometriesArray())}getBuffer(){const t=this.writeQueue_.reduce(((t,e)=>t+e[0]),0),e=new ArrayBuffer(t),n=new DataView(e);let i=0;return this.writeQueue_.forEach((t=>{switch(t[0]){case 1:n.setUint8(i,t[1]);break;case 4:n.setUint32(i,t[1],this.isLittleEndian_);break;case 8:n.setFloat64(i,t[1],this.isLittleEndian_)}i+=t[0]})),e}}function El(t){return"string"==typeof t?function(t){const e=new Uint8Array(t.length/2);for(let n=0;n<t.length/2;n++)e[n]=parseInt(t.substr(2*n,2),16);return new DataView(e.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var Ml=class extends Za{constructor(t){super(),t=t||{},this.splitCollection=Boolean(t.splitCollection),this.viewCache_=null,this.hex_=!1!==t.hex,this.littleEndian_=!1!==t.littleEndian,this.ewkb_=!1!==t.ewkb,this.layout_=t.geometryLayout,this.nodataZ_=t.nodataZ||0,this.nodataM_=t.nodataM||0,this.srid_=t.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(t,e){return new Ya({geometry:this.readGeometry(t,e)})}readFeatures(t,e){let n=[];const i=this.readGeometry(t,e);return n=this.splitCollection&&i instanceof Ka?i.getGeometriesArray():[i],n.map((t=>new Ya({geometry:t})))}readGeometry(t,e){const n=El(t);if(!n)return null;const i=new Tl(n).readGeometry();return this.viewCache_=n,e=this.getReadOptions(t,e),this.viewCache_=null,Ja(i,!1,e)}readProjection(t){const e=this.viewCache_||El(t);if(!e)return;const n=new Tl(e);return n.readWkbHeader(),n.getSrid()&&qn("EPSG:"+n.getSrid())||void 0}writeFeature(t,e){return this.writeGeometry(t.getGeometry(),e)}writeFeatures(t,e){return this.writeGeometry(new Ka(t.map((t=>t.getGeometry()))),e)}writeGeometry(t,e){e=this.adaptOptions(e);const n=new Cl({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(!1!==this.srid_&&!Number.isInteger(this.srid_)){const t=e.dataProjection&&qn(e.dataProjection);if(t){const e=t.getCode();e.startsWith("EPSG:")&&(i=Number(e.substring(5)))}}n.writeGeometry(Ja(t,!0,e),i);const r=n.getBuffer();return this.hex_?function(t){const e=new Uint8Array(t);return Array.from(e.values()).map((t=>(t<16?"0":"")+Number(t).toString(16).toUpperCase())).join("")}(r):r}};const Al="translatestart",Rl="translating",kl="translateend";class Il extends t{constructor(t,e,n,i,r){super(t),this.features=e,this.coordinate=n,this.startCoordinate=i,this.mapBrowserEvent=r}}var Pl=class extends xr{constructor(t){let e;if(super(t=t||{}),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==t.features?t.features:null,t.layers&&!this.features_)if("function"==typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=l;this.layerFilter_=e,this.filter_=t.filter&&!this.features_?t.filter:l,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.condition_=t.condition?t.condition:Cr,this.lastFeature_=null,this.addChangeListener(mr,this.handleActiveChanged_)}handleDownEvent(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);const e=this.features_||new j([this.lastFeature_]);return this.dispatchEvent(new Il(Al,e,t.coordinate,this.startCoordinate_,t)),!0}return!1}handleUpEvent(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);const e=this.features_||new j([this.lastFeature_]);return this.dispatchEvent(new Il(kl,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1}handleDragEvent(t){if(this.lastCoordinate_){const e=t.coordinate,n=e[0]-this.lastCoordinate_[0],i=e[1]-this.lastCoordinate_[1],r=this.features_||new j([this.lastFeature_]);r.forEach((function(t){const e=t.getGeometry();e.translate(n,i),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new Il(Rl,r,e,this.startCoordinate_,t))}}handleMoveEvent(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||this.features_.getArray().includes(t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const e=this.getMap();super.setMap(t),this.updateState_(e)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let e=this.getMap();const n=this.getActive();if((!e||!n)&&(e=e||t,e)){e.getViewport().classList.remove("ol-grab","ol-grabbing")}}},Fl=function(t,e){return Fl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Fl(t,e)};function Dl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Fl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ll=function(){return Ll=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ll.apply(this,arguments)};function Ol(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function Nl(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zl=t=>e=>"function"==typeof e?((t,e)=>(customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:n,elements:i}=e;return{kind:n,elements:i,finisher(e){customElements.define(t,e)}}})(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Gl=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}};function Bl(t){return(e,n)=>void 0!==n?((t,e,n)=>{e.constructor.createProperty(n,t)})(t,e,n):Gl(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function Ul(t){return Bl({...t,state:!0})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jl=({finisher:t,descriptor:e})=>(n,i)=>{var r;if(void 0===i){const i=null!==(r=n.originalKey)&&void 0!==r?r:n.key,o=null!=e?{kind:"method",placement:"prototype",key:i,descriptor:e(n.key)}:{...n,key:i};return null!=t&&(o.finisher=function(e){t(e,i)}),o}{const r=n.constructor;void 0!==e&&Object.defineProperty(n,i,e(i)),null==t||t(r,i)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;function $l(t,e){return jl({descriptor:n=>{const i={get(){var e,n;return null!==(n=null===(e=this.renderRoot)||void 0===e?void 0:e.querySelector(t))&&void 0!==n?n:null},enumerable:!0,configurable:!0};if(e){const e="symbol"==typeof n?Symbol():"__"+n;i.get=function(){var n,i;return void 0===this[e]&&(this[e]=null!==(i=null===(n=this.renderRoot)||void 0===n?void 0:n.querySelector(t))&&void 0!==i?i:null),this[e]}}return i}})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Hl;function Wl(t,e,n){if(void 0!==e)
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
return function(t,e,n){const i=t.constructor;if(!n){const t=`__${e}`;if(!(n=i.getPropertyDescriptor(e,t)))throw new Error("@ariaProperty must be used after a @property decorator")}const r=n;let o="";if(!r.set)throw new Error(`@ariaProperty requires a setter for ${e}`);if(t.dispatchWizEvent)return n;const s={configurable:!0,enumerable:!0,set(t){if(""===o){const t=i.getPropertyOptions(e);o="string"==typeof t.attribute?t.attribute:e}this.hasAttribute(o)&&this.removeAttribute(o),r.set.call(this,t)}};return r.get&&(s.get=function(){return r.get.call(this)}),s}(t,e,n);throw new Error("@ariaProperty only supports TypeScript Decorators")}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */null===(Hl=window.HTMLSlotElement)||void 0===Hl||Hl.prototype.assignedElements;const Xl=window,Yl=Xl.ShadowRoot&&(void 0===Xl.ShadyCSS||Xl.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Vl=Symbol(),ql=new WeakMap;let Kl=class{constructor(t,e,n){if(this._$cssResult$=!0,n!==Vl)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(Yl&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=ql.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&ql.set(e,t))}return t}toString(){return this.cssText}};const Zl=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,i)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[i+1]),t[0]);return new Kl(n,t,Vl)},Jl=Yl?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return(t=>new Kl("string"==typeof t?t:t+"",void 0,Vl))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var Ql;const tc=window,ec=tc.trustedTypes,nc=ec?ec.emptyScript:"",ic=tc.reactiveElementPolyfillSupport,rc={toAttribute(t,e){switch(e){case Boolean:t=t?nc:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},oc=(t,e)=>e!==t&&(e==e||t==t),sc={attribute:!0,type:String,converter:rc,reflect:!1,hasChanged:oc};let ac=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;null!==(e=this.h)&&void 0!==e||(this.h=[]),this.h.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,n)=>{const i=this._$Ep(n,e);void 0!==i&&(this._$Ev.set(i,n),t.push(i))})),t}static createProperty(t,e=sc){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const n="symbol"==typeof t?Symbol():"__"+t,i=this.getPropertyDescriptor(t,n,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(i){const r=this[t];this[e]=i,this.requestUpdate(t,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||sc}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of e)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(Jl(t))}else void 0!==t&&e.push(Jl(t));return e}static _$Ep(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,n;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(n=t.hostConnected)||void 0===n||n.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{Yl?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const n=document.createElement("style"),i=Xl.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=e.cssText,t.appendChild(n)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EO(t,e,n=sc){var i;const r=this.constructor._$Ep(t,n);if(void 0!==r&&!0===n.reflect){const o=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:rc).toAttribute(e,n.type);this._$El=t,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(t,e){var n;const i=this.constructor,r=i._$Ev.get(t);if(void 0!==r&&this._$El!==r){const t=i.getPropertyOptions(r),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(n=t.converter)||void 0===n?void 0:n.fromAttribute)?t.converter:rc;this._$El=r,this[r]=o.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,n){let i=!0;void 0!==t&&(((n=n||this.constructor.getPropertyOptions(t)).hasChanged||oc)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(n)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(n)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var lc;ac.finalized=!0,ac.elementProperties=new Map,ac.elementStyles=[],ac.shadowRootOptions={mode:"open"},null==ic||ic({ReactiveElement:ac}),(null!==(Ql=tc.reactiveElementVersions)&&void 0!==Ql?Ql:tc.reactiveElementVersions=[]).push("1.4.1");const cc=window,hc=cc.trustedTypes,uc=hc?hc.createPolicy("lit-html",{createHTML:t=>t}):void 0,dc=`lit$${(Math.random()+"").slice(9)}$`,fc="?"+dc,pc=`<${fc}>`,gc=document,mc=(t="")=>gc.createComment(t),_c=t=>null===t||"object"!=typeof t&&"function"!=typeof t,vc=Array.isArray,yc=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,bc=/-->/g,xc=/>/g,wc=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),Sc=/'/g,Tc=/"/g,Cc=/^(?:script|style|textarea|title)$/i,Ec=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),Mc=Symbol.for("lit-noChange"),Ac=Symbol.for("lit-nothing"),Rc=new WeakMap,kc=gc.createTreeWalker(gc,129,null,!1),Ic=(t,e)=>{const n=t.length-1,i=[];let r,o=2===e?"<svg>":"",s=yc;for(let e=0;e<n;e++){const n=t[e];let a,l,c=-1,h=0;for(;h<n.length&&(s.lastIndex=h,l=s.exec(n),null!==l);)h=s.lastIndex,s===yc?"!--"===l[1]?s=bc:void 0!==l[1]?s=xc:void 0!==l[2]?(Cc.test(l[2])&&(r=RegExp("</"+l[2],"g")),s=wc):void 0!==l[3]&&(s=wc):s===wc?">"===l[0]?(s=null!=r?r:yc,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?wc:'"'===l[3]?Tc:Sc):s===Tc||s===Sc?s=wc:s===bc||s===xc?s=yc:(s=wc,r=void 0);const u=s===wc&&t[e+1].startsWith("/>")?" ":"";o+=s===yc?n+pc:c>=0?(i.push(a),n.slice(0,c)+"$lit$"+n.slice(c)+dc+u):n+dc+(-2===c?(i.push(void 0),e):u)}const a=o+(t[n]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==uc?uc.createHTML(a):a,i]};let Pc=class{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let r=0,o=0;const s=t.length-1,a=this.parts,[l,c]=Ic(t,e);if(this.el=Pc.createElement(l,n),kc.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(i=kc.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes()){const t=[];for(const e of i.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(dc)){const n=c[o++];if(t.push(e),void 0!==n){const t=i.getAttribute(n.toLowerCase()+"$lit$").split(dc),e=/([.?@])?(.*)/.exec(n);a.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?Nc:"?"===e[1]?Gc:"@"===e[1]?Bc:Oc})}else a.push({type:6,index:r})}for(const e of t)i.removeAttribute(e)}if(Cc.test(i.tagName)){const t=i.textContent.split(dc),e=t.length-1;if(e>0){i.textContent=hc?hc.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],mc()),kc.nextNode(),a.push({type:2,index:++r});i.append(t[e],mc())}}}else if(8===i.nodeType)if(i.data===fc)a.push({type:2,index:r});else{let t=-1;for(;-1!==(t=i.data.indexOf(dc,t+1));)a.push({type:7,index:r}),t+=dc.length-1}r++}}static createElement(t,e){const n=gc.createElement("template");return n.innerHTML=t,n}};function Fc(t,e,n=t,i){var r,o,s,a;if(e===Mc)return e;let l=void 0!==i?null===(r=n._$Co)||void 0===r?void 0:r[i]:n._$Cl;const c=_c(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,n,i)),void 0!==i?(null!==(s=(a=n)._$Co)&&void 0!==s?s:a._$Co=[])[i]=l:n._$Cl=l),void 0!==l&&(e=Fc(t,l._$AS(t,e.values),l,i)),e}class Dc{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:n},parts:i}=this._$AD,r=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:gc).importNode(n,!0);kc.currentNode=r;let o=kc.nextNode(),s=0,a=0,l=i[0];for(;void 0!==l;){if(s===l.index){let e;2===l.type?e=new Lc(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new Uc(o,this,t)),this.u.push(e),l=i[++a]}s!==(null==l?void 0:l.index)&&(o=kc.nextNode(),s++)}return r}p(t){let e=0;for(const n of this.u)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class Lc{constructor(t,e,n,i){var r;this.type=2,this._$AH=Ac,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cm=null===(r=null==i?void 0:i.isConnected)||void 0===r||r}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Fc(this,t,e),_c(t)?t===Ac||null==t||""===t?(this._$AH!==Ac&&this._$AR(),this._$AH=Ac):t!==this._$AH&&t!==Mc&&this.g(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>vc(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==Ac&&_c(this._$AH)?this._$AA.nextSibling.data=t:this.T(gc.createTextNode(t)),this._$AH=t}$(t){var e;const{values:n,_$litType$:i}=t,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=Pc.createElement(i.h,this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.p(n);else{const t=new Dc(r,this),e=t.v(this.options);t.p(n),this.T(e),this._$AH=t}}_$AC(t){let e=Rc.get(t.strings);return void 0===e&&Rc.set(t.strings,e=new Pc(t)),e}k(t){vc(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const r of t)i===e.length?e.push(n=new Lc(this.O(mc()),this.O(mc()),this,this.options)):n=e[i],n._$AI(r),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cm=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Oc{constructor(t,e,n,i,r){this.type=1,this._$AH=Ac,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Ac}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,i){const r=this.strings;let o=!1;if(void 0===r)t=Fc(this,t,e,0),o=!_c(t)||t!==this._$AH&&t!==Mc,o&&(this._$AH=t);else{const i=t;let s,a;for(t=r[0],s=0;s<r.length-1;s++)a=Fc(this,i[n+s],e,s),a===Mc&&(a=this._$AH[s]),o||(o=!_c(a)||a!==this._$AH[s]),a===Ac?t=Ac:t!==Ac&&(t+=(null!=a?a:"")+r[s+1]),this._$AH[s]=a}o&&!i&&this.j(t)}j(t){t===Ac?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}let Nc=class extends Oc{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Ac?void 0:t}};const zc=hc?hc.emptyScript:"";let Gc=class extends Oc{constructor(){super(...arguments),this.type=4}j(t){t&&t!==Ac?this.element.setAttribute(this.name,zc):this.element.removeAttribute(this.name)}};class Bc extends Oc{constructor(t,e,n,i,r){super(t,e,n,i,r),this.type=5}_$AI(t,e=this){var n;if((t=null!==(n=Fc(this,t,e,0))&&void 0!==n?n:Ac)===Mc)return;const i=this._$AH,r=t===Ac&&i!==Ac||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,o=t!==Ac&&(i===Ac||r);r&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==n?n:this.element,t):this._$AH.handleEvent(t)}}class Uc{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Fc(this,t)}}const jc=cc.litHtmlPolyfillSupport;null==jc||jc(Pc,Lc),(null!==(lc=cc.litHtmlVersions)&&void 0!==lc?lc:cc.litHtmlVersions=[]).push("2.4.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var $c,Hc;let Wc=class extends ac{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const n=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=n.firstChild),n}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{var i,r;const o=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:e;let s=o._$litPart$;if(void 0===s){const t=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null;o._$litPart$=s=new Lc(e.insertBefore(mc(),t),t,void 0,null!=n?n:{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return Mc}};Wc.finalized=!0,Wc._$litElement$=!0,null===($c=globalThis.litElementHydrateSupport)||void 0===$c||$c.call(globalThis,{LitElement:Wc});const Xc=globalThis.litElementPolyfillSupport;null==Xc||Xc({LitElement:Wc}),(null!==(Hc=globalThis.litElementVersions)&&void 0!==Hc?Hc:globalThis.litElementVersions=[]).push("3.2.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Yc=1,Vc=t=>(...e)=>({_$litDirective$:t,values:e});let qc=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Kc=Vc(class extends qc{constructor(t){var e;if(super(t),t.type!==Yc||"class"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var n,i;if(void 0===this.nt){this.nt=new Set,void 0!==t.strings&&(this.st=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!(null===(n=this.st)||void 0===n?void 0:n.has(t))&&this.nt.add(t);return this.render(e)}const r=t.element.classList;this.nt.forEach((t=>{t in e||(r.remove(t),this.nt.delete(t))}));for(const t in e){const n=!!e[t];n===this.nt.has(t)||(null===(i=this.st)||void 0===i?void 0:i.has(t))||(n?(r.add(t),this.nt.add(t)):(r.remove(t),this.nt.delete(t)))}return Mc}}),Zc=t=>null!=t?t:Ac
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Jc=Vc(class extends qc{constructor(t){var e;if(super(t),t.type!==Yc||"style"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,n)=>{const i=t[n];return null==i?e:e+`${n=n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(t,[e]){const{style:n}=t.element;if(void 0===this.vt){this.vt=new Set;for(const t in e)this.vt.add(t);return this.render(e)}this.vt.forEach((t=>{null==e[t]&&(this.vt.delete(t),t.includes("-")?n.removeProperty(t):n[t]="")}));for(const t in e){const i=e[t];null!=i&&(this.vt.add(t),t.includes("-")?n.setProperty(t,i):n[t]=i)}return Mc}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Qc extends Wc{constructor(){super(...arguments),this.indeterminate=!1,this.progress=0,this.density=0,this.closed=!1}open(){this.closed=!1}close(){this.closed=!0}render(){const t={"mdc-circular-progress--closed":this.closed,"mdc-circular-progress--indeterminate":this.indeterminate},e=48+4*this.density,n={width:`${e}px`,height:`${e}px`};return Ec`
      <div
        class="mdc-circular-progress ${Kc(t)}"
        style="${Jc(n)}"
        role="progressbar"
        aria-label="${Zc(this.ariaLabel)}"
        aria-valuemin="0"
        aria-valuemax="1"
        aria-valuenow="${Zc(this.indeterminate?void 0:this.progress)}">
        ${this.renderDeterminateContainer()}
        ${this.renderIndeterminateContainer()}
      </div>`}renderDeterminateContainer(){const t=48+4*this.density,e=t/2,n=this.density>=-3?18+11*this.density/6:12.5+5*(this.density+3)/4,i=6.2831852*n,r=(1-this.progress)*i,o=this.density>=-3?4+this.density*(1/3):3+(this.density+3)*(1/6);return Ec`
      <div class="mdc-circular-progress__determinate-container">
        <svg class="mdc-circular-progress__determinate-circle-graphic"
             viewBox="0 0 ${t} ${t}">
          <circle class="mdc-circular-progress__determinate-track"
                  cx="${e}" cy="${e}" r="${n}"
                  stroke-width="${o}"></circle>
          <circle class="mdc-circular-progress__determinate-circle"
                  cx="${e}" cy="${e}" r="${n}"
                  stroke-dasharray="${6.2831852*n}"
                  stroke-dashoffset="${r}"
                  stroke-width="${o}"></circle>
        </svg>
      </div>`}renderIndeterminateContainer(){return Ec`
      <div class="mdc-circular-progress__indeterminate-container">
        <div class="mdc-circular-progress__spinner-layer">
          ${this.renderIndeterminateSpinnerLayer()}
        </div>
      </div>`}renderIndeterminateSpinnerLayer(){const t=48+4*this.density,e=t/2,n=this.density>=-3?18+11*this.density/6:12.5+5*(this.density+3)/4,i=6.2831852*n,r=.5*i,o=this.density>=-3?4+this.density*(1/3):3+(this.density+3)*(1/6);return Ec`
        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left">
          <svg class="mdc-circular-progress__indeterminate-circle-graphic"
               viewBox="0 0 ${t} ${t}">
            <circle cx="${e}" cy="${e}" r="${n}"
                    stroke-dasharray="${i}"
                    stroke-dashoffset="${r}"
                    stroke-width="${o}"></circle>
          </svg>
        </div>
        <div class="mdc-circular-progress__gap-patch">
          <svg class="mdc-circular-progress__indeterminate-circle-graphic"
               viewBox="0 0 ${t} ${t}">
            <circle cx="${e}" cy="${e}" r="${n}"
                    stroke-dasharray="${i}"
                    stroke-dashoffset="${r}"
                    stroke-width="${.8*o}"></circle>
          </svg>
        </div>
        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right">
          <svg class="mdc-circular-progress__indeterminate-circle-graphic"
               viewBox="0 0 ${t} ${t}">
            <circle cx="${e}" cy="${e}" r="${n}"
                    stroke-dasharray="${i}"
                    stroke-dashoffset="${r}"
                    stroke-width="${o}"></circle>
          </svg>
        </div>`}update(t){super.update(t),t.has("progress")&&(this.progress>1&&(this.progress=1),this.progress<0&&(this.progress=0))}}Ol([Bl({type:Boolean,reflect:!0})],Qc.prototype,"indeterminate",void 0),Ol([Bl({type:Number,reflect:!0})],Qc.prototype,"progress",void 0),Ol([Bl({type:Number,reflect:!0})],Qc.prototype,"density",void 0),Ol([Bl({type:Boolean,reflect:!0})],Qc.prototype,"closed",void 0),Ol([Wl,Bl({type:String,attribute:"aria-label"})],Qc.prototype,"ariaLabel",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */
const th=Zl`.mdc-circular-progress__determinate-circle,.mdc-circular-progress__indeterminate-circle-graphic{stroke:#6200ee;stroke:var(--mdc-theme-primary, #6200ee)}.mdc-circular-progress__determinate-track{stroke:transparent}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:transparent}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}:host{display:inline-flex}.mdc-circular-progress__determinate-track{stroke:transparent;stroke:var(--mdc-circular-progress-track-color, transparent)}`
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let eh=class extends Qc{};eh.styles=[th],eh=Ol([zl("mwc-circular-progress")],eh);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */
const nh=Zl`.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{height:4px;position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{border-radius:3px;height:6px;overflow:hidden;top:-1px}.mdc-slider .mdc-slider__track--active_fill{border-top:6px solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{border-radius:2px;height:4px;left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__track--active_fill{border-color:#6200ee;border-color:var(--mdc-theme-primary, #6200ee)}.mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:#000;border-color:var(--mdc-theme-on-surface, #000)}.mdc-slider .mdc-slider__track--inactive{background-color:#6200ee;background-color:var(--mdc-theme-primary, #6200ee);opacity:.24}.mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:#000;background-color:var(--mdc-theme-on-surface, #000);opacity:.24}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:50%;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:translateX(-50%);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:translateX(-50%);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__value-indicator-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-subtitle2-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-subtitle2-font-size, 0.875rem);line-height:1.375rem;line-height:var(--mdc-typography-subtitle2-line-height, 1.375rem);font-weight:500;font-weight:var(--mdc-typography-subtitle2-font-weight, 500);letter-spacing:0.0071428571em;letter-spacing:var(--mdc-typography-subtitle2-letter-spacing, 0.0071428571em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle2-text-decoration, inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle2-text-transform, inherit)}.mdc-slider .mdc-slider__value-indicator{background-color:#000;opacity:.6}.mdc-slider .mdc-slider__value-indicator::before{border-top-color:#000}.mdc-slider .mdc-slider__value-indicator{color:#fff;color:var(--mdc-theme-on-primary, #fff)}.mdc-slider .mdc-slider__thumb{display:flex;height:48px;left:-24px;outline:none;position:absolute;user-select:none;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-shadow:0px 2px 1px -1px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 1px 3px 0px rgba(0,0,0,.12);border:10px solid;border-radius:50%;box-sizing:border-box;height:20px;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);width:20px}.mdc-slider .mdc-slider__thumb-knob{background-color:#6200ee;background-color:var(--mdc-theme-primary, #6200ee);border-color:#6200ee;border-color:var(--mdc-theme-primary, #6200ee)}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:#000;background-color:var(--mdc-theme-on-surface, #000);border-color:#000;border-color:var(--mdc-theme-on-surface, #000)}.mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mdc-slider .mdc-slider__thumb::before,.mdc-slider .mdc-slider__thumb::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-slider .mdc-slider__thumb:hover::before,.mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider .mdc-slider__tick-mark--active,.mdc-slider .mdc-slider__tick-mark--inactive{border-radius:50%;height:2px;width:2px}.mdc-slider .mdc-slider__tick-mark--active{background-color:#fff;background-color:var(--mdc-theme-on-primary, #fff);opacity:.6}.mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:#fff;background-color:var(--mdc-theme-on-primary, #fff);opacity:.6}.mdc-slider .mdc-slider__tick-mark--inactive{background-color:#6200ee;background-color:var(--mdc-theme-primary, #6200ee);opacity:.6}.mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:#000;background-color:var(--mdc-theme-on-surface, #000);opacity:.6}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{opacity:.38;cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:0;margin:0;height:100%;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}:host{outline:none;display:block;-webkit-tap-highlight-color:transparent}.ripple{--mdc-ripple-color:#6200ee;--mdc-ripple-color:var(--mdc-theme-primary, #6200ee)}`
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */;
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const ih=()=>{},rh={get passive(){return!1}};document.addEventListener("x",ih,rh),document.removeEventListener("x",ih);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class oh extends Wc{click(){if(this.mdcRoot)return this.mdcRoot.focus(),void this.mdcRoot.click();super.click()}createFoundation(){void 0!==this.mdcFoundation&&this.mdcFoundation.destroy(),this.mdcFoundationClass&&(this.mdcFoundation=new this.mdcFoundationClass(this.createAdapter()),this.mdcFoundation.init())}firstUpdated(){this.createFoundation()}}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sh=function(){function t(t){void 0===t&&(t={}),this.adapter=t}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}(),ah={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},lh={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},ch={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var hh=["touchstart","pointerdown","mousedown","keydown"],uh=["touchend","pointerup","mouseup","contextmenu"],dh=[],fh=function(t){function e(n){var i=t.call(this,Ll(Ll({},e.defaultAdapter),n))||this;return i.activationAnimationHasEnded=!1,i.activationTimer=0,i.fgDeactivationRemovalTimer=0,i.fgScale="0",i.frame={width:0,height:0},i.initialSize=0,i.layoutFrame=0,i.maxRadius=0,i.unboundedCoords={left:0,top:0},i.activationState=i.defaultActivationState(),i.activationTimerCallback=function(){i.activationAnimationHasEnded=!0,i.runDeactivationUXLogicIfReady()},i.activateHandler=function(t){i.activateImpl(t)},i.deactivateHandler=function(){i.deactivateImpl()},i.focusHandler=function(){i.handleFocus()},i.blurHandler=function(){i.handleBlur()},i.resizeHandler=function(){i.layout()},i}return Dl(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return ah},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return lh},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return ch},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this,n=this.supportsPressRipple();if(this.registerRootHandlers(n),n){var i=e.cssClasses,r=i.ROOT,o=i.UNBOUNDED;requestAnimationFrame((function(){t.adapter.addClass(r),t.adapter.isUnbounded()&&(t.adapter.addClass(o),t.layoutInternal())}))}},e.prototype.destroy=function(){var t=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var n=e.cssClasses,i=n.ROOT,r=n.UNBOUNDED;requestAnimationFrame((function(){t.adapter.removeClass(i),t.adapter.removeClass(r),t.removeCssVars()}))}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(t){this.activateImpl(t)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var t=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame((function(){t.layoutInternal(),t.layoutFrame=0}))},e.prototype.setUnbounded=function(t){var n=e.cssClasses.UNBOUNDED;t?this.adapter.addClass(n):this.adapter.removeClass(n)},e.prototype.handleFocus=function(){var t=this;requestAnimationFrame((function(){return t.adapter.addClass(e.cssClasses.BG_FOCUSED)}))},e.prototype.handleBlur=function(){var t=this;requestAnimationFrame((function(){return t.adapter.removeClass(e.cssClasses.BG_FOCUSED)}))},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(t){var e,n;if(t){try{for(var i=Nl(hh),r=i.next();!r.done;r=i.next()){var o=r.value;this.adapter.registerInteractionHandler(o,this.activateHandler)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(t){var e,n;if("keydown"===t.type)this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var i=Nl(uh),r=i.next();!r.done;r=i.next()){var o=r.value;this.adapter.registerDocumentInteractionHandler(o,this.deactivateHandler)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},e.prototype.deregisterRootHandlers=function(){var t,e;try{for(var n=Nl(hh),i=n.next();!i.done;i=n.next()){var r=i.value;this.adapter.deregisterInteractionHandler(r,this.activateHandler)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var t,e;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var n=Nl(uh),i=n.next();!i.done;i=n.next()){var r=i.value;this.adapter.deregisterDocumentInteractionHandler(r,this.deactivateHandler)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.removeCssVars=function(){var t=this,n=e.strings;Object.keys(n).forEach((function(e){0===e.indexOf("VAR_")&&t.adapter.updateCssVariable(n[e],null)}))},e.prototype.activateImpl=function(t){var e=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState;if(!n.isActivated){var i=this.previousActivationEvent;if(!(i&&void 0!==t&&i.type!==t.type))n.isActivated=!0,n.isProgrammatic=void 0===t,n.activationEvent=t,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==t&&("mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type)),void 0!==t&&dh.length>0&&dh.some((function(t){return e.adapter.containsEventTarget(t)}))?this.resetActivationState():(void 0!==t&&(dh.push(t.target),this.registerDeactivationHandlers(t)),n.wasElementMadeActive=this.checkElementMadeActive(t),n.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame((function(){dh=[],n.wasElementMadeActive||void 0===t||" "!==t.key&&32!==t.keyCode||(n.wasElementMadeActive=e.checkElementMadeActive(t),n.wasElementMadeActive&&e.animateActivation()),n.wasElementMadeActive||(e.activationState=e.defaultActivationState())})))}}},e.prototype.checkElementMadeActive=function(t){return void 0===t||"keydown"!==t.type||this.adapter.isSurfaceActive()},e.prototype.animateActivation=function(){var t=this,n=e.strings,i=n.VAR_FG_TRANSLATE_START,r=n.VAR_FG_TRANSLATE_END,o=e.cssClasses,s=o.FG_DEACTIVATION,a=o.FG_ACTIVATION,l=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var c="",h="";if(!this.adapter.isUnbounded()){var u=this.getFgTranslationCoordinates(),d=u.startPoint,f=u.endPoint;c=d.x+"px, "+d.y+"px",h=f.x+"px, "+f.y+"px"}this.adapter.updateCssVariable(i,c),this.adapter.updateCssVariable(r,h),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(s),this.adapter.computeBoundingRect(),this.adapter.addClass(a),this.activationTimer=setTimeout((function(){t.activationTimerCallback()}),l)},e.prototype.getFgTranslationCoordinates=function(){var t,e=this.activationState,n=e.activationEvent;return t=e.wasActivatedByPointer?function(t,e,n){if(!t)return{x:0,y:0};var i,r,o=e.x,s=e.y,a=o+n.left,l=s+n.top;if("touchstart"===t.type){var c=t;i=c.changedTouches[0].pageX-a,r=c.changedTouches[0].pageY-l}else{var h=t;i=h.pageX-a,r=h.pageY-l}return{x:i,y:r}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame.width/2,y:this.frame.height/2},{startPoint:t={x:t.x-this.initialSize/2,y:t.y-this.initialSize/2},endPoint:{x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2}}},e.prototype.runDeactivationUXLogicIfReady=function(){var t=this,n=e.cssClasses.FG_DEACTIVATION,i=this.activationState,r=i.hasDeactivationUXRun,o=i.isActivated;(r||!o)&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer=setTimeout((function(){t.adapter.removeClass(n)}),ch.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(t),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var t=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout((function(){return t.previousActivationEvent=void 0}),e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var t=this,e=this.activationState;if(e.isActivated){var n=Ll({},e);e.isProgrammatic?(requestAnimationFrame((function(){t.animateDeactivation(n)})),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame((function(){t.activationState.hasDeactivationUXRun=!0,t.animateDeactivation(n),t.resetActivationState()})))}},e.prototype.animateDeactivation=function(t){var e=t.wasActivatedByPointer,n=t.wasElementMadeActive;(e||n)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var t=this;this.frame=this.adapter.computeBoundingRect();var n=Math.max(this.frame.height,this.frame.width);this.maxRadius=this.adapter.isUnbounded()?n:Math.sqrt(Math.pow(t.frame.width,2)+Math.pow(t.frame.height,2))+e.numbers.PADDING;var i=Math.floor(n*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&i%2!=0?this.initialSize=i-1:this.initialSize=i,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var t=e.strings,n=t.VAR_FG_SIZE,i=t.VAR_LEFT,r=t.VAR_TOP,o=t.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize+"px"),this.adapter.updateCssVariable(o,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(i,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(r,this.unboundedCoords.top+"px"))},e}(sh),ph=fh;
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class gh extends oh{constructor(){super(...arguments),this.primary=!1,this.accent=!1,this.unbounded=!1,this.disabled=!1,this.activated=!1,this.selected=!1,this.internalUseStateLayerCustomProperties=!1,this.hovering=!1,this.bgFocused=!1,this.fgActivation=!1,this.fgDeactivation=!1,this.fgScale="",this.fgSize="",this.translateStart="",this.translateEnd="",this.leftPos="",this.topPos="",this.mdcFoundationClass=ph}get isActive(){return function(t,e){return(t.matches||t.webkitMatchesSelector||t.msMatchesSelector).call(t,e)}(this.parentElement||this,":active")}createAdapter(){return{browserSupportsCssVars:()=>!0,isUnbounded:()=>this.unbounded,isSurfaceActive:()=>this.isActive,isSurfaceDisabled:()=>this.disabled,addClass:t=>{switch(t){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!0;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!0;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!0}},removeClass:t=>{switch(t){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!1;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!1;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!1}},containsEventTarget:()=>!0,registerInteractionHandler:()=>{},deregisterInteractionHandler:()=>{},registerDocumentInteractionHandler:()=>{},deregisterDocumentInteractionHandler:()=>{},registerResizeHandler:()=>{},deregisterResizeHandler:()=>{},updateCssVariable:(t,e)=>{switch(t){case"--mdc-ripple-fg-scale":this.fgScale=e;break;case"--mdc-ripple-fg-size":this.fgSize=e;break;case"--mdc-ripple-fg-translate-end":this.translateEnd=e;break;case"--mdc-ripple-fg-translate-start":this.translateStart=e;break;case"--mdc-ripple-left":this.leftPos=e;break;case"--mdc-ripple-top":this.topPos=e}},computeBoundingRect:()=>(this.parentElement||this).getBoundingClientRect(),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset})}}startPress(t){this.waitForFoundation((()=>{this.mdcFoundation.activate(t)}))}endPress(){this.waitForFoundation((()=>{this.mdcFoundation.deactivate()}))}startFocus(){this.waitForFoundation((()=>{this.mdcFoundation.handleFocus()}))}endFocus(){this.waitForFoundation((()=>{this.mdcFoundation.handleBlur()}))}startHover(){this.hovering=!0}endHover(){this.hovering=!1}waitForFoundation(t){this.mdcFoundation?t():this.updateComplete.then(t)}update(t){t.has("disabled")&&this.disabled&&this.endHover(),super.update(t)}render(){const t=this.activated&&(this.primary||!this.accent),e=this.selected&&(this.primary||!this.accent),n={"mdc-ripple-surface--accent":this.accent,"mdc-ripple-surface--primary--activated":t,"mdc-ripple-surface--accent--activated":this.accent&&this.activated,"mdc-ripple-surface--primary--selected":e,"mdc-ripple-surface--accent--selected":this.accent&&this.selected,"mdc-ripple-surface--disabled":this.disabled,"mdc-ripple-surface--hover":this.hovering,"mdc-ripple-surface--primary":this.primary,"mdc-ripple-surface--selected":this.selected,"mdc-ripple-upgraded--background-focused":this.bgFocused,"mdc-ripple-upgraded--foreground-activation":this.fgActivation,"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation,"mdc-ripple-upgraded--unbounded":this.unbounded,"mdc-ripple-surface--internal-use-state-layer-custom-properties":this.internalUseStateLayerCustomProperties};return Ec`
        <div class="mdc-ripple-surface mdc-ripple-upgraded ${Kc(n)}"
          style="${Jc({"--mdc-ripple-fg-scale":this.fgScale,"--mdc-ripple-fg-size":this.fgSize,"--mdc-ripple-fg-translate-end":this.translateEnd,"--mdc-ripple-fg-translate-start":this.translateStart,"--mdc-ripple-left":this.leftPos,"--mdc-ripple-top":this.topPos})}"></div>`}}Ol([$l(".mdc-ripple-surface")],gh.prototype,"mdcRoot",void 0),Ol([Bl({type:Boolean})],gh.prototype,"primary",void 0),Ol([Bl({type:Boolean})],gh.prototype,"accent",void 0),Ol([Bl({type:Boolean})],gh.prototype,"unbounded",void 0),Ol([Bl({type:Boolean})],gh.prototype,"disabled",void 0),Ol([Bl({type:Boolean})],gh.prototype,"activated",void 0),Ol([Bl({type:Boolean})],gh.prototype,"selected",void 0),Ol([Bl({type:Boolean})],gh.prototype,"internalUseStateLayerCustomProperties",void 0),Ol([Ul()],gh.prototype,"hovering",void 0),Ol([Ul()],gh.prototype,"bgFocused",void 0),Ol([Ul()],gh.prototype,"fgActivation",void 0),Ol([Ul()],gh.prototype,"fgDeactivation",void 0),Ol([Ul()],gh.prototype,"fgScale",void 0),Ol([Ul()],gh.prototype,"fgSize",void 0),Ol([Ul()],gh.prototype,"translateStart",void 0),Ol([Ul()],gh.prototype,"translateEnd",void 0),Ol([Ul()],gh.prototype,"leftPos",void 0),Ol([Ul()],gh.prototype,"topPos",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-LIcense-Identifier: Apache-2.0
 */
const mh=Zl`.mdc-ripple-surface{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0);will-change:transform,opacity;position:relative;outline:none;overflow:hidden}.mdc-ripple-surface::before,.mdc-ripple-surface::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-ripple-surface::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index, 1)}.mdc-ripple-surface::after{z-index:0;z-index:var(--mdc-ripple-z-index, 0)}.mdc-ripple-surface.mdc-ripple-upgraded::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-ripple-surface.mdc-ripple-upgraded::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-ripple-surface.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-activation::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-deactivation::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-ripple-surface::before,.mdc-ripple-surface::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-ripple-surface.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded],.mdc-ripple-upgraded--unbounded{overflow:visible}.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::before,.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::after,.mdc-ripple-upgraded--unbounded::before,.mdc-ripple-upgraded--unbounded::after{top:calc(50% - 50%);left:calc(50% - 50%);width:100%;height:100%}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::before,.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::before,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{top:var(--mdc-ripple-top, calc(50% - 50%));left:var(--mdc-ripple-left, calc(50% - 50%));width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-ripple-surface::before,.mdc-ripple-surface::after{background-color:#000;background-color:var(--mdc-ripple-color, #000)}.mdc-ripple-surface:hover::before,.mdc-ripple-surface.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}:host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:block}:host .mdc-ripple-surface{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;will-change:unset}.mdc-ripple-surface--primary::before,.mdc-ripple-surface--primary::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary:hover::before,.mdc-ripple-surface--primary.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface--primary.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before{opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before,.mdc-ripple-surface--primary--activated::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary--activated:hover::before,.mdc-ripple-surface--primary--activated.mdc-ripple-surface--hover::before{opacity:0.16;opacity:var(--mdc-ripple-hover-opacity, 0.16)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--selected::before{opacity:0.08;opacity:var(--mdc-ripple-selected-opacity, 0.08)}.mdc-ripple-surface--primary--selected::before,.mdc-ripple-surface--primary--selected::after{background-color:#6200ee;background-color:var(--mdc-ripple-color, var(--mdc-theme-primary, #6200ee))}.mdc-ripple-surface--primary--selected:hover::before,.mdc-ripple-surface--primary--selected.mdc-ripple-surface--hover::before{opacity:0.12;opacity:var(--mdc-ripple-hover-opacity, 0.12)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-focus-opacity, 0.2)}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent::before,.mdc-ripple-surface--accent::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent:hover::before,.mdc-ripple-surface--accent.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mdc-ripple-surface--accent.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before{opacity:0.12;opacity:var(--mdc-ripple-activated-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before,.mdc-ripple-surface--accent--activated::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent--activated:hover::before,.mdc-ripple-surface--accent--activated.mdc-ripple-surface--hover::before{opacity:0.16;opacity:var(--mdc-ripple-hover-opacity, 0.16)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-focus-opacity, 0.24)}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.24;opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--selected::before{opacity:0.08;opacity:var(--mdc-ripple-selected-opacity, 0.08)}.mdc-ripple-surface--accent--selected::before,.mdc-ripple-surface--accent--selected::after{background-color:#018786;background-color:var(--mdc-ripple-color, var(--mdc-theme-secondary, #018786))}.mdc-ripple-surface--accent--selected:hover::before,.mdc-ripple-surface--accent--selected.mdc-ripple-surface--hover::before{opacity:0.12;opacity:var(--mdc-ripple-hover-opacity, 0.12)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-focus-opacity, 0.2)}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.2;opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--disabled{opacity:0}.mdc-ripple-surface--internal-use-state-layer-custom-properties::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties::after{background-color:#000;background-color:var(--mdc-ripple-hover-state-layer-color, #000)}.mdc-ripple-surface--internal-use-state-layer-custom-properties:hover::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-surface--hover::before{opacity:0.04;opacity:var(--mdc-ripple-hover-state-layer-opacity, 0.04)}.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-focus-state-layer-opacity, 0.12)}.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--internal-use-state-layer-custom-properties:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:0.12;opacity:var(--mdc-ripple-pressed-state-layer-opacity, 0.12)}.mdc-ripple-surface--internal-use-state-layer-custom-properties.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-pressed-state-layer-opacity, 0.12)}`
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let _h=class extends gh{};
/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var vh,yh,bh,xh;_h.styles=[mh],_h=Ol([zl("mwc-ripple")],_h),function(t){t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE"}(vh||(vh={})),function(t){t[t.START=1]="START",t[t.END=2]="END"}(yh||(yh={}));const wh=null!==(xh=null===(bh=window.ShadyDOM)||void 0===bh?void 0:bh.inUse)&&void 0!==xh&&xh;class Sh extends oh{constructor(){super(...arguments),this.disabled=!1,this.containingForm=null,this.formDataListener=t=>{this.disabled||this.setFormData(t.formData)}}findFormElement(){if(!this.shadowRoot||wh)return null;const t=this.getRootNode().querySelectorAll("form");for(const e of Array.from(t))if(e.contains(this))return e;return null}connectedCallback(){var t;super.connectedCallback(),this.containingForm=this.findFormElement(),null===(t=this.containingForm)||void 0===t||t.addEventListener("formdata",this.formDataListener)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this.containingForm)||void 0===t||t.removeEventListener("formdata",this.formDataListener),this.containingForm=null}click(){this.formElement&&!this.disabled&&(this.formElement.focus(),this.formElement.click())}firstUpdated(){super.firstUpdated(),this.shadowRoot&&this.mdcRoot.addEventListener("change",(t=>{this.dispatchEvent(new Event("change",t))}))}}Sh.shadowRootOptions={mode:"open",delegatesFocus:!0},Ol([Bl({type:Boolean})],Sh.prototype,"disabled",void 0);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Th{constructor(t){this.startPress=e=>{t().then((t=>{t&&t.startPress(e)}))},this.endPress=()=>{t().then((t=>{t&&t.endPress()}))},this.startFocus=()=>{t().then((t=>{t&&t.startFocus()}))},this.endFocus=()=>{t().then((t=>{t&&t.endFocus()}))},this.startHover=()=>{t().then((t=>{t&&t.startHover()}))},this.endHover=()=>{t().then((t=>{t&&t.endHover()}))}}}
/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ch=function(){function t(){this.rafIDs=new Map}return t.prototype.request=function(t,e){var n=this;this.cancel(t);var i=requestAnimationFrame((function(i){n.rafIDs.delete(t),e(i)}));this.rafIDs.set(t,i)},t.prototype.cancel=function(t){var e=this.rafIDs.get(t);e&&(cancelAnimationFrame(e),this.rafIDs.delete(t))},t.prototype.cancelAll=function(){var t=this;this.rafIDs.forEach((function(e,n){t.cancel(n)}))},t.prototype.getQueue=function(){var t=[];return this.rafIDs.forEach((function(e,n){t.push(n)})),t},t}(),Eh={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Mh(t,e){if(function(t){return Boolean(t.document)&&"function"==typeof t.document.createElement}(t)&&e in Eh){var n=t.document.createElement("div"),i=Eh[e],r=i.standard,o=i.prefixed;return r in n.style?r:o}return e}
/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ah,Rh="mdc-slider--disabled",kh="mdc-slider--discrete",Ih="mdc-slider--range",Ph="mdc-slider__thumb--focused",Fh="mdc-slider__thumb--top",Dh="mdc-slider__thumb--with-indicator",Lh="mdc-slider--tick-marks",Oh=1,Nh=0,zh=5,Gh="aria-valuetext",Bh="disabled",Uh="min",jh="max",$h="value",Hh="step",Wh="data-min-range",Xh="--slider-value-indicator-caret-left",Yh="--slider-value-indicator-caret-right",Vh="--slider-value-indicator-caret-transform",qh="--slider-value-indicator-container-left",Kh="--slider-value-indicator-container-right",Zh="--slider-value-indicator-container-transform";!function(t){t.SLIDER_UPDATE="slider_update"}(Ah||(Ah={}));var Jh="undefined"!=typeof window,Qh=function(t){function e(n){var i=t.call(this,Ll(Ll({},e.defaultAdapter),n))||this;return i.initialStylesRemoved=!1,i.isDisabled=!1,i.isDiscrete=!1,i.step=Oh,i.minRange=Nh,i.hasTickMarks=!1,i.isRange=!1,i.thumb=null,i.downEventClientX=null,i.startThumbKnobWidth=0,i.endThumbKnobWidth=0,i.animFrame=new Ch,i}return Dl(e,t),Object.defineProperty(e,"defaultAdapter",{get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},addThumbClass:function(){},removeThumbClass:function(){},getAttribute:function(){return null},getInputValue:function(){return""},setInputValue:function(){},getInputAttribute:function(){return null},setInputAttribute:function(){return null},removeInputAttribute:function(){return null},focusInput:function(){},isInputFocused:function(){return!1},shouldHideFocusStylesForPointerEvents:function(){return!1},getThumbKnobWidth:function(){return 0},getValueIndicatorContainerWidth:function(){return 0},getThumbBoundingClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getBoundingClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},isRTL:function(){return!1},setThumbStyleProperty:function(){},removeThumbStyleProperty:function(){},setTrackActiveStyleProperty:function(){},removeTrackActiveStyleProperty:function(){},setValueIndicatorText:function(){},getValueToAriaValueTextFn:function(){return null},updateTickMarks:function(){},setPointerCapture:function(){},emitChangeEvent:function(){},emitInputEvent:function(){},emitDragStartEvent:function(){},emitDragEndEvent:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){},registerThumbEventHandler:function(){},deregisterThumbEventHandler:function(){},registerInputEventHandler:function(){},deregisterInputEventHandler:function(){},registerBodyEventHandler:function(){},deregisterBodyEventHandler:function(){},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this;this.isDisabled=this.adapter.hasClass(Rh),this.isDiscrete=this.adapter.hasClass(kh),this.hasTickMarks=this.adapter.hasClass(Lh),this.isRange=this.adapter.hasClass(Ih);var e=this.convertAttributeValueToNumber(this.adapter.getInputAttribute(Uh,this.isRange?yh.START:yh.END),Uh),n=this.convertAttributeValueToNumber(this.adapter.getInputAttribute(jh,yh.END),jh),i=this.convertAttributeValueToNumber(this.adapter.getInputAttribute($h,yh.END),$h),r=this.isRange?this.convertAttributeValueToNumber(this.adapter.getInputAttribute($h,yh.START),$h):e,o=this.adapter.getInputAttribute(Hh,yh.END),s=o?this.convertAttributeValueToNumber(o,Hh):this.step,a=this.adapter.getAttribute(Wh),l=a?this.convertAttributeValueToNumber(a,Wh):this.minRange;this.validateProperties({min:e,max:n,value:i,valueStart:r,step:s,minRange:l}),this.min=e,this.max=n,this.value=i,this.valueStart=r,this.step=s,this.minRange=l,this.numDecimalPlaces=tu(this.step),this.valueBeforeDownEvent=i,this.valueStartBeforeDownEvent=r,this.mousedownOrTouchstartListener=this.handleMousedownOrTouchstart.bind(this),this.moveListener=this.handleMove.bind(this),this.pointerdownListener=this.handlePointerdown.bind(this),this.pointerupListener=this.handlePointerup.bind(this),this.thumbMouseenterListener=this.handleThumbMouseenter.bind(this),this.thumbMouseleaveListener=this.handleThumbMouseleave.bind(this),this.inputStartChangeListener=function(){t.handleInputChange(yh.START)},this.inputEndChangeListener=function(){t.handleInputChange(yh.END)},this.inputStartFocusListener=function(){t.handleInputFocus(yh.START)},this.inputEndFocusListener=function(){t.handleInputFocus(yh.END)},this.inputStartBlurListener=function(){t.handleInputBlur(yh.START)},this.inputEndBlurListener=function(){t.handleInputBlur(yh.END)},this.resizeListener=this.handleResize.bind(this),this.registerEventHandlers()},e.prototype.destroy=function(){this.deregisterEventHandlers()},e.prototype.setMin=function(t){this.min=t,this.isRange||(this.valueStart=t),this.updateUI()},e.prototype.setMax=function(t){this.max=t,this.updateUI()},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){if(this.isRange&&t<this.valueStart+this.minRange)throw new Error("end thumb value ("+t+") must be >= start thumb value ("+this.valueStart+") + min range ("+this.minRange+")");this.updateValue(t,yh.END)},e.prototype.getValueStart=function(){if(!this.isRange)throw new Error("`valueStart` is only applicable for range sliders.");return this.valueStart},e.prototype.setValueStart=function(t){if(!this.isRange)throw new Error("`valueStart` is only applicable for range sliders.");if(this.isRange&&t>this.value-this.minRange)throw new Error("start thumb value ("+t+") must be <= end thumb value ("+this.value+") - min range ("+this.minRange+")");this.updateValue(t,yh.START)},e.prototype.setStep=function(t){this.step=t,this.numDecimalPlaces=tu(t),this.updateUI()},e.prototype.setMinRange=function(t){if(!this.isRange)throw new Error("`minRange` is only applicable for range sliders.");if(t<0)throw new Error("`minRange` must be non-negative. Current value: "+t);if(this.value-this.valueStart<t)throw new Error("start thumb value ("+this.valueStart+") and end thumb value ("+this.value+") must differ by at least "+t+".");this.minRange=t},e.prototype.setIsDiscrete=function(t){this.isDiscrete=t,this.updateValueIndicatorUI(),this.updateTickMarksUI()},e.prototype.getStep=function(){return this.step},e.prototype.getMinRange=function(){if(!this.isRange)throw new Error("`minRange` is only applicable for range sliders.");return this.minRange},e.prototype.setHasTickMarks=function(t){this.hasTickMarks=t,this.updateTickMarksUI()},e.prototype.getDisabled=function(){return this.isDisabled},e.prototype.setDisabled=function(t){this.isDisabled=t,t?(this.adapter.addClass(Rh),this.isRange&&this.adapter.setInputAttribute(Bh,"",yh.START),this.adapter.setInputAttribute(Bh,"",yh.END)):(this.adapter.removeClass(Rh),this.isRange&&this.adapter.removeInputAttribute(Bh,yh.START),this.adapter.removeInputAttribute(Bh,yh.END))},e.prototype.getIsRange=function(){return this.isRange},e.prototype.layout=function(t){var e=(void 0===t?{}:t).skipUpdateUI;this.rect=this.adapter.getBoundingClientRect(),this.isRange&&(this.startThumbKnobWidth=this.adapter.getThumbKnobWidth(yh.START),this.endThumbKnobWidth=this.adapter.getThumbKnobWidth(yh.END)),e||this.updateUI()},e.prototype.handleResize=function(){this.layout()},e.prototype.handleDown=function(t){if(!this.isDisabled){this.valueStartBeforeDownEvent=this.valueStart,this.valueBeforeDownEvent=this.value;var e=null!=t.clientX?t.clientX:t.targetTouches[0].clientX;this.downEventClientX=e;var n=this.mapClientXOnSliderScale(e);this.thumb=this.getThumbFromDownEvent(e,n),null!==this.thumb&&(this.handleDragStart(t,n,this.thumb),this.updateValue(n,this.thumb,{emitInputEvent:!0}))}},e.prototype.handleMove=function(t){if(!this.isDisabled){t.preventDefault();var e=null!=t.clientX?t.clientX:t.targetTouches[0].clientX,n=null!=this.thumb;if(this.thumb=this.getThumbFromMoveEvent(e),null!==this.thumb){var i=this.mapClientXOnSliderScale(e);n||(this.handleDragStart(t,i,this.thumb),this.adapter.emitDragStartEvent(i,this.thumb)),this.updateValue(i,this.thumb,{emitInputEvent:!0})}}},e.prototype.handleUp=function(){var t,e;if(!this.isDisabled&&null!==this.thumb){(null===(e=(t=this.adapter).shouldHideFocusStylesForPointerEvents)||void 0===e?void 0:e.call(t))&&this.handleInputBlur(this.thumb);var n=this.thumb===yh.START?this.valueStartBeforeDownEvent:this.valueBeforeDownEvent,i=this.thumb===yh.START?this.valueStart:this.value;n!==i&&this.adapter.emitChangeEvent(i,this.thumb),this.adapter.emitDragEndEvent(i,this.thumb),this.thumb=null}},e.prototype.handleThumbMouseenter=function(){this.isDiscrete&&this.isRange&&(this.adapter.addThumbClass(Dh,yh.START),this.adapter.addThumbClass(Dh,yh.END))},e.prototype.handleThumbMouseleave=function(){var t,e;this.isDiscrete&&this.isRange&&(!(null===(e=(t=this.adapter).shouldHideFocusStylesForPointerEvents)||void 0===e?void 0:e.call(t))&&(this.adapter.isInputFocused(yh.START)||this.adapter.isInputFocused(yh.END))||this.thumb||(this.adapter.removeThumbClass(Dh,yh.START),this.adapter.removeThumbClass(Dh,yh.END)))},e.prototype.handleMousedownOrTouchstart=function(t){var e=this,n="mousedown"===t.type?"mousemove":"touchmove";this.adapter.registerBodyEventHandler(n,this.moveListener);var i=function(){e.handleUp(),e.adapter.deregisterBodyEventHandler(n,e.moveListener),e.adapter.deregisterEventHandler("mouseup",i),e.adapter.deregisterEventHandler("touchend",i)};this.adapter.registerBodyEventHandler("mouseup",i),this.adapter.registerBodyEventHandler("touchend",i),this.handleDown(t)},e.prototype.handlePointerdown=function(t){0===t.button&&(null!=t.pointerId&&this.adapter.setPointerCapture(t.pointerId),this.adapter.registerEventHandler("pointermove",this.moveListener),this.handleDown(t))},e.prototype.handleInputChange=function(t){var e=Number(this.adapter.getInputValue(t));t===yh.START?this.setValueStart(e):this.setValue(e),this.adapter.emitChangeEvent(t===yh.START?this.valueStart:this.value,t),this.adapter.emitInputEvent(t===yh.START?this.valueStart:this.value,t)},e.prototype.handleInputFocus=function(t){if(this.adapter.addThumbClass(Ph,t),this.isDiscrete&&(this.adapter.addThumbClass(Dh,t),this.isRange)){var e=t===yh.START?yh.END:yh.START;this.adapter.addThumbClass(Dh,e)}},e.prototype.handleInputBlur=function(t){if(this.adapter.removeThumbClass(Ph,t),this.isDiscrete&&(this.adapter.removeThumbClass(Dh,t),this.isRange)){var e=t===yh.START?yh.END:yh.START;this.adapter.removeThumbClass(Dh,e)}},e.prototype.handleDragStart=function(t,e,n){var i,r;this.adapter.emitDragStartEvent(e,n),this.adapter.focusInput(n),(null===(r=(i=this.adapter).shouldHideFocusStylesForPointerEvents)||void 0===r?void 0:r.call(i))&&this.handleInputFocus(n),t.preventDefault()},e.prototype.getThumbFromDownEvent=function(t,e){if(!this.isRange)return yh.END;var n=this.adapter.getThumbBoundingClientRect(yh.START),i=this.adapter.getThumbBoundingClientRect(yh.END),r=t>=n.left&&t<=n.right,o=t>=i.left&&t<=i.right;return r&&o?null:r?yh.START:o?yh.END:e<this.valueStart?yh.START:e>this.value?yh.END:e-this.valueStart<=this.value-e?yh.START:yh.END},e.prototype.getThumbFromMoveEvent=function(t){if(null!==this.thumb)return this.thumb;if(null===this.downEventClientX)throw new Error("`downEventClientX` is null after move event.");return Math.abs(this.downEventClientX-t)<zh?this.thumb:t<this.downEventClientX?this.adapter.isRTL()?yh.END:yh.START:this.adapter.isRTL()?yh.START:yh.END},e.prototype.updateUI=function(t){t?this.updateThumbAndInputAttributes(t):(this.updateThumbAndInputAttributes(yh.START),this.updateThumbAndInputAttributes(yh.END)),this.updateThumbAndTrackUI(t),this.updateValueIndicatorUI(t),this.updateTickMarksUI()},e.prototype.updateThumbAndInputAttributes=function(t){if(t){var e=this.isRange&&t===yh.START?this.valueStart:this.value,n=String(e);this.adapter.setInputAttribute($h,n,t),this.isRange&&t===yh.START?this.adapter.setInputAttribute(Uh,String(e+this.minRange),yh.END):this.isRange&&t===yh.END&&this.adapter.setInputAttribute(jh,String(e-this.minRange),yh.START),this.adapter.getInputValue(t)!==n&&this.adapter.setInputValue(n,t);var i=this.adapter.getValueToAriaValueTextFn();i&&this.adapter.setInputAttribute(Gh,i(e,t),t)}},e.prototype.updateValueIndicatorUI=function(t){if(this.isDiscrete){var e=this.isRange&&t===yh.START?this.valueStart:this.value;this.adapter.setValueIndicatorText(e,t===yh.START?yh.START:yh.END),!t&&this.isRange&&this.adapter.setValueIndicatorText(this.valueStart,yh.START)}},e.prototype.updateTickMarksUI=function(){if(this.isDiscrete&&this.hasTickMarks){var t=(this.valueStart-this.min)/this.step,e=(this.value-this.valueStart)/this.step+1,n=(this.max-this.value)/this.step,i=Array.from({length:t}).fill(vh.INACTIVE),r=Array.from({length:e}).fill(vh.ACTIVE),o=Array.from({length:n}).fill(vh.INACTIVE);this.adapter.updateTickMarks(i.concat(r).concat(o))}},e.prototype.mapClientXOnSliderScale=function(t){var e=(t-this.rect.left)/this.rect.width;this.adapter.isRTL()&&(e=1-e);var n=this.min+e*(this.max-this.min);return n===this.max||n===this.min?n:Number(this.quantize(n).toFixed(this.numDecimalPlaces))},e.prototype.quantize=function(t){var e=Math.round((t-this.min)/this.step);return this.min+e*this.step},e.prototype.updateValue=function(t,e,n){var i=(void 0===n?{}:n).emitInputEvent;if(t=this.clampValue(t,e),this.isRange&&e===yh.START){if(this.valueStart===t)return;this.valueStart=t}else{if(this.value===t)return;this.value=t}this.updateUI(e),i&&this.adapter.emitInputEvent(e===yh.START?this.valueStart:this.value,e)},e.prototype.clampValue=function(t,e){return t=Math.min(Math.max(t,this.min),this.max),this.isRange&&e===yh.START&&t>this.value-this.minRange?this.value-this.minRange:this.isRange&&e===yh.END&&t<this.valueStart+this.minRange?this.valueStart+this.minRange:t},e.prototype.updateThumbAndTrackUI=function(t){var e=this,n=this.max,i=this.min,r=(this.value-this.valueStart)/(n-i),o=r*this.rect.width,s=this.adapter.isRTL(),a=Jh?Mh(window,"transform"):"transform";if(this.isRange){var l=this.adapter.isRTL()?(n-this.value)/(n-i)*this.rect.width:(this.valueStart-i)/(n-i)*this.rect.width,c=l+o;this.animFrame.request(Ah.SLIDER_UPDATE,(function(){!s&&t===yh.START||s&&t!==yh.START?(e.adapter.setTrackActiveStyleProperty("transform-origin","right"),e.adapter.setTrackActiveStyleProperty("left","auto"),e.adapter.setTrackActiveStyleProperty("right",e.rect.width-c+"px")):(e.adapter.setTrackActiveStyleProperty("transform-origin","left"),e.adapter.setTrackActiveStyleProperty("right","auto"),e.adapter.setTrackActiveStyleProperty("left",l+"px")),e.adapter.setTrackActiveStyleProperty(a,"scaleX("+r+")");var n=s?c:l,i=e.adapter.isRTL()?l:c;t!==yh.START&&t&&e.initialStylesRemoved||(e.adapter.setThumbStyleProperty(a,"translateX("+n+"px)",yh.START),e.alignValueIndicator(yh.START,n)),t!==yh.END&&t&&e.initialStylesRemoved||(e.adapter.setThumbStyleProperty(a,"translateX("+i+"px)",yh.END),e.alignValueIndicator(yh.END,i)),e.removeInitialStyles(s),e.updateOverlappingThumbsUI(n,i,t)}))}else this.animFrame.request(Ah.SLIDER_UPDATE,(function(){var t=s?e.rect.width-o:o;e.adapter.setThumbStyleProperty(a,"translateX("+t+"px)",yh.END),e.alignValueIndicator(yh.END,t),e.adapter.setTrackActiveStyleProperty(a,"scaleX("+r+")"),e.removeInitialStyles(s)}))},e.prototype.alignValueIndicator=function(t,e){if(this.isDiscrete){var n=this.adapter.getThumbBoundingClientRect(t).width/2,i=this.adapter.getValueIndicatorContainerWidth(t),r=this.adapter.getBoundingClientRect().width;i/2>e+n?(this.adapter.setThumbStyleProperty(Xh,n+"px",t),this.adapter.setThumbStyleProperty(Yh,"auto",t),this.adapter.setThumbStyleProperty(Vh,"translateX(-50%)",t),this.adapter.setThumbStyleProperty(qh,"0",t),this.adapter.setThumbStyleProperty(Kh,"auto",t),this.adapter.setThumbStyleProperty(Zh,"none",t)):i/2>r-e+n?(this.adapter.setThumbStyleProperty(Xh,"auto",t),this.adapter.setThumbStyleProperty(Yh,n+"px",t),this.adapter.setThumbStyleProperty(Vh,"translateX(50%)",t),this.adapter.setThumbStyleProperty(qh,"auto",t),this.adapter.setThumbStyleProperty(Kh,"0",t),this.adapter.setThumbStyleProperty(Zh,"none",t)):(this.adapter.setThumbStyleProperty(Xh,"50%",t),this.adapter.setThumbStyleProperty(Yh,"auto",t),this.adapter.setThumbStyleProperty(Vh,"translateX(-50%)",t),this.adapter.setThumbStyleProperty(qh,"50%",t),this.adapter.setThumbStyleProperty(Kh,"auto",t),this.adapter.setThumbStyleProperty(Zh,"translateX(-50%)",t))}},e.prototype.removeInitialStyles=function(t){if(!this.initialStylesRemoved){var e=t?"right":"left";this.adapter.removeThumbStyleProperty(e,yh.END),this.isRange&&this.adapter.removeThumbStyleProperty(e,yh.START),this.initialStylesRemoved=!0,this.resetTrackAndThumbAnimation()}},e.prototype.resetTrackAndThumbAnimation=function(){var t=this;if(this.isDiscrete){var e=Jh?Mh(window,"transition"):"transition",n="none 0s ease 0s";this.adapter.setThumbStyleProperty(e,n,yh.END),this.isRange&&this.adapter.setThumbStyleProperty(e,n,yh.START),this.adapter.setTrackActiveStyleProperty(e,n),requestAnimationFrame((function(){t.adapter.removeThumbStyleProperty(e,yh.END),t.adapter.removeTrackActiveStyleProperty(e),t.isRange&&t.adapter.removeThumbStyleProperty(e,yh.START)}))}},e.prototype.updateOverlappingThumbsUI=function(t,e,n){var i=!1;if(this.adapter.isRTL()){var r=t-this.startThumbKnobWidth/2;i=e+this.endThumbKnobWidth/2>=r}else{i=t+this.startThumbKnobWidth/2>=e-this.endThumbKnobWidth/2}i?(this.adapter.addThumbClass(Fh,n||yh.END),this.adapter.removeThumbClass(Fh,n===yh.START?yh.END:yh.START)):(this.adapter.removeThumbClass(Fh,yh.START),this.adapter.removeThumbClass(Fh,yh.END))},e.prototype.convertAttributeValueToNumber=function(t,e){if(null===t)throw new Error("MDCSliderFoundation: `"+e+"` must be non-null.");var n=Number(t);if(isNaN(n))throw new Error("MDCSliderFoundation: `"+e+"` value is `"+t+"`, but must be a number.");return n},e.prototype.validateProperties=function(t){var e=t.min,n=t.max,i=t.value,r=t.valueStart,o=t.step,s=t.minRange;if(e>=n)throw new Error("MDCSliderFoundation: min must be strictly less than max. Current: [min: "+e+", max: "+n+"]");if(o<=0)throw new Error("MDCSliderFoundation: step must be a positive number. Current step: "+o);if(this.isRange){if(i<e||i>n||r<e||r>n)throw new Error("MDCSliderFoundation: values must be in [min, max] range. Current values: [start value: "+r+", end value: "+i+", min: "+e+", max: "+n+"]");if(r>i)throw new Error("MDCSliderFoundation: start value must be <= end value. Current values: [start value: "+r+", end value: "+i+"]");if(s<0)throw new Error("MDCSliderFoundation: minimum range must be non-negative. Current min range: "+s);if(i-r<s)throw new Error("MDCSliderFoundation: start value and end value must differ by at least "+s+". Current values: [start value: "+r+", end value: "+i+"]");var a=(r-e)/o,l=(i-e)/o;if(!Number.isInteger(parseFloat(a.toFixed(6)))||!Number.isInteger(parseFloat(l.toFixed(6))))throw new Error("MDCSliderFoundation: Slider values must be valid based on the step value ("+o+"). Current values: [start value: "+r+", end value: "+i+", min: "+e+"]")}else{if(i<e||i>n)throw new Error("MDCSliderFoundation: value must be in [min, max] range. Current values: [value: "+i+", min: "+e+", max: "+n+"]");l=(i-e)/o;if(!Number.isInteger(parseFloat(l.toFixed(6))))throw new Error("MDCSliderFoundation: Slider value must be valid based on the step value ("+o+"). Current value: "+i)}},e.prototype.registerEventHandlers=function(){this.adapter.registerWindowEventHandler("resize",this.resizeListener),e.SUPPORTS_POINTER_EVENTS?(this.adapter.registerEventHandler("pointerdown",this.pointerdownListener),this.adapter.registerEventHandler("pointerup",this.pointerupListener)):(this.adapter.registerEventHandler("mousedown",this.mousedownOrTouchstartListener),this.adapter.registerEventHandler("touchstart",this.mousedownOrTouchstartListener)),this.isRange&&(this.adapter.registerThumbEventHandler(yh.START,"mouseenter",this.thumbMouseenterListener),this.adapter.registerThumbEventHandler(yh.START,"mouseleave",this.thumbMouseleaveListener),this.adapter.registerInputEventHandler(yh.START,"change",this.inputStartChangeListener),this.adapter.registerInputEventHandler(yh.START,"focus",this.inputStartFocusListener),this.adapter.registerInputEventHandler(yh.START,"blur",this.inputStartBlurListener)),this.adapter.registerThumbEventHandler(yh.END,"mouseenter",this.thumbMouseenterListener),this.adapter.registerThumbEventHandler(yh.END,"mouseleave",this.thumbMouseleaveListener),this.adapter.registerInputEventHandler(yh.END,"change",this.inputEndChangeListener),this.adapter.registerInputEventHandler(yh.END,"focus",this.inputEndFocusListener),this.adapter.registerInputEventHandler(yh.END,"blur",this.inputEndBlurListener)},e.prototype.deregisterEventHandlers=function(){this.adapter.deregisterWindowEventHandler("resize",this.resizeListener),e.SUPPORTS_POINTER_EVENTS?(this.adapter.deregisterEventHandler("pointerdown",this.pointerdownListener),this.adapter.deregisterEventHandler("pointerup",this.pointerupListener)):(this.adapter.deregisterEventHandler("mousedown",this.mousedownOrTouchstartListener),this.adapter.deregisterEventHandler("touchstart",this.mousedownOrTouchstartListener)),this.isRange&&(this.adapter.deregisterThumbEventHandler(yh.START,"mouseenter",this.thumbMouseenterListener),this.adapter.deregisterThumbEventHandler(yh.START,"mouseleave",this.thumbMouseleaveListener),this.adapter.deregisterInputEventHandler(yh.START,"change",this.inputStartChangeListener),this.adapter.deregisterInputEventHandler(yh.START,"focus",this.inputStartFocusListener),this.adapter.deregisterInputEventHandler(yh.START,"blur",this.inputStartBlurListener)),this.adapter.deregisterThumbEventHandler(yh.END,"mouseenter",this.thumbMouseenterListener),this.adapter.deregisterThumbEventHandler(yh.END,"mouseleave",this.thumbMouseleaveListener),this.adapter.deregisterInputEventHandler(yh.END,"change",this.inputEndChangeListener),this.adapter.deregisterInputEventHandler(yh.END,"focus",this.inputEndFocusListener),this.adapter.deregisterInputEventHandler(yh.END,"blur",this.inputEndBlurListener)},e.prototype.handlePointerup=function(){this.handleUp(),this.adapter.deregisterEventHandler("pointermove",this.moveListener)},e.SUPPORTS_POINTER_EVENTS=Jh&&Boolean(window.PointerEvent)&&!(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document),e}(sh);function tu(t){var e=/(?:\.(\d+))?(?:[eE]([+\-]?\d+))?$/.exec(String(t));if(!e)return 0;var n=e[1]||"",i=e[2]||0;return Math.max(0,("0"===n?0:n.length)-Number(i))}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eu extends Sh{constructor(){super(...arguments),this.mdcFoundationClass=Qh,this.disabled=!1,this.min=0,this.max=100,this.valueEnd=0,this.name="",this.step=1,this.withTickMarks=!1,this.discrete=!1,this.tickMarks=[],this.trackTransformOriginStyle="",this.trackLeftStyle="",this.trackRightStyle="",this.trackTransitionStyle="",this.endThumbWithIndicator=!1,this.endThumbTop=!1,this.shouldRenderEndRipple=!1,this.endThumbTransformStyle="",this.endThumbTransitionStyle="",this.endThumbCssProperties={},this.valueToAriaTextTransform=null,this.valueToValueIndicatorTransform=t=>`${t}`,this.boundMoveListener=null,this.endRippleHandlers=new Th((()=>(this.shouldRenderEndRipple=!0,this.endRipple)))}update(t){if(t.has("valueEnd")&&this.mdcFoundation){this.mdcFoundation.setValue(this.valueEnd);const t=this.mdcFoundation.getValue();t!==this.valueEnd&&(this.valueEnd=t)}t.has("discrete")&&(this.discrete||(this.tickMarks=[])),super.update(t)}render(){return this.renderRootEl(Ec`
      ${this.renderStartInput()}
      ${this.renderEndInput()}
      ${this.renderTrack()}
      ${this.renderTickMarks()}
      ${this.renderStartThumb()}
      ${this.renderEndThumb()}`)}renderRootEl(t){const e=Kc({"mdc-slider--disabled":this.disabled,"mdc-slider--discrete":this.discrete});return Ec`
    <div
        class="mdc-slider ${e}"
        @pointerdown=${this.onPointerdown}
        @pointerup=${this.onPointerup}
        @contextmenu=${this.onContextmenu}>
      ${t}
    </div>`}renderStartInput(){return Ac}renderEndInput(){var t;return Ec`
      <input
          class="mdc-slider__input end"
          type="range"
          step=${this.step}
          min=${this.min}
          max=${this.max}
          .value=${this.valueEnd}
          @change=${this.onEndChange}
          @focus=${this.onEndFocus}
          @blur=${this.onEndBlur}
          ?disabled=${this.disabled}
          name=${this.name}
          aria-label=${Zc(this.ariaLabel)}
          aria-labelledby=${Zc(this.ariaLabelledBy)}
          aria-describedby=${Zc(this.ariaDescribedBy)}
          aria-valuetext=${Zc(null===(t=this.valueToAriaTextTransform)||void 0===t?void 0:t.call(this,this.valueEnd))}>
    `}renderTrack(){return Ac}renderTickMarks(){return this.withTickMarks?Ec`
      <div class="mdc-slider__tick-marks">
        ${this.tickMarks.map((t=>{const e=t===vh.ACTIVE;return Ec`<div class="${e?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"}"></div>`}))}
      </div>`:Ac}renderStartThumb(){return Ac}renderEndThumb(){const t=Kc({"mdc-slider__thumb--with-indicator":this.endThumbWithIndicator,"mdc-slider__thumb--top":this.endThumbTop}),e=Jc(Object.assign({"-webkit-transform":this.endThumbTransformStyle,transform:this.endThumbTransformStyle,"-webkit-transition":this.endThumbTransitionStyle,transition:this.endThumbTransitionStyle,left:this.endThumbTransformStyle||"rtl"===getComputedStyle(this).direction?"":`calc(${(this.valueEnd-this.min)/(this.max-this.min)*100}% - 24px)`,right:this.endThumbTransformStyle||"rtl"!==getComputedStyle(this).direction?"":`calc(${(this.valueEnd-this.min)/(this.max-this.min)*100}% - 24px)`},this.endThumbCssProperties)),n=this.shouldRenderEndRipple?Ec`<mwc-ripple class="ripple" unbounded></mwc-ripple>`:Ac;return Ec`
      <div
          class="mdc-slider__thumb end ${t}"
          style=${e}
          @mouseenter=${this.onEndMouseenter}
          @mouseleave=${this.onEndMouseleave}>
        ${n}
        ${this.renderValueIndicator(this.valueToValueIndicatorTransform(this.valueEnd))}
        <div class="mdc-slider__thumb-knob"></div>
      </div>
    `}renderValueIndicator(t){return this.discrete?Ec`
    <div class="mdc-slider__value-indicator-container" aria-hidden="true">
      <div class="mdc-slider__value-indicator">
        <span class="mdc-slider__value-indicator-text">
          ${t}
        </span>
      </div>
    </div>`:Ac}disconnectedCallback(){super.disconnectedCallback(),this.mdcFoundation&&this.mdcFoundation.destroy()}createAdapter(){}async firstUpdated(){super.firstUpdated(),await this.layout(!0)}updated(t){super.updated(t),this.mdcFoundation&&(t.has("disabled")&&this.mdcFoundation.setDisabled(this.disabled),t.has("min")&&this.mdcFoundation.setMin(this.min),t.has("max")&&this.mdcFoundation.setMax(this.max),t.has("step")&&this.mdcFoundation.setStep(this.step),t.has("discrete")&&this.mdcFoundation.setIsDiscrete(this.discrete),t.has("withTickMarks")&&this.mdcFoundation.setHasTickMarks(this.withTickMarks))}async layout(t=!1){var e;null===(e=this.mdcFoundation)||void 0===e||e.layout({skipUpdateUI:t}),this.requestUpdate(),await this.updateComplete}onEndChange(t){var e;this.valueEnd=Number(t.target.value),null===(e=this.mdcFoundation)||void 0===e||e.handleInputChange(yh.END)}onEndFocus(){var t;null===(t=this.mdcFoundation)||void 0===t||t.handleInputFocus(yh.END),this.endRippleHandlers.startFocus()}onEndBlur(){var t;null===(t=this.mdcFoundation)||void 0===t||t.handleInputBlur(yh.END),this.endRippleHandlers.endFocus()}onEndMouseenter(){var t;null===(t=this.mdcFoundation)||void 0===t||t.handleThumbMouseenter(),this.endRippleHandlers.startHover()}onEndMouseleave(){var t;null===(t=this.mdcFoundation)||void 0===t||t.handleThumbMouseleave(),this.endRippleHandlers.endHover()}onPointerdown(t){this.layout(),this.mdcFoundation&&(this.mdcFoundation.handlePointerdown(t),this.boundMoveListener=this.mdcFoundation.handleMove.bind(this.mdcFoundation),this.mdcRoot.addEventListener("pointermove",this.boundMoveListener))}onPointerup(){this.mdcFoundation&&(this.mdcFoundation.handleUp(),this.boundMoveListener&&(this.mdcRoot.removeEventListener("pointermove",this.boundMoveListener),this.boundMoveListener=null))}onContextmenu(t){t.preventDefault()}setFormData(t){this.name&&t.append(this.name,`${this.valueEnd}`)}}Ol([$l("input.end")],eu.prototype,"formElement",void 0),Ol([$l(".mdc-slider")],eu.prototype,"mdcRoot",void 0),Ol([$l(".end.mdc-slider__thumb")],eu.prototype,"endThumb",void 0),Ol([$l(".end.mdc-slider__thumb .mdc-slider__thumb-knob")],eu.prototype,"endThumbKnob",void 0),Ol([$l(".end.mdc-slider__thumb .mdc-slider__value-indicator-container")],eu.prototype,"endValueIndicatorContainer",void 0),Ol([function(t){return jl({descriptor:e=>({async get(){var e;return await this.updateComplete,null===(e=this.renderRoot)||void 0===e?void 0:e.querySelector(t)},enumerable:!0,configurable:!0})})}(".end .ripple")],eu.prototype,"endRipple",void 0),Ol([Bl({type:Boolean,reflect:!0})],eu.prototype,"disabled",void 0),Ol([Bl({type:Number})],eu.prototype,"min",void 0),Ol([Bl({type:Number})],eu.prototype,"max",void 0),Ol([Bl({type:Number})],eu.prototype,"valueEnd",void 0),Ol([Bl({type:String})],eu.prototype,"name",void 0),Ol([Bl({type:Number})],eu.prototype,"step",void 0),Ol([Bl({type:Boolean})],eu.prototype,"withTickMarks",void 0),Ol([Bl({type:Boolean})],eu.prototype,"discrete",void 0),Ol([Ul()],eu.prototype,"tickMarks",void 0),Ol([Ul()],eu.prototype,"trackTransformOriginStyle",void 0),Ol([Ul()],eu.prototype,"trackLeftStyle",void 0),Ol([Ul()],eu.prototype,"trackRightStyle",void 0),Ol([Ul()],eu.prototype,"trackTransitionStyle",void 0),Ol([Ul()],eu.prototype,"endThumbWithIndicator",void 0),Ol([Ul()],eu.prototype,"endThumbTop",void 0),Ol([Ul()],eu.prototype,"shouldRenderEndRipple",void 0),Ol([Ul()],eu.prototype,"endThumbTransformStyle",void 0),Ol([Ul()],eu.prototype,"endThumbTransitionStyle",void 0),Ol([Ul()],eu.prototype,"endThumbCssProperties",void 0),Ol([Wl,Bl({type:String,attribute:"aria-label"})],eu.prototype,"ariaLabel",void 0),Ol([Wl,Bl({type:String,attribute:"aria-labelledby"})],eu.prototype,"ariaLabelledBy",void 0),Ol([Wl,Bl({type:String,attribute:"aria-describedby"})],eu.prototype,"ariaDescribedBy",void 0);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class nu extends eu{get value(){return this.valueEnd}set value(t){this.valueEnd=t}renderTrack(){const t=Jc({"transform-origin":this.trackTransformOriginStyle,left:this.trackLeftStyle,right:this.trackRightStyle,"-webkit-transform":`scaleX(${(this.valueEnd-this.min)/(this.max-this.min)})`,transform:`scaleX(${(this.valueEnd-this.min)/(this.max-this.min)})`,"-webkit-transition":this.trackTransitionStyle,transition:this.trackTransitionStyle});return Ec`
      <div class="mdc-slider__track">
        <div class="mdc-slider__track--inactive"></div>
        <div class="mdc-slider__track--active">
          <div
              class="mdc-slider__track--active_fill"
              style=${t}>
          </div>
        </div>
      </div>`}createAdapter(){return{addClass:t=>{if("mdc-slider--disabled"===t)this.disabled=!0},removeClass:t=>{if("mdc-slider--disabled"===t)this.disabled=!1},hasClass:t=>{switch(t){case"mdc-slider--disabled":return this.disabled;case"mdc-slider--discrete":return this.discrete;default:return!1}},addThumbClass:(t,e)=>{if(e!==yh.START&&"mdc-slider__thumb--with-indicator"===t)this.endThumbWithIndicator=!0},removeThumbClass:(t,e)=>{if(e!==yh.START&&"mdc-slider__thumb--with-indicator"===t)this.endThumbWithIndicator=!1},registerEventHandler:()=>{},deregisterEventHandler:()=>{},registerBodyEventHandler:(t,e)=>{document.body.addEventListener(t,e)},deregisterBodyEventHandler:(t,e)=>{document.body.removeEventListener(t,e)},registerInputEventHandler:(t,e,n)=>{t!==yh.START&&this.formElement.addEventListener(e,n)},deregisterInputEventHandler:(t,e,n)=>{t!==yh.START&&this.formElement.removeEventListener(e,n)},registerThumbEventHandler:()=>{},deregisterThumbEventHandler:()=>{},registerWindowEventHandler:(t,e)=>{window.addEventListener(t,e)},deregisterWindowEventHandler:(t,e)=>{window.addEventListener(t,e)},emitChangeEvent:(t,e)=>{if(e===yh.START)return;const n=new CustomEvent("change",{bubbles:!0,composed:!0,detail:{value:t,thumb:e}});this.dispatchEvent(n)},emitDragEndEvent:(t,e)=>{e!==yh.START&&this.endRippleHandlers.endPress()},emitDragStartEvent:(t,e)=>{e!==yh.START&&this.endRippleHandlers.startPress()},emitInputEvent:(t,e)=>{if(e===yh.START)return;const n=new CustomEvent("input",{bubbles:!0,composed:!0,detail:{value:t,thumb:e}});this.dispatchEvent(n)},focusInput:t=>{t!==yh.START&&this.formElement.focus()},getAttribute:()=>"",getBoundingClientRect:()=>this.mdcRoot.getBoundingClientRect(),getInputAttribute:(t,e)=>{if(e===yh.START)return null;switch(t){case"min":return this.min.toString();case"max":return this.max.toString();case"value":return this.valueEnd.toString();case"step":return this.step.toString();default:return null}},getInputValue:t=>t===yh.START?"":this.valueEnd.toString(),getThumbBoundingClientRect:t=>t===yh.START?this.getBoundingClientRect():this.endThumb.getBoundingClientRect(),getThumbKnobWidth:t=>t===yh.START?0:this.endThumbKnob.getBoundingClientRect().width,getValueIndicatorContainerWidth:t=>t===yh.START?0:this.endValueIndicatorContainer.getBoundingClientRect().width,getValueToAriaValueTextFn:()=>this.valueToAriaTextTransform,isInputFocused:t=>{if(t===yh.START)return!1;const e=((t=window.document)=>{let e=t.activeElement;const n=[];if(!e)return n;for(;e&&(n.push(e),e.shadowRoot);)e=e.shadowRoot.activeElement;return n})();return e[e.length-1]===this.formElement},isRTL:()=>"rtl"===getComputedStyle(this).direction,setInputAttribute:(t,e,n)=>{yh.START},removeInputAttribute:t=>{},setThumbStyleProperty:(t,e,n)=>{if(n!==yh.START)switch(t){case"transform":case"-webkit-transform":this.endThumbTransformStyle=e;break;case"transition":case"-webkit-transition":this.endThumbTransitionStyle=e;break;default:t.startsWith("--")&&(this.endThumbCssProperties[t]=e)}},removeThumbStyleProperty:(t,e)=>{if(e!==yh.START)switch(t){case"left":case"right":break;case"transition":case"-webkit-transition":this.endThumbTransitionStyle=""}},setTrackActiveStyleProperty:(t,e)=>{switch(t){case"transform-origin":this.trackTransformOriginStyle=e;break;case"left":this.trackLeftStyle=e;break;case"right":this.trackRightStyle=e;break;case"transform":case"-webkit-transform":break;case"transition":case"-webkit-transition":this.trackTransitionStyle=e}},removeTrackActiveStyleProperty:t=>{switch(t){case"transition":case"-webkit-transition":this.trackTransitionStyle=""}},setInputValue:(t,e)=>{e!==yh.START&&(this.valueEnd=Number(t))},setPointerCapture:t=>{this.mdcRoot.setPointerCapture(t)},setValueIndicatorText:()=>{},updateTickMarks:t=>{this.tickMarks=t}}}}Ol([Bl({type:Number})],nu.prototype,"value",null);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let iu=class extends nu{};function ru(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ou(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function su(t){let e,n,i;function r(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<0?r=e+1:o=e}while(r<o)}return r}return 2!==t.length?(e=ru,n=(e,n)=>ru(t(e),n),i=(e,n)=>t(e)-n):(e=t===ru||t===ou?t:au,n=t,i=t),{left:r,center:function(t,e,n=0,o=t.length){const s=r(t,e,n,o-1);return s>n&&i(t[s-1],e)>-i(t[s],e)?s-1:s},right:function(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<=0?r=e+1:o=e}while(r<o)}return r}}}function au(){return 0}function lu(t){return null===t?NaN:+t}function*cu(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let i of t)null!=(i=e(i,++n,t))&&(i=+i)>=i&&(yield i)}}iu.styles=[nh],iu=Ol([zl("mwc-slider")],iu);const hu=su(ru),uu=hu.right,du=hu.left,fu=su(lu).center;var pu=uu;const gu=_u(bu),mu=_u((function(t){const e=bu(t);return(t,n,i,r,o)=>{e(t,n,(i<<=2)+0,(r<<=2)+0,o<<=2),e(t,n,i+1,r+1,o),e(t,n,i+2,r+2,o),e(t,n,i+3,r+3,o)}}));function _u(t){return function(e,n,i=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:o,height:s}=e;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((s=Math.floor(void 0!==s?s:r.length/o))>=0))throw new RangeError("invalid height");if(!o||!s||!n&&!i)return e;const a=n&&t(n),l=i&&t(i),c=r.slice();return a&&l?(vu(a,c,r,o,s),vu(a,r,c,o,s),vu(a,c,r,o,s),yu(l,r,c,o,s),yu(l,c,r,o,s),yu(l,r,c,o,s)):a?(vu(a,r,c,o,s),vu(a,c,r,o,s),vu(a,r,c,o,s)):l&&(yu(l,r,c,o,s),yu(l,c,r,o,s),yu(l,r,c,o,s)),e}}function vu(t,e,n,i,r){for(let o=0,s=i*r;o<s;)t(e,n,o,o+=i,1)}function yu(t,e,n,i,r){for(let o=0,s=i*r;o<i;++o)t(e,n,o,o+s,i)}function bu(t){const e=Math.floor(t);if(e===t)return function(t){const e=2*t+1;return(n,i,r,o,s)=>{if(!((o-=s)>=r))return;let a=t*i[r];const l=s*t;for(let t=r,e=r+l;t<e;t+=s)a+=i[Math.min(o,t)];for(let t=r,c=o;t<=c;t+=s)a+=i[Math.min(o,t+l)],n[t]=a/e,a-=i[Math.max(r,t-l)]}}(t);const n=t-e,i=2*t+1;return(t,r,o,s,a)=>{if(!((s-=a)>=o))return;let l=e*r[o];const c=a*e,h=c+a;for(let t=o,e=o+c;t<e;t+=a)l+=r[Math.min(s,t)];for(let e=o,u=s;e<=u;e+=a)l+=r[Math.min(s,e+c)],t[e]=(l+n*(r[Math.max(o,e-h)]+r[Math.min(s,e+h)]))/i,l-=r[Math.max(o,e-c)]}}function xu(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(r=+r)>=r&&++n}return n}function wu(t){return 0|t.length}function Su(t){return!(t>0)}function Tu(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function Cu(t,e){let n,i=0,r=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-r,r+=n/++i,o+=n*(e-r));else{let s=-1;for(let a of t)null!=(a=e(a,++s,t))&&(a=+a)>=a&&(n=a-r,r+=n/++i,o+=n*(a-r))}if(i>1)return o/(i-1)}function Eu(t,e){const n=Cu(t,e);return n?Math.sqrt(n):n}function Mu(t,e){let n,i;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(void 0===n?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class Au{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const r=e[i],o=t+r,s=Math.abs(t)<Math.abs(r)?t-(o-r):r-(o-t);s&&(e[n++]=s),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,r=this._n,o=0;if(r>0){for(o=t[--r];r>0&&(e=o,n=t[--r],o=e+n,i=n-(o-e),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(n=2*i,e=o+n,n==e-o&&(o=e))}return o}}class Ru extends Map{constructor(t,e=Du){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Iu(this,t))}has(t){return super.has(Iu(this,t))}set(t,e){return super.set(Pu(this,t),e)}delete(t){return super.delete(Fu(this,t))}}class ku extends Set{constructor(t,e=Du){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(Iu(this,t))}add(t){return super.add(Pu(this,t))}delete(t){return super.delete(Fu(this,t))}}function Iu({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Pu({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Fu({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Du(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Lu(t){return t}function Ou(t,...e){return ju(t,Lu,Lu,e)}function Nu(t,...e){return ju(t,Array.from,Lu,e)}function zu(t,e){for(let n=1,i=e.length;n<i;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function Gu(t,e,...n){return ju(t,Lu,e,n)}function Bu(t,e,...n){return ju(t,Array.from,e,n)}function Uu(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function ju(t,e,n,i){return function t(r,o){if(o>=i.length)return n(r);const s=new Ru,a=i[o++];let l=-1;for(const t of r){const e=a(t,++l,r),n=s.get(e);n?n.push(t):s.set(e,[t])}for(const[e,n]of s)s.set(e,t(n,o));return e(s)}(t,0)}function $u(t,e){return Array.from(e,(e=>t[e]))}function Hu(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const i=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),i.sort(((t,n)=>{for(const i of e){const e=Xu(i[t],i[n]);if(e)return e}}))):(n=t.map(n),i.sort(((t,e)=>Xu(n[t],n[e])))),$u(t,i)}return t.sort(Wu(n))}function Wu(t=ru){if(t===ru)return Xu;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||0===i?i:(0===t(n,n))-(0===t(e,e))}}function Xu(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var Yu=Array.prototype.slice;function Vu(t){return()=>t}var qu=Math.sqrt(50),Ku=Math.sqrt(10),Zu=Math.sqrt(2);function Ju(t,e,n){var i,r,o,s,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(s=Qu(t,e,n))||!isFinite(s))return[];if(s>0){let n=Math.round(t/s),i=Math.round(e/s);for(n*s<t&&++n,i*s>e&&--i,o=new Array(r=i-n+1);++a<r;)o[a]=(n+a)*s}else{s=-s;let n=Math.round(t*s),i=Math.round(e*s);for(n/s<t&&++n,i/s>e&&--i,o=new Array(r=i-n+1);++a<r;)o[a]=(n+a)/s}return i&&o.reverse(),o}function Qu(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=qu?10:o>=Ku?5:o>=Zu?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=qu?10:o>=Ku?5:o>=Zu?2:1)}function td(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=qu?r*=10:o>=Ku?r*=5:o>=Zu&&(r*=2),e<t?-r:r}function ed(t,e,n){let i;for(;;){const r=Qu(t,e,n);if(r===i||0===r||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function nd(t){return Math.ceil(Math.log(xu(t))/Math.LN2)+1}function id(){var t=Lu,e=Mu,n=nd;function i(i){Array.isArray(i)||(i=Array.from(i));var r,o,s,a=i.length,l=new Array(a);for(r=0;r<a;++r)l[r]=t(i[r],r,i);var c=e(l),h=c[0],u=c[1],d=n(l,h,u);if(!Array.isArray(d)){const t=u,n=+d;if(e===Mu&&([h,u]=ed(h,u,n)),(d=Ju(h,u,n))[0]<=h&&(s=Qu(h,u,n)),d[d.length-1]>=u)if(t>=u&&e===Mu){const t=Qu(h,u,n);isFinite(t)&&(t>0?u=(Math.floor(u/t)+1)*t:t<0&&(u=(Math.ceil(u*-t)+1)/-t))}else d.pop()}for(var f=d.length;d[0]<=h;)d.shift(),--f;for(;d[f-1]>u;)d.pop(),--f;var p,g=new Array(f+1);for(r=0;r<=f;++r)(p=g[r]=[]).x0=r>0?d[r-1]:h,p.x1=r<f?d[r]:u;if(isFinite(s)){if(s>0)for(r=0;r<a;++r)null!=(o=l[r])&&h<=o&&o<=u&&g[Math.min(f,Math.floor((o-h)/s))].push(i[r]);else if(s<0)for(r=0;r<a;++r)if(null!=(o=l[r])&&h<=o&&o<=u){const t=Math.floor((h-o)*s);g[Math.min(f,t+(d[t]<=o))].push(i[r])}}else for(r=0;r<a;++r)null!=(o=l[r])&&h<=o&&o<=u&&g[pu(d,o,0,f)].push(i[r]);return g}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:Vu(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:Vu([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Vu(Yu.call(t)):Vu(t),i):n},i}function rd(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function od(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,i=r);else for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o,i=r);return i}function sd(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function ad(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,i=r);else for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o,i=r);return i}function ld(t,e,n=0,i=t.length-1,r){for(r=void 0===r?Xu:Wu(r);i>n;){if(i-n>600){const o=i-n+1,s=e-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);ld(t,e,Math.max(n,Math.floor(e-s*l/o+c)),Math.min(i,Math.floor(e+(o-s)*l/o+c)),r)}const o=t[e];let s=n,a=i;for(cd(t,n,e),r(t[i],o)>0&&cd(t,n,i);s<a;){for(cd(t,s,a),++s,--a;r(t[s],o)<0;)++s;for(;r(t[a],o)>0;)--a}0===r(t[n],o)?cd(t,n,a):(++a,cd(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function cd(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function hd(t,e=ru){let n,i=!1;if(1===e.length){let r;for(const o of t){const t=e(o);(i?ru(t,r)>0:0===ru(t,t))&&(n=o,r=t,i=!0)}}else for(const r of t)(i?e(r,n)>0:0===e(r,r))&&(n=r,i=!0);return n}function ud(t,e,n){if(i=(t=Float64Array.from(cu(t,n))).length){if((e=+e)<=0||i<2)return sd(t);if(e>=1)return rd(t);var i,r=(i-1)*e,o=Math.floor(r),s=rd(ld(t,o).subarray(0,o+1));return s+(sd(t.subarray(o+1))-s)*(r-o)}}function dd(t,e,n=lu){if(i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(r-o)}}function fd(t,e,n){if(i=(t=Float64Array.from(cu(t,n))).length){if((e=+e)<=0||i<2)return ad(t);if(e>=1)return od(t);var i,r=Math.floor((i-1)*e),o=ld(Uint32Array.from(t,((t,e)=>e)),r,0,i-1,((e,n)=>Xu(t[e],t[n])));return hd(o.subarray(0,r+1),(e=>t[e]))}}function pd(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function gd(t,e){return[t,e]}function md(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}function _d(t,e=ru){if(1===e.length)return ad(t,e);let n,i=-1,r=-1;for(const o of t)++r,(i<0?0===e(o,o):e(o,n)<0)&&(n=o,i=r);return i}var vd=yd(Math.random);function yd(t){return function(e,n=0,i=e.length){let r=i-(n=+n);for(;r;){const i=t()*r--|0,o=e[r+n];e[r+n]=e[i+n],e[i+n]=o}return e}}function bd(t){if(!(r=t.length))return[];for(var e=-1,n=sd(t,xd),i=new Array(n);++e<n;)for(var r,o=-1,s=i[e]=new Array(r);++o<r;)s[o]=t[o][e];return i}function xd(t){return t.length}function wd(t){return t instanceof ku?t:new ku(t)}function Sd(t,e){const n=t[Symbol.iterator](),i=new Set;for(const t of e){const e=Td(t);if(i.has(e))continue;let r,o;for(;({value:r,done:o}=n.next());){if(o)return!1;const t=Td(r);if(i.add(t),Object.is(e,t))break}}return!0}function Td(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Cd(t){return t}function Ed(t){return"translate("+t+",0)"}function Md(t){return"translate(0,"+t+")"}function Ad(t){return e=>+t(e)}function Rd(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function kd(){return!this.__axis}function Id(t,e){var n=[],i=null,r=null,o=6,s=6,a=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,h=4===t||2===t?"x":"y",u=1===t||3===t?Ed:Md;function d(d){var f=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,p=null==r?e.tickFormat?e.tickFormat.apply(e,n):Cd:r,g=Math.max(o,0)+a,m=e.range(),_=+m[0]+l,v=+m[m.length-1]+l,y=(e.bandwidth?Rd:Ad)(e.copy(),l),b=d.selection?d.selection():d,x=b.selectAll(".domain").data([null]),w=b.selectAll(".tick").data(f,e).order(),S=w.exit(),T=w.enter().append("g").attr("class","tick"),C=w.select("line"),E=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(T),C=C.merge(T.append("line").attr("stroke","currentColor").attr(h+"2",c*o)),E=E.merge(T.append("text").attr("fill","currentColor").attr(h,c*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),d!==b&&(x=x.transition(d),w=w.transition(d),C=C.transition(d),E=E.transition(d),S=S.transition(d).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=y(t))?u(t+l):this.getAttribute("transform")})),T.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return u((e&&isFinite(e=e(t))?e:y(t))+l)}))),S.remove(),x.attr("d",4===t||2===t?s?"M"+c*s+","+_+"H"+l+"V"+v+"H"+c*s:"M"+l+","+_+"V"+v:s?"M"+_+","+c*s+"V"+l+"H"+v+"V"+c*s:"M"+_+","+l+"H"+v),w.attr("opacity",1).attr("transform",(function(t){return u(y(t)+l)})),C.attr(h+"2",c*o),E.attr(h,c*g).text(p),b.filter(kd).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=y}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),d):i&&i.slice()},d.tickFormat=function(t){return arguments.length?(r=t,d):r},d.tickSize=function(t){return arguments.length?(o=s=+t,d):o},d.tickSizeInner=function(t){return arguments.length?(o=+t,d):o},d.tickSizeOuter=function(t){return arguments.length?(s=+t,d):s},d.tickPadding=function(t){return arguments.length?(a=+t,d):a},d.offset=function(t){return arguments.length?(l=+t,d):l},d}var Pd={value:()=>{}};function Fd(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new Dd(i)}function Dd(t){this._=t}function Ld(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Od(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function Nd(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Pd,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}Dd.prototype=Fd.prototype={constructor:Dd,on:function(t,e){var n,i=this._,r=Ld(t+"",i),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=r[o]).type)i[n]=Nd(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Nd(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=r[o]).type)&&(n=Od(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dd(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var zd="http://www.w3.org/1999/xhtml",Gd={svg:"http://www.w3.org/2000/svg",xhtml:zd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bd(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Gd.hasOwnProperty(e)?{space:Gd[e],local:t}:t}function Ud(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===zd&&e.documentElement.namespaceURI===zd?e.createElement(t):e.createElementNS(n,t)}}function jd(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $d(t){var e=Bd(t);return(e.local?jd:Ud)(e)}function Hd(){}function Wd(t){return null==t?Hd:function(){return this.querySelector(t)}}function Xd(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Yd(){return[]}function Vd(t){return null==t?Yd:function(){return this.querySelectorAll(t)}}function qd(t){return function(){return this.matches(t)}}function Kd(t){return function(e){return e.matches(t)}}var Zd=Array.prototype.find;function Jd(){return this.firstElementChild}var Qd=Array.prototype.filter;function tf(){return Array.from(this.children)}function ef(t){return new Array(t.length)}function nf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function rf(t){return function(){return t}}function of(t,e,n,i,r,o){for(var s,a=0,l=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new nf(t,o[a]);for(;a<l;++a)(s=e[a])&&(r[a]=s)}function sf(t,e,n,i,r,o,s){var a,l,c,h=new Map,u=e.length,d=o.length,f=new Array(u);for(a=0;a<u;++a)(l=e[a])&&(f[a]=c=s.call(l,l.__data__,a,e)+"",h.has(c)?r[a]=l:h.set(c,l));for(a=0;a<d;++a)c=s.call(t,o[a],a,o)+"",(l=h.get(c))?(i[a]=l,l.__data__=o[a],h.delete(c)):n[a]=new nf(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&h.get(f[a])===l&&(r[a]=l)}function af(t){return t.__data__}function lf(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function cf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hf(t){return function(){this.removeAttribute(t)}}function uf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function df(t,e){return function(){this.setAttribute(t,e)}}function ff(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pf(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function gf(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function mf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _f(t){return function(){this.style.removeProperty(t)}}function vf(t,e,n){return function(){this.style.setProperty(t,e,n)}}function yf(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function bf(t,e){return t.style.getPropertyValue(e)||mf(t).getComputedStyle(t,null).getPropertyValue(e)}function xf(t){return function(){delete this[t]}}function wf(t,e){return function(){this[t]=e}}function Sf(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Tf(t){return t.trim().split(/^|\s+/)}function Cf(t){return t.classList||new Ef(t)}function Ef(t){this._node=t,this._names=Tf(t.getAttribute("class")||"")}function Mf(t,e){for(var n=Cf(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Af(t,e){for(var n=Cf(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Rf(t){return function(){Mf(this,t)}}function kf(t){return function(){Af(this,t)}}function If(t,e){return function(){(e.apply(this,arguments)?Mf:Af)(this,t)}}function Pf(){this.textContent=""}function Ff(t){return function(){this.textContent=t}}function Df(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Lf(){this.innerHTML=""}function Of(t){return function(){this.innerHTML=t}}function Nf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function zf(){this.nextSibling&&this.parentNode.appendChild(this)}function Gf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bf(){return null}function Uf(){var t=this.parentNode;t&&t.removeChild(this)}function jf(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $f(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Hf(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Wf(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function Xf(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Yf(t,e,n){var i=mf(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Vf(t,e){return function(){return Yf(this,t,e)}}function qf(t,e){return function(){return Yf(this,t,e.apply(this,arguments))}}nf.prototype={constructor:nf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ef.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Kf=[null];function Zf(t,e){this._groups=t,this._parents=e}function Jf(){return new Zf([[document.documentElement]],Kf)}function Qf(t){return"string"==typeof t?new Zf([[document.querySelector(t)]],[document.documentElement]):new Zf([[t]],Kf)}Zf.prototype=Jf.prototype={constructor:Zf,select:function(t){"function"!=typeof t&&(t=Wd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],l=a.length,c=i[r]=new Array(l),h=0;h<l;++h)(o=a[h])&&(s=t.call(o,o.__data__,h,a))&&("__data__"in o&&(s.__data__=o.__data__),c[h]=s);return new Zf(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Xd(t.apply(this,arguments))}}(t):Vd(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(i.push(t.call(s,s.__data__,c,a)),r.push(s));return new Zf(i,r)},selectChild:function(t){return this.select(null==t?Jd:function(t){return function(){return Zd.call(this.children,t)}}("function"==typeof t?t:Kd(t)))},selectChildren:function(t){return this.selectAll(null==t?tf:function(t){return function(){return Qd.call(this.children,t)}}("function"==typeof t?t:Kd(t)))},filter:function(t){"function"!=typeof t&&(t=qd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new Zf(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,af);var n=e?sf:of,i=this._parents,r=this._groups;"function"!=typeof t&&(t=rf(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var h=i[c],u=r[c],d=u.length,f=lf(t.call(h,h&&h.__data__,c,i)),p=f.length,g=a[c]=new Array(p),m=s[c]=new Array(p),_=l[c]=new Array(d);n(h,u,g,m,_,f,e);for(var v,y,b=0,x=0;b<p;++b)if(v=g[b]){for(b>=x&&(x=b+1);!(y=m[x])&&++x<p;);v._next=y||null}}return(s=new Zf(s,i))._enter=a,s._exit=l,s},enter:function(){return new Zf(this._enter||this._groups.map(ef),this._parents)},exit:function(){return new Zf(this._exit||this._groups.map(ef),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c,h=n[l],u=i[l],d=h.length,f=a[l]=new Array(d),p=0;p<d;++p)(c=h[p]||u[p])&&(f[p]=c);for(;l<r;++l)a[l]=n[l];return new Zf(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=cf);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],l=a.length,c=r[o]=new Array(l),h=0;h<l;++h)(s=a[h])&&(c[h]=s);c.sort(e)}return new Zf(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=Bd(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?uf:hf:"function"==typeof e?n.local?gf:pf:n.local?ff:df)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?_f:"function"==typeof e?yf:vf)(t,e,null==n?"":n)):bf(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?xf:"function"==typeof e?Sf:wf)(t,e)):this.node()[t]},classed:function(t,e){var n=Tf(t+"");if(arguments.length<2){for(var i=Cf(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?If:e?Rf:kf)(n,e))},text:function(t){return arguments.length?this.each(null==t?Pf:("function"==typeof t?Df:Ff)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Lf:("function"==typeof t?Nf:Of)(t)):this.node().innerHTML},raise:function(){return this.each(zf)},lower:function(){return this.each(Gf)},append:function(t){var e="function"==typeof t?t:$d(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:$d(t),i=null==e?Bf:"function"==typeof e?e:Wd(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Uf)},clone:function(t){return this.select(t?$f:jf)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=Hf(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?Xf:Wf,i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,h=a.length;c<h;++c)for(i=0,l=a[c];i<s;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?qf:Vf)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i)}};var tp=0;function ep(){return new np}function np(){this._="@"+(++tp).toString(36)}function ip(t){let e;for(;e=t.sourceEvent;)t=e;return t}function rp(t,e){if(t=ip(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}np.prototype=ep.prototype={constructor:np,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const op={passive:!1},sp={capture:!0,passive:!1};function ap(t){t.stopImmediatePropagation()}function lp(t){t.preventDefault(),t.stopImmediatePropagation()}function cp(t){var e=t.document.documentElement,n=Qf(t).on("dragstart.drag",lp,sp);"onselectstart"in e?n.on("selectstart.drag",lp,sp):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function hp(t,e){var n=t.document.documentElement,i=Qf(t).on("dragstart.drag",null);e&&(i.on("click.drag",lp,sp),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var up=t=>()=>t;function dp(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:c,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}function fp(t){return!t.ctrlKey&&!t.button}function pp(){return this.parentNode}function gp(t,e){return null==e?{x:t.x,y:t.y}:e}function mp(){return navigator.maxTouchPoints||"ontouchstart"in this}function _p(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function vp(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function yp(){}dp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var bp=1/.7,xp="\\s*([+-]?\\d+)\\s*",wp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tp=/^#([0-9a-f]{3,8})$/,Cp=new RegExp(`^rgb\\(${xp},${xp},${xp}\\)$`),Ep=new RegExp(`^rgb\\(${Sp},${Sp},${Sp}\\)$`),Mp=new RegExp(`^rgba\\(${xp},${xp},${xp},${wp}\\)$`),Ap=new RegExp(`^rgba\\(${Sp},${Sp},${Sp},${wp}\\)$`),Rp=new RegExp(`^hsl\\(${wp},${Sp},${Sp}\\)$`),kp=new RegExp(`^hsla\\(${wp},${Sp},${Sp},${wp}\\)$`),Ip={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Pp(){return this.rgb().formatHex()}function Fp(){return this.rgb().formatRgb()}function Dp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Tp.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Lp(e):3===n?new Gp(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Op(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Op(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Cp.exec(t))?new Gp(e[1],e[2],e[3],1):(e=Ep.exec(t))?new Gp(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Mp.exec(t))?Op(e[1],e[2],e[3],e[4]):(e=Ap.exec(t))?Op(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Rp.exec(t))?Wp(e[1],e[2]/100,e[3]/100,1):(e=kp.exec(t))?Wp(e[1],e[2]/100,e[3]/100,e[4]):Ip.hasOwnProperty(t)?Lp(Ip[t]):"transparent"===t?new Gp(NaN,NaN,NaN,0):null}function Lp(t){return new Gp(t>>16&255,t>>8&255,255&t,1)}function Op(t,e,n,i){return i<=0&&(t=e=n=NaN),new Gp(t,e,n,i)}function Np(t){return t instanceof yp||(t=Dp(t)),t?new Gp((t=t.rgb()).r,t.g,t.b,t.opacity):new Gp}function zp(t,e,n,i){return 1===arguments.length?Np(t):new Gp(t,e,n,null==i?1:i)}function Gp(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Bp(){return`#${Hp(this.r)}${Hp(this.g)}${Hp(this.b)}`}function Up(){const t=jp(this.opacity);return`${1===t?"rgb(":"rgba("}${$p(this.r)}, ${$p(this.g)}, ${$p(this.b)}${1===t?")":`, ${t})`}`}function jp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $p(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hp(t){return((t=$p(t))<16?"0":"")+t.toString(16)}function Wp(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vp(t,e,n,i)}function Xp(t){if(t instanceof Vp)return new Vp(t.h,t.s,t.l,t.opacity);if(t instanceof yp||(t=Dp(t)),!t)return new Vp;if(t instanceof Vp)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new Vp(s,a,l,t.opacity)}function Yp(t,e,n,i){return 1===arguments.length?Xp(t):new Vp(t,e,n,null==i?1:i)}function Vp(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function qp(t){return(t=(t||0)%360)<0?t+360:t}function Kp(t){return Math.max(0,Math.min(1,t||0))}function Zp(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}_p(yp,Dp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pp,formatHex:Pp,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Xp(this).formatHsl()},formatRgb:Fp,toString:Fp}),_p(Gp,zp,vp(yp,{brighter(t){return t=null==t?bp:Math.pow(bp,t),new Gp(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Gp(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gp($p(this.r),$p(this.g),$p(this.b),jp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bp,formatHex:Bp,formatHex8:function(){return`#${Hp(this.r)}${Hp(this.g)}${Hp(this.b)}${Hp(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Up,toString:Up})),_p(Vp,Yp,vp(yp,{brighter(t){return t=null==t?bp:Math.pow(bp,t),new Vp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Vp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Gp(Zp(t>=240?t-240:t+120,r,i),Zp(t,r,i),Zp(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Vp(qp(this.h),Kp(this.s),Kp(this.l),jp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jp(this.opacity);return`${1===t?"hsl(":"hsla("}${qp(this.h)}, ${100*Kp(this.s)}%, ${100*Kp(this.l)}%${1===t?")":`, ${t})`}`}}));const Jp=Math.PI/180,Qp=180/Math.PI,tg=4/29,eg=6/29,ng=3*eg*eg;function ig(t){if(t instanceof og)return new og(t.l,t.a,t.b,t.opacity);if(t instanceof dg)return fg(t);t instanceof Gp||(t=Np(t));var e,n,i=cg(t.r),r=cg(t.g),o=cg(t.b),s=sg((.2225045*i+.7168786*r+.0606169*o)/1);return i===r&&r===o?e=n=s:(e=sg((.4360747*i+.3850649*r+.1430804*o)/.96422),n=sg((.0139322*i+.0971045*r+.7141733*o)/.82521)),new og(116*s-16,500*(e-s),200*(s-n),t.opacity)}function rg(t,e,n,i){return 1===arguments.length?ig(t):new og(t,e,n,null==i?1:i)}function og(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function sg(t){return t>.008856451679035631?Math.pow(t,1/3):t/ng+tg}function ag(t){return t>eg?t*t*t:ng*(t-tg)}function lg(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function cg(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function hg(t){if(t instanceof dg)return new dg(t.h,t.c,t.l,t.opacity);if(t instanceof og||(t=ig(t)),0===t.a&&0===t.b)return new dg(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Qp;return new dg(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ug(t,e,n,i){return 1===arguments.length?hg(t):new dg(t,e,n,null==i?1:i)}function dg(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function fg(t){if(isNaN(t.h))return new og(t.l,0,0,t.opacity);var e=t.h*Jp;return new og(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}_p(og,rg,vp(yp,{brighter(t){return new og(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new og(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Gp(lg(3.1338561*(e=.96422*ag(e))-1.6168667*(t=1*ag(t))-.4906146*(n=.82521*ag(n))),lg(-.9787684*e+1.9161415*t+.033454*n),lg(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),_p(dg,ug,vp(yp,{brighter(t){return new dg(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new dg(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return fg(this).rgb()}}));var pg=-.14861,gg=-.29227,mg=-.90649,_g=1.97294,vg=_g*mg,yg=1.78277*_g,bg=1.78277*gg-mg*pg;function xg(t){if(t instanceof Sg)return new Sg(t.h,t.s,t.l,t.opacity);t instanceof Gp||(t=Np(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(bg*i+vg*e-yg*n)/(bg+vg-yg),o=i-r,s=(_g*(n-r)-gg*o)/mg,a=Math.sqrt(s*s+o*o)/(_g*r*(1-r)),l=a?Math.atan2(s,o)*Qp-120:NaN;return new Sg(l<0?l+360:l,a,r,t.opacity)}function wg(t,e,n,i){return 1===arguments.length?xg(t):new Sg(t,e,n,null==i?1:i)}function Sg(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Tg(t,e,n,i,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*i+s*r)/6}function Cg(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],s=i>0?t[i-1]:2*r-o,a=i<e-1?t[i+2]:2*o-r;return Tg((n-i/e)*e,s,r,o,a)}}function Eg(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],a=t[(i+2)%e];return Tg((n-i/e)*e,r,o,s,a)}}_p(Sg,wg,vp(yp,{brighter(t){return t=null==t?bp:Math.pow(bp,t),new Sg(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Sg(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Jp,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Gp(255*(e+n*(pg*i+1.78277*r)),255*(e+n*(gg*i+mg*r)),255*(e+n*(_g*i)),this.opacity)}}));var Mg=t=>()=>t;function Ag(t,e){return function(n){return t+n*e}}function Rg(t,e){var n=e-t;return n?Ag(t,n>180||n<-180?n-360*Math.round(n/360):n):Mg(isNaN(t)?e:t)}function kg(t){return 1==(t=+t)?Ig:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Mg(isNaN(e)?n:e)}}function Ig(t,e){var n=e-t;return n?Ag(t,n):Mg(isNaN(t)?e:t)}var Pg=function t(e){var n=kg(e);function i(t,e){var i=n((t=zp(t)).r,(e=zp(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=Ig(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function Fg(t){return function(e){var n,i,r=e.length,o=new Array(r),s=new Array(r),a=new Array(r);for(n=0;n<r;++n)i=zp(e[n]),o[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return o=t(o),s=t(s),a=t(a),i.opacity=1,function(t){return i.r=o(t),i.g=s(t),i.b=a(t),i+""}}}var Dg=Fg(Cg),Lg=Fg(Eg);function Og(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function Ng(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zg(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=Wg(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=o[n](t);return s}}function Gg(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Bg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ug(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Wg(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var jg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$g=new RegExp(jg.source,"g");function Hg(t,e){var n,i,r,o=jg.lastIndex=$g.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=jg.exec(t))&&(i=$g.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Bg(n,i)})),o=$g.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}function Wg(t,e){var n,i=typeof e;return null==e||"boolean"===i?Mg(e):("number"===i?Bg:"string"===i?(n=Dp(e))?(e=n,Pg):Hg:e instanceof Dp?Pg:e instanceof Date?Gg:Ng(e)?Og:Array.isArray(e)?zg:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ug:Bg)(t,e)}function Xg(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Yg,Vg=180/Math.PI,qg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kg(t,e,n,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Vg,skewX:Math.atan(l)*Vg,scaleX:s,scaleY:a}}function Zg(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],l=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:Bg(t,r)},{i:l-2,x:Bg(i,o)})}else(r||o)&&s.push("translate("+r+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Bg(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,s.rotate,a,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Bg(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,s.skewX,a,l),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Bg(t,n)},{i:a-2,x:Bg(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(t){for(var e,n=-1,i=l.length;++n<i;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var Jg=Zg((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?qg:Kg(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Qg=Zg((function(t){return null==t?qg:(Yg||(Yg=document.createElementNS("http://www.w3.org/2000/svg","g")),Yg.setAttribute("transform",t),(t=Yg.transform.baseVal.consolidate())?Kg((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):qg)}),", ",")",")");function tm(t){return((t=Math.exp(t))+1/t)/2}var em=function t(e,n,i){function r(t,r){var o,s,a=t[0],l=t[1],c=t[2],h=r[0],u=r[1],d=r[2],f=h-a,p=u-l,g=f*f+p*p;if(g<1e-12)s=Math.log(d/c)/e,o=function(t){return[a+t*f,l+t*p,c*Math.exp(e*t*s)]};else{var m=Math.sqrt(g),_=(d*d-c*c+i*g)/(2*c*n*m),v=(d*d-c*c-i*g)/(2*d*n*m),y=Math.log(Math.sqrt(_*_+1)-_),b=Math.log(Math.sqrt(v*v+1)-v);s=(b-y)/e,o=function(t){var i=t*s,r=tm(y),o=c/(n*m)*(r*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*i+y)-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[a+o*f,l+o*p,c*r/tm(e*i+y)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4);function nm(t){return function(e,n){var i=t((e=Yp(e)).h,(n=Yp(n)).h),r=Ig(e.s,n.s),o=Ig(e.l,n.l),s=Ig(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=o(t),e.opacity=s(t),e+""}}}var im=nm(Rg),rm=nm(Ig);function om(t){return function(e,n){var i=t((e=ug(e)).h,(n=ug(n)).h),r=Ig(e.c,n.c),o=Ig(e.l,n.l),s=Ig(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=o(t),e.opacity=s(t),e+""}}}var sm=om(Rg),am=om(Ig);function lm(t){return function e(n){function i(e,i){var r=t((e=wg(e)).h,(i=wg(i)).h),o=Ig(e.s,i.s),s=Ig(e.l,i.l),a=Ig(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,i.gamma=e,i}(1)}var cm=lm(Rg),hm=lm(Ig);function um(t,e){void 0===e&&(e=t,t=Wg);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return o[e](t-e)}}var dm,fm,pm=0,gm=0,mm=0,_m=0,vm=0,ym=0,bm="object"==typeof performance&&performance.now?performance:Date,xm="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wm(){return vm||(xm(Sm),vm=bm.now()+ym)}function Sm(){vm=0}function Tm(){this._call=this._time=this._next=null}function Cm(t,e,n){var i=new Tm;return i.restart(t,e,n),i}function Em(){wm(),++pm;for(var t,e=dm;e;)(t=vm-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pm}function Mm(){vm=(_m=bm.now())+ym,pm=gm=0;try{Em()}finally{pm=0,function(){var t,e,n=dm,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:dm=e);fm=t,Rm(i)}(),vm=0}}function Am(){var t=bm.now(),e=t-_m;e>1e3&&(ym-=e,_m=t)}function Rm(t){pm||(gm&&(gm=clearTimeout(gm)),t-vm>24?(t<1/0&&(gm=setTimeout(Mm,t-bm.now()-ym)),mm&&(mm=clearInterval(mm))):(mm||(_m=bm.now(),mm=setInterval(Am,1e3)),pm=1,xm(Mm)))}function km(t,e,n){var i=new Tm;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}Tm.prototype=Cm.prototype={constructor:Tm,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?wm():+n)+(null==e?0:+e),this._next||fm===this||(fm?fm._next=this:dm=this,fm=this),this._call=t,this._time=n,Rm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rm())}};var Im=Fd("start","end","cancel","interrupt"),Pm=[];function Fm(t,e,n,i,r,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(o){var c,h,u,d;if(1!==n.state)return l();for(c in r)if((d=r[c]).name===n.name){if(3===d.state)return km(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(km((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(u=n.tween.length),c=0,h=-1;c<u;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=i.length;++o<s;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Cm(o,0,n.time)}(t,n,{name:e,index:i,group:r,on:Im,tween:Pm,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Dm(t,e){var n=Om(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Lm(t,e){var n=Om(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Om(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Nm(t,e){var n,i,r,o=t.__transition,s=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete t.__transition}}function zm(t,e){var n,i;return function(){var r=Lm(this,t),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}r.tween=i}}function Gm(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Lm(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function Bm(t,e,n){var i=t._id;return t.each((function(){var t=Lm(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Om(t,i).value[e]}}function Um(t,e){var n;return("number"==typeof e?Bg:e instanceof Dp?Pg:(n=Dp(e))?(e=n,Pg):Hg)(t,e)}function jm(t){return function(){this.removeAttribute(t)}}function $m(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hm(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===i?r:r=e(i=s,n)}}function Wm(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?r:r=e(i=s,n)}}function Xm(t,e,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,l));this.removeAttribute(t)}}function Ym(t,e,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,l));this.removeAttributeNS(t.space,t.local)}}function Vm(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function qm(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Km(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&qm(t,r)),n}return r._value=e,r}function Zm(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Vm(t,r)),n}return r._value=e,r}function Jm(t,e){return function(){Dm(this,t).delay=+e.apply(this,arguments)}}function Qm(t,e){return e=+e,function(){Dm(this,t).delay=e}}function t_(t,e){return function(){Lm(this,t).duration=+e.apply(this,arguments)}}function e_(t,e){return e=+e,function(){Lm(this,t).duration=e}}function n_(t,e){if("function"!=typeof e)throw new Error;return function(){Lm(this,t).ease=e}}function i_(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Dm:Lm;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}var r_=Jf.prototype.constructor;function o_(t){return function(){this.style.removeProperty(t)}}function s_(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function a_(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&s_(t,o,n)),i}return o._value=e,o}function l_(t){return function(e){this.textContent=t.call(this,e)}}function c_(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&l_(i)),e}return i._value=t,i}var h_=0;function u_(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function d_(t){return Jf().transition(t)}function f_(){return++h_}var p_=Jf.prototype;u_.prototype=d_.prototype={constructor:u_,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Wd(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,l,c=i[s],h=c.length,u=o[s]=new Array(h),d=0;d<h;++d)(a=c[d])&&(l=t.call(a,a.__data__,d,c))&&("__data__"in a&&(l.__data__=a.__data__),u[d]=l,Fm(u[d],e,n,d,u,Om(a,n)));return new u_(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Vd(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l,c=i[a],h=c.length,u=0;u<h;++u)if(l=c[u]){for(var d,f=t.call(l,l.__data__,u,c),p=Om(l,n),g=0,m=f.length;g<m;++g)(d=f[g])&&Fm(d,e,n,g,f,p);o.push(f),s.push(l)}return new u_(o,s,e,n)},selectChild:p_.selectChild,selectChildren:p_.selectChildren,filter:function(t){"function"!=typeof t&&(t=qd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new u_(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l,c=e[a],h=n[a],u=c.length,d=s[a]=new Array(u),f=0;f<u;++f)(l=c[f]||h[f])&&(d[f]=l);for(;a<i;++a)s[a]=e[a];return new u_(s,this._parents,this._name,this._id)},selection:function(){return new r_(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=f_(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var h=Om(s,e);Fm(s,t,n,c,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new u_(i,this._parents,t,n)},call:p_.call,nodes:p_.nodes,node:p_.node,size:p_.size,empty:p_.empty,each:p_.each,on:function(t,e){var n=this._id;return arguments.length<2?Om(this.node(),n).on.on(t):this.each(i_(n,t,e))},attr:function(t,e){var n=Bd(t),i="transform"===n?Qg:Um;return this.attrTween(t,"function"==typeof e?(n.local?Ym:Xm)(n,i,Bm(this,"attr."+t,e)):null==e?(n.local?$m:jm)(n):(n.local?Wm:Hm)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=Bd(t);return this.tween(n,(i.local?Km:Zm)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Jg:Um;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=bf(this,t),s=(this.style.removeProperty(t),bf(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}(t,i)).on("end.style."+t,o_(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var s=bf(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=bf(this,t)),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a))}}(t,i,Bm(this,"style."+t,e))).each(function(t,e){var n,i,r,o,s="style."+e,a="end."+s;return function(){var l=Lm(this,t),c=l.on,h=null==l.value[s]?o||(o=o_(e)):void 0;c===n&&r===h||(i=(n=c).copy()).on(a,r=h),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var s=bf(this,t);return s===o?null:s===i?r:r=e(i=s,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,a_(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Bm(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,c_(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Om(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?zm:Gm)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Jm:Qm)(e,t)):Om(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?t_:e_)(e,t)):Om(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(n_(e,t)):Om(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Lm(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0==--r&&o()}};n.each((function(){var n=Lm(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===r&&o()}))},[Symbol.iterator]:p_[Symbol.iterator]};function g_(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function m_(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var __=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),v_=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),y_=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),b_=Math.PI,x_=b_/2;function w_(t){return(1-Math.cos(b_*t))/2}function S_(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function T_(t){return((t*=2)<=1?S_(1-t):2-S_(t-1))/2}function C_(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var E_=4/11,M_=7.5625;function A_(t){return(t=+t)<E_?M_*t*t:t<.7272727272727273?M_*(t-=.5454545454545454)*t+.75:t<.9090909090909091?M_*(t-=.8181818181818182)*t+.9375:M_*(t-=.9545454545454546)*t+.984375}var R_=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(1.70158),k_=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(1.70158),I_=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),P_=2*Math.PI,F_=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=P_);function r(t){return e*S_(- --t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*P_)},r.period=function(n){return t(e,n)},r}(1,.3),D_=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=P_);function r(t){return 1-e*S_(t=+t)*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*P_)},r.period=function(n){return t(e,n)},r}(1,.3),L_=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=P_);function r(t){return((t=2*t-1)<0?e*S_(-t)*Math.sin((i-t)/n):2-e*S_(t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*P_)},r.period=function(n){return t(e,n)},r}(1,.3),O_={time:null,delay:0,duration:250,ease:m_};function N_(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Jf.prototype.interrupt=function(t){return this.each((function(){Nm(this,t)}))},Jf.prototype.transition=function(t){var e,n;t instanceof u_?(e=t._id,t=t._name):(e=f_(),(n=O_).time=wm(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,c=0;c<l;++c)(s=a[c])&&Fm(s,t,e,c,a,n||N_(s,e));return new u_(i,this._parents,t,e)};var z_=[null];var G_=t=>()=>t;function B_(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function U_(t){t.stopImmediatePropagation()}function j_(t){t.preventDefault(),t.stopImmediatePropagation()}var $_={name:"drag"},H_={name:"space"},W_={name:"handle"},X_={name:"center"};const{abs:Y_,max:V_,min:q_}=Math;function K_(t){return[+t[0],+t[1]]}function Z_(t){return[K_(t[0]),K_(t[1])]}var J_={name:"x",handles:["w","e"].map(sv),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Q_={name:"y",handles:["n","s"].map(sv),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},tv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(sv),input:function(t){return null==t?null:Z_(t)},output:function(t){return t}},ev={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},nv={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},iv={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},rv={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ov={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function sv(t){return{type:t}}function av(t){return!t.ctrlKey&&!t.button}function lv(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function cv(){return navigator.maxTouchPoints||"ontouchstart"in this}function hv(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function uv(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function dv(t){var e,n=lv,i=av,r=cv,o=!0,s=Fd("start","brush","end"),a=6;function l(e){var n=e.property("__brush",g).selectAll(".overlay").data([sv("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ev.overlay).merge(n).each((function(){var t=hv(this).extent;Qf(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([sv("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ev.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return ev[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=Qf(this),e=hv(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new u(t,e,n):i}function u(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function d(n){if((!e||n.touches)&&i.apply(this,arguments)){var r,s,a,l,u,d,f,p,g,m,_,v=this,y=n.target.__data__.type,b="selection"===(o&&n.metaKey?y="overlay":y)?$_:o&&n.altKey?X_:W_,x=t===Q_?null:rv[y],w=t===J_?null:ov[y],S=hv(v),T=S.extent,C=S.selection,E=T[0][0],M=T[0][1],A=T[1][0],R=T[1][1],k=0,I=0,P=x&&w&&o&&n.shiftKey,F=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=rp(t,v)).point0=t.slice(),t.identifier=e,t}));Nm(v);var D=h(v,arguments,!0).beforestart();if("overlay"===y){C&&(g=!0);const e=[F[0],F[1]||F[0]];S.selection=C=[[r=t===Q_?E:q_(e[0][0],e[1][0]),a=t===J_?M:q_(e[0][1],e[1][1])],[u=t===Q_?A:V_(e[0][0],e[1][0]),f=t===J_?R:V_(e[0][1],e[1][1])]],F.length>1&&G(n)}else r=C[0][0],a=C[0][1],u=C[1][0],f=C[1][1];s=r,l=a,d=u,p=f;var L=Qf(v).attr("pointer-events","none"),O=L.selectAll(".overlay").attr("cursor",ev[y]);if(n.touches)D.moved=z,D.ended=B;else{var N=Qf(n.view).on("mousemove.brush",z,!0).on("mouseup.brush",B,!0);o&&N.on("keydown.brush",U,!0).on("keyup.brush",j,!0),cp(n.view)}c.call(v),D.start(n,b.name)}function z(t){for(const e of t.changedTouches||[t])for(const t of F)t.identifier===e.identifier&&(t.cur=rp(e,v));if(P&&!m&&!_&&1===F.length){const t=F[0];Y_(t.cur[0]-t[0])>Y_(t.cur[1]-t[1])?_=!0:m=!0}for(const t of F)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);g=!0,j_(t),G(t)}function G(t){const e=F[0],n=e.point0;var i;switch(k=e[0]-n[0],I=e[1]-n[1],b){case H_:case $_:x&&(k=V_(E-r,q_(A-u,k)),s=r+k,d=u+k),w&&(I=V_(M-a,q_(R-f,I)),l=a+I,p=f+I);break;case W_:F[1]?(x&&(s=V_(E,q_(A,F[0][0])),d=V_(E,q_(A,F[1][0])),x=1),w&&(l=V_(M,q_(R,F[0][1])),p=V_(M,q_(R,F[1][1])),w=1)):(x<0?(k=V_(E-r,q_(A-r,k)),s=r+k,d=u):x>0&&(k=V_(E-u,q_(A-u,k)),s=r,d=u+k),w<0?(I=V_(M-a,q_(R-a,I)),l=a+I,p=f):w>0&&(I=V_(M-f,q_(R-f,I)),l=a,p=f+I));break;case X_:x&&(s=V_(E,q_(A,r-k*x)),d=V_(E,q_(A,u+k*x))),w&&(l=V_(M,q_(R,a-I*w)),p=V_(M,q_(R,f+I*w)))}d<s&&(x*=-1,i=r,r=u,u=i,i=s,s=d,d=i,y in nv&&O.attr("cursor",ev[y=nv[y]])),p<l&&(w*=-1,i=a,a=f,f=i,i=l,l=p,p=i,y in iv&&O.attr("cursor",ev[y=iv[y]])),S.selection&&(C=S.selection),m&&(s=C[0][0],d=C[1][0]),_&&(l=C[0][1],p=C[1][1]),C[0][0]===s&&C[0][1]===l&&C[1][0]===d&&C[1][1]===p||(S.selection=[[s,l],[d,p]],c.call(v),D.brush(t,b.name))}function B(t){if(U_(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else hp(t.view,g),N.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);L.attr("pointer-events","all"),O.attr("cursor",ev.overlay),S.selection&&(C=S.selection),uv(C)&&(S.selection=null,c.call(v)),D.end(t,b.name)}function U(t){switch(t.keyCode){case 16:P=x&&w;break;case 18:b===W_&&(x&&(u=d-k*x,r=s+k*x),w&&(f=p-I*w,a=l+I*w),b=X_,G(t));break;case 32:b!==W_&&b!==X_||(x<0?u=d-k:x>0&&(r=s-k),w<0?f=p-I:w>0&&(a=l-I),b=H_,O.attr("cursor",ev.selection),G(t));break;default:return}j_(t)}function j(t){switch(t.keyCode){case 16:P&&(m=_=P=!1,G(t));break;case 18:b===X_&&(x<0?u=d:x>0&&(r=s),w<0?f=p:w>0&&(a=l),b=W_,G(t));break;case 32:b===H_&&(t.altKey?(x&&(u=d-k*x,r=s+k*x),w&&(f=p-I*w,a=l+I*w),b=X_):(x<0?u=d:x>0&&(r=s),w<0?f=p:w>0&&(a=l),b=W_),O.attr("cursor",ev[y]),G(t));break;default:return}j_(t)}}function f(t){h(this,arguments).moved(t)}function p(t){h(this,arguments).ended(t)}function g(){var e=this.__brush||{selection:null};return e.extent=Z_(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n,i){e.tween?e.on("start.brush",(function(t){h(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){h(this,arguments).end(t)})).tween("brush",(function(){var e=this,i=e.__brush,r=h(e,arguments),o=i.selection,s=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),a=Wg(o,s);function l(t){i.selection=1===t&&null===s?null:a(t),c.call(e),r.brush()}return null!==o&&null!==s?l:l(1)})):e.each((function(){var e=this,r=arguments,o=e.__brush,s=t.input("function"==typeof n?n.apply(e,r):n,o.extent),a=h(e,r).beforestart();Nm(e),o.selection=null===s?null:s,c.call(e),a.start(i).brush(i).end(i)}))},l.clear=function(t,e){l.move(t,null,e)},u.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,i){var r=Qf(this.that).datum();s.call(e,this.that,new B_(e,{sourceEvent:n,target:l,selection:t.output(this.state.selection),mode:i,dispatch:s}),r)}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:G_(Z_(t)),l):n},l.filter=function(t){return arguments.length?(i="function"==typeof t?t:G_(!!t),l):i},l.touchable=function(t){return arguments.length?(r="function"==typeof t?t:G_(!!t),l):r},l.handleSize=function(t){return arguments.length?(a=+t,l):a},l.keyModifiers=function(t){return arguments.length?(o=!!t,l):o},l.on=function(){var t=s.on.apply(s,arguments);return t===s?l:t},l}var fv=Math.abs,pv=Math.cos,gv=Math.sin,mv=Math.PI,_v=mv/2,vv=2*mv,yv=Math.max;function bv(t,e){return Array.from({length:e-t},((e,n)=>t+n))}function xv(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function wv(t,e){var n=0,i=null,r=null,o=null;function s(s){var a,l=s.length,c=new Array(l),h=bv(0,l),u=new Array(l*l),d=new Array(l),f=0;s=Float64Array.from({length:l*l},e?(t,e)=>s[e%l][e/l|0]:(t,e)=>s[e/l|0][e%l]);for(let e=0;e<l;++e){let n=0;for(let i=0;i<l;++i)n+=s[e*l+i]+t*s[i*l+e];f+=c[e]=n}a=(f=yv(0,vv-n*l)/f)?n:vv/l;{let e=0;i&&h.sort(((t,e)=>i(c[t],c[e])));for(const n of h){const i=e;if(t){const t=bv(1+~l,l).filter((t=>t<0?s[~t*l+n]:s[n*l+t]));r&&t.sort(((t,e)=>r(t<0?-s[~t*l+n]:s[n*l+t],e<0?-s[~e*l+n]:s[n*l+e])));for(const i of t)if(i<0){(u[~i*l+n]||(u[~i*l+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=s[~i*l+n]*f,value:s[~i*l+n]}}else{(u[n*l+i]||(u[n*l+i]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=s[n*l+i]*f,value:s[n*l+i]}}d[n]={index:n,startAngle:i,endAngle:e,value:c[n]}}else{const t=bv(0,l).filter((t=>s[n*l+t]||s[t*l+n]));r&&t.sort(((t,e)=>r(s[n*l+t],s[n*l+e])));for(const i of t){let t;if(n<i?(t=u[n*l+i]||(u[n*l+i]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=s[n*l+i]*f,value:s[n*l+i]}):(t=u[i*l+n]||(u[i*l+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=s[n*l+i]*f,value:s[n*l+i]},n===i&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}d[n]={index:n,startAngle:i,endAngle:e,value:c[n]}}e+=a}}return(u=Object.values(u)).groups=d,o?u.sort(o):u}return s.padAngle=function(t){return arguments.length?(n=yv(0,t),s):n},s.sortGroups=function(t){return arguments.length?(i=t,s):i},s.sortSubgroups=function(t){return arguments.length?(r=t,s):r},s.sortChords=function(t){return arguments.length?(null==t?o=null:(o=xv(t))._=t,s):o&&o._},s}const Sv=Math.PI,Tv=2*Sv,Cv=Tv-1e-6;function Ev(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Mv(){return new Ev}Ev.prototype=Mv.prototype={constructor:Ev,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,s=this._y1,a=n-t,l=i-e,c=o-t,h=s-e,u=c*c+h*h;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>1e-6)if(Math.abs(h*a-l*c)>1e-6&&r){var d=n-o,f=i-s,p=a*a+l*l,g=d*d+f*f,m=Math.sqrt(p),_=Math.sqrt(u),v=r*Math.tan((Sv-Math.acos((p+u-g)/(2*m*_)))/2),y=v/_,b=v/m;Math.abs(y-1)>1e-6&&(this._+="L"+(t+y*c)+","+(e+y*h)),this._+="A"+r+","+r+",0,0,"+ +(h*d>c*f)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(i),a=n*Math.sin(i),l=t+s,c=e+a,h=1^o,u=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),n&&(u<0&&(u=u%Tv+Tv),u>Cv?this._+="A"+n+","+n+",0,1,"+h+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=c):u>1e-6&&(this._+="A"+n+","+n+",0,"+ +(u>=Sv)+","+h+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Av=Array.prototype.slice;function Rv(t){return function(){return t}}function kv(t){return t.source}function Iv(t){return t.target}function Pv(t){return t.radius}function Fv(t){return t.startAngle}function Dv(t){return t.endAngle}function Lv(){return 0}function Ov(){return 10}function Nv(t){var e=kv,n=Iv,i=Pv,r=Pv,o=Fv,s=Dv,a=Lv,l=null;function c(){var c,h=e.apply(this,arguments),u=n.apply(this,arguments),d=a.apply(this,arguments)/2,f=Av.call(arguments),p=+i.apply(this,(f[0]=h,f)),g=o.apply(this,f)-_v,m=s.apply(this,f)-_v,_=+r.apply(this,(f[0]=u,f)),v=o.apply(this,f)-_v,y=s.apply(this,f)-_v;if(l||(l=c=Mv()),d>1e-12&&(fv(m-g)>2*d+1e-12?m>g?(g+=d,m-=d):(g-=d,m+=d):g=m=(g+m)/2,fv(y-v)>2*d+1e-12?y>v?(v+=d,y-=d):(v-=d,y+=d):v=y=(v+y)/2),l.moveTo(p*pv(g),p*gv(g)),l.arc(0,0,p,g,m),g!==v||m!==y)if(t){var b=+t.apply(this,arguments),x=_-b,w=(v+y)/2;l.quadraticCurveTo(0,0,x*pv(v),x*gv(v)),l.lineTo(_*pv(w),_*gv(w)),l.lineTo(x*pv(y),x*gv(y))}else l.quadraticCurveTo(0,0,_*pv(v),_*gv(v)),l.arc(0,0,_,v,y);if(l.quadraticCurveTo(0,0,p*pv(g),p*gv(g)),l.closePath(),c)return l=null,c+""||null}return t&&(c.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:Rv(+e),c):t}),c.radius=function(t){return arguments.length?(i=r="function"==typeof t?t:Rv(+t),c):i},c.sourceRadius=function(t){return arguments.length?(i="function"==typeof t?t:Rv(+t),c):i},c.targetRadius=function(t){return arguments.length?(r="function"==typeof t?t:Rv(+t),c):r},c.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Rv(+t),c):o},c.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:Rv(+t),c):s},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Rv(+t),c):a},c.source=function(t){return arguments.length?(e=t,c):e},c.target=function(t){return arguments.length?(n=t,c):n},c.context=function(t){return arguments.length?(l=null==t?null:t,c):l},c}var zv=Array.prototype.slice;function Gv(t,e){return t-e}var Bv=t=>()=>t;function Uv(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=jv(t,e[i]))return n;return 0}function jv(t,e){for(var n=e[0],i=e[1],r=-1,o=0,s=t.length,a=s-1;o<s;a=o++){var l=t[o],c=l[0],h=l[1],u=t[a],d=u[0],f=u[1];if($v(l,u,e))return 0;h>i!=f>i&&n<(d-c)*(i-h)/(f-h)+c&&(r=-r)}return r}function $v(t,e,n){var i;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&function(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}(t[i=+(t[0]===e[0])],n[i],e[i])}function Hv(){}var Wv=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Xv(){var t=1,e=1,n=nd,i=a;function r(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Gv);else{const n=Mu(t),i=td(n[0],n[1],e);e=Ju(Math.floor(n[0]/i)*i,Math.floor(n[1]/i-1)*i,e)}return e.map((e=>o(t,e)))}function o(n,r){var o=[],a=[];return function(n,i,r){var o,a,l,c,h,u,d=new Array,f=new Array;o=a=-1,c=n[0]>=i,Wv[c<<1].forEach(p);for(;++o<t-1;)l=c,c=n[o+1]>=i,Wv[l|c<<1].forEach(p);Wv[c<<0].forEach(p);for(;++a<e-1;){for(o=-1,c=n[a*t+t]>=i,h=n[a*t]>=i,Wv[c<<1|h<<2].forEach(p);++o<t-1;)l=c,c=n[a*t+t+o+1]>=i,u=h,h=n[a*t+o+1]>=i,Wv[l|c<<1|h<<2|u<<3].forEach(p);Wv[c|h<<3].forEach(p)}o=-1,h=n[a*t]>=i,Wv[h<<2].forEach(p);for(;++o<t-1;)u=h,h=n[a*t+o+1]>=i,Wv[h<<2|u<<3].forEach(p);function p(t){var e,n,i=[t[0][0]+o,t[0][1]+a],l=[t[1][0]+o,t[1][1]+a],c=s(i),h=s(l);(e=f[c])?(n=d[h])?(delete f[e.end],delete d[n.start],e===n?(e.ring.push(l),r(e.ring)):d[e.start]=f[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete f[e.end],e.ring.push(l),f[e.end=h]=e):(e=d[h])?(n=f[c])?(delete d[e.start],delete f[n.end],e===n?(e.ring.push(l),r(e.ring)):d[n.start]=f[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(i),d[e.start=c]=e):d[c]=f[h]={start:c,end:h,ring:[i,l]}}Wv[h<<3].forEach(p)}(n,r,(function(t){i(t,n,r),function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)>0?o.push([t]):a.push(t)})),a.forEach((function(t){for(var e,n=0,i=o.length;n<i;++n)if(-1!==Uv((e=o[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:r,coordinates:o}}function s(e){return 2*e[0]+e[1]*(t+1)*4}function a(n,i,r){n.forEach((function(n){var o,s=n[0],a=n[1],l=0|s,c=0|a,h=i[c*t+l];s>0&&s<t&&l===s&&(o=i[c*t+l-1],n[0]=s+(r-o)/(h-o)-.5),a>0&&a<e&&c===a&&(o=i[(c-1)*t+l],n[1]=a+(r-o)/(h-o)-.5)}))}return r.contour=o,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),o=Math.floor(n[1]);if(!(i>=0&&o>=0))throw new Error("invalid size");return t=i,e=o,r},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Bv(zv.call(t)):Bv(t),r):n},r.smooth=function(t){return arguments.length?(i=t?a:Hv,r):i===a},r}function Yv(t){return t[0]}function Vv(t){return t[1]}function qv(){return 1}function Kv(t,e,n,i,r){let o,s,a,l,c=e[0],h=i[0],u=0,d=0;h>c==h>-c?(o=c,c=e[++u]):(o=h,h=i[++d]);let f=0;if(u<t&&d<n)for(h>c==h>-c?(s=c+o,a=o-(s-c),c=e[++u]):(s=h+o,a=o-(s-h),h=i[++d]),o=s,0!==a&&(r[f++]=a);u<t&&d<n;)h>c==h>-c?(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=e[++u]):(s=o+h,l=s-o,a=o-(s-l)+(h-l),h=i[++d]),o=s,0!==a&&(r[f++]=a);for(;u<t;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=e[++u],o=s,0!==a&&(r[f++]=a);for(;d<n;)s=o+h,l=s-o,a=o-(s-l)+(h-l),h=i[++d],o=s,0!==a&&(r[f++]=a);return 0===o&&0!==f||(r[f++]=o),f}function Zv(t){return new Float64Array(t)}const Jv=Zv(4),Qv=Zv(8),ty=Zv(12),ey=Zv(16),ny=Zv(4);function iy(t,e,n,i,r,o){const s=(e-o)*(n-r),a=(t-r)*(i-o),l=s-a;if(0===s||0===a||s>0!=a>0)return l;const c=Math.abs(s+a);return Math.abs(l)>=33306690738754716e-32*c?l:-function(t,e,n,i,r,o,s){let a,l,c,h,u,d,f,p,g,m,_,v,y,b,x,w,S,T;const C=t-r,E=n-r,M=e-o,A=i-o;b=C*A,d=134217729*C,f=d-(d-C),p=C-f,d=134217729*A,g=d-(d-A),m=A-g,x=p*m-(b-f*g-p*g-f*m),w=M*E,d=134217729*M,f=d-(d-M),p=M-f,d=134217729*E,g=d-(d-E),m=E-g,S=p*m-(w-f*g-p*g-f*m),_=x-S,u=x-_,Jv[0]=x-(_+u)+(u-S),v=b+_,u=v-b,y=b-(v-u)+(_-u),_=y-w,u=y-_,Jv[1]=y-(_+u)+(u-w),T=v+_,u=T-v,Jv[2]=v-(T-u)+(_-u),Jv[3]=T;let R=function(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}(4,Jv),k=22204460492503146e-32*s;if(R>=k||-R>=k)return R;if(u=t-C,a=t-(C+u)+(u-r),u=n-E,c=n-(E+u)+(u-r),u=e-M,l=e-(M+u)+(u-o),u=i-A,h=i-(A+u)+(u-o),0===a&&0===l&&0===c&&0===h)return R;if(k=11093356479670487e-47*s+33306690738754706e-32*Math.abs(R),R+=C*h+A*a-(M*c+E*l),R>=k||-R>=k)return R;b=a*A,d=134217729*a,f=d-(d-a),p=a-f,d=134217729*A,g=d-(d-A),m=A-g,x=p*m-(b-f*g-p*g-f*m),w=l*E,d=134217729*l,f=d-(d-l),p=l-f,d=134217729*E,g=d-(d-E),m=E-g,S=p*m-(w-f*g-p*g-f*m),_=x-S,u=x-_,ny[0]=x-(_+u)+(u-S),v=b+_,u=v-b,y=b-(v-u)+(_-u),_=y-w,u=y-_,ny[1]=y-(_+u)+(u-w),T=v+_,u=T-v,ny[2]=v-(T-u)+(_-u),ny[3]=T;const I=Kv(4,Jv,4,ny,Qv);b=C*h,d=134217729*C,f=d-(d-C),p=C-f,d=134217729*h,g=d-(d-h),m=h-g,x=p*m-(b-f*g-p*g-f*m),w=M*c,d=134217729*M,f=d-(d-M),p=M-f,d=134217729*c,g=d-(d-c),m=c-g,S=p*m-(w-f*g-p*g-f*m),_=x-S,u=x-_,ny[0]=x-(_+u)+(u-S),v=b+_,u=v-b,y=b-(v-u)+(_-u),_=y-w,u=y-_,ny[1]=y-(_+u)+(u-w),T=v+_,u=T-v,ny[2]=v-(T-u)+(_-u),ny[3]=T;const P=Kv(I,Qv,4,ny,ty);b=a*h,d=134217729*a,f=d-(d-a),p=a-f,d=134217729*h,g=d-(d-h),m=h-g,x=p*m-(b-f*g-p*g-f*m),w=l*c,d=134217729*l,f=d-(d-l),p=l-f,d=134217729*c,g=d-(d-c),m=c-g,S=p*m-(w-f*g-p*g-f*m),_=x-S,u=x-_,ny[0]=x-(_+u)+(u-S),v=b+_,u=v-b,y=b-(v-u)+(_-u),_=y-w,u=y-_,ny[1]=y-(_+u)+(u-w),T=v+_,u=T-v,ny[2]=v-(T-u)+(_-u),ny[3]=T;const F=Kv(P,ty,4,ny,ey);return ey[F-1]}(t,e,n,i,r,o,c)}const ry=Math.pow(2,-52),oy=new Uint32Array(512);class sy{static from(t,e=dy,n=fy){const i=t.length,r=new Float64Array(2*i);for(let o=0;o<i;o++){const i=t[o];r[2*o]=e(i),r[2*o+1]=n(i)}return new sy(r)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:i,_hullHash:r}=this,o=t.length>>1;let s=1/0,a=1/0,l=-1/0,c=-1/0;for(let e=0;e<o;e++){const n=t[2*e],i=t[2*e+1];n<s&&(s=n),i<a&&(a=i),n>l&&(l=n),i>c&&(c=i),this._ids[e]=e}const h=(s+l)/2,u=(a+c)/2;let d,f,p,g=1/0;for(let e=0;e<o;e++){const n=ay(h,u,t[2*e],t[2*e+1]);n<g&&(d=e,g=n)}const m=t[2*d],_=t[2*d+1];g=1/0;for(let e=0;e<o;e++){if(e===d)continue;const n=ay(m,_,t[2*e],t[2*e+1]);n<g&&n>0&&(f=e,g=n)}let v=t[2*f],y=t[2*f+1],b=1/0;for(let e=0;e<o;e++){if(e===d||e===f)continue;const n=cy(m,_,v,y,t[2*e],t[2*e+1]);n<b&&(p=e,b=n)}let x=t[2*p],w=t[2*p+1];if(b===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];hy(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,i=-1/0;t<o;t++){const r=this._ids[t];this._dists[r]>i&&(e[n++]=r,i=this._dists[r])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(iy(m,_,v,y,x,w)<0){const t=f,e=v,n=y;f=p,v=x,y=w,p=t,x=e,w=n}const S=function(t,e,n,i,r,o){const s=n-t,a=i-e,l=r-t,c=o-e,h=s*s+a*a,u=l*l+c*c,d=.5/(s*c-a*l);return{x:t+(c*h-a*u)*d,y:e+(s*u-l*h)*d}}(m,_,v,y,x,w);this._cx=S.x,this._cy=S.y;for(let e=0;e<o;e++)this._dists[e]=ay(t[2*e],t[2*e+1],S.x,S.y);hy(this._ids,this._dists,0,o-1),this._hullStart=d;let T=3;n[d]=e[p]=f,n[f]=e[d]=p,n[p]=e[f]=d,i[d]=0,i[f]=1,i[p]=2,r.fill(-1),r[this._hashKey(m,_)]=d,r[this._hashKey(v,y)]=f,r[this._hashKey(x,w)]=p,this.trianglesLen=0,this._addTriangle(d,f,p,-1,-1,-1);for(let o,s,a=0;a<this._ids.length;a++){const l=this._ids[a],c=t[2*l],h=t[2*l+1];if(a>0&&Math.abs(c-o)<=ry&&Math.abs(h-s)<=ry)continue;if(o=c,s=h,l===d||l===f||l===p)continue;let u=0;for(let t=0,e=this._hashKey(c,h);t<this._hashSize&&(u=r[(e+t)%this._hashSize],-1===u||u===n[u]);t++);u=e[u];let g,m=u;for(;g=n[m],iy(c,h,t[2*m],t[2*m+1],t[2*g],t[2*g+1])>=0;)if(m=g,m===u){m=-1;break}if(-1===m)continue;let _=this._addTriangle(m,l,n[m],-1,-1,i[m]);i[l]=this._legalize(_+2),i[m]=_,T++;let v=n[m];for(;g=n[v],iy(c,h,t[2*v],t[2*v+1],t[2*g],t[2*g+1])<0;)_=this._addTriangle(v,l,g,i[l],-1,i[v]),i[l]=this._legalize(_+2),n[v]=v,T--,v=g;if(m===u)for(;g=e[m],iy(c,h,t[2*g],t[2*g+1],t[2*m],t[2*m+1])<0;)_=this._addTriangle(g,l,m,-1,i[m],i[g]),this._legalize(_+2),i[g]=_,n[m]=m,T--,m=g;this._hullStart=e[l]=m,n[m]=e[v]=l,n[l]=v,r[this._hashKey(c,h)]=l,r[this._hashKey(t[2*m],t[2*m+1])]=m}this.hull=new Uint32Array(T);for(let t=0,e=this._hullStart;t<T;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:i}=this;let r=0,o=0;for(;;){const s=n[t],a=t-t%3;if(o=a+(t+2)%3,-1===s){if(0===r)break;t=oy[--r];continue}const l=s-s%3,c=a+(t+1)%3,h=l+(s+2)%3,u=e[o],d=e[t],f=e[c],p=e[h];if(ly(i[2*u],i[2*u+1],i[2*d],i[2*d+1],i[2*f],i[2*f+1],i[2*p],i[2*p+1])){e[t]=p,e[s]=u;const i=n[h];if(-1===i){let e=this._hullStart;do{if(this._hullTri[e]===h){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,i),this._link(s,n[o]),this._link(o,h);const a=l+(s+1)%3;r<oy.length&&(oy[r++]=a)}else{if(0===r)break;t=oy[--r]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,r,o){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=n,this._link(s,i),this._link(s+1,r),this._link(s+2,o),this.trianglesLen+=3,s}}function ay(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}function ly(t,e,n,i,r,o,s,a){const l=t-s,c=e-a,h=n-s,u=i-a,d=r-s,f=o-a,p=h*h+u*u,g=d*d+f*f;return l*(u*g-p*f)-c*(h*g-p*d)+(l*l+c*c)*(h*f-u*d)<0}function cy(t,e,n,i,r,o){const s=n-t,a=i-e,l=r-t,c=o-e,h=s*s+a*a,u=l*l+c*c,d=.5/(s*c-a*l),f=(c*h-a*u)*d,p=(s*u-l*h)*d;return f*f+p*p}function hy(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const i=t[r],o=e[i];let s=r-1;for(;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=i}else{let r=n+1,o=i;uy(t,n+i>>1,r),e[t[n]]>e[t[i]]&&uy(t,n,i),e[t[r]]>e[t[i]]&&uy(t,r,i),e[t[n]]>e[t[r]]&&uy(t,n,r);const s=t[r],a=e[s];for(;;){do{r++}while(e[t[r]]<a);do{o--}while(e[t[o]]>a);if(o<r)break;uy(t,r,o)}t[n+1]=t[o],t[o]=s,i-r+1>=o-n?(hy(t,e,r,i),hy(t,e,n,o-1)):(hy(t,e,n,o-1),hy(t,e,r,i))}}function uy(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function dy(t){return t[0]}function fy(t){return t[1]}class py{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const i=(t=+t)+(n=+n),r=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${r}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-r)>1e-6)&&(this._+="L"+i+","+r),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=r}`)}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class gy{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class my{constructor(t,[e,n,i,r]=[0,0,960,500]){if(!((i=+i)>=(e=+e)&&(r=+r)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=e,this.ymax=r,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:i}=this,r=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let e,i,o=0,s=0,a=n.length;o<a;o+=3,s+=2){const a=2*n[o],l=2*n[o+1],c=2*n[o+2],h=t[a],u=t[a+1],d=t[l],f=t[l+1],p=t[c],g=t[c+1],m=d-h,_=f-u,v=p-h,y=g-u,b=2*(m*y-_*v);if(Math.abs(b)<1e-9){let r=1e9;const o=2*n[0];r*=Math.sign((t[o]-h)*y-(t[o+1]-u)*v),e=(h+p)/2-r*y,i=(u+g)/2+r*v}else{const t=1/b,n=m*m+_*_,r=v*v+y*y;e=h+(y*n-_*r)*t,i=u+(m*r-v*n)*t}r[s]=e,r[s+1]=i}let o,s,a,l=e[e.length-1],c=4*l,h=t[2*l],u=t[2*l+1];i.fill(0);for(let n=0;n<e.length;++n)l=e[n],o=c,s=h,a=u,c=4*l,h=t[2*l],u=t[2*l+1],i[o+2]=i[c]=a-u,i[o+3]=i[c+1]=h-s}render(t){const e=null==t?t=new py:void 0,{delaunay:{halfedges:n,inedges:i,hull:r},circumcenters:o,vectors:s}=this;if(r.length<=1)return null;for(let e=0,i=n.length;e<i;++e){const i=n[e];if(i<e)continue;const r=2*Math.floor(e/3),s=2*Math.floor(i/3),a=o[r],l=o[r+1],c=o[s],h=o[s+1];this._renderSegment(a,l,c,h,t)}let a,l=r[r.length-1];for(let e=0;e<r.length;++e){a=l,l=r[e];const n=2*Math.floor(i[l]/3),c=o[n],h=o[n+1],u=4*a,d=this._project(c,h,s[u+2],s[u+3]);d&&this._renderSegment(c,h,d[0],d[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new py:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new py:void 0,i=this._clip(t);if(null===i||!i.length)return;e.moveTo(i[0],i[1]);let r=i.length;for(;i[0]===i[r-2]&&i[1]===i[r-1]&&r>1;)r-=2;for(let t=2;t<r;t+=2)i[t]===i[t-2]&&i[t+1]===i[t-1]||e.lineTo(i[t],i[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new gy;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,i,r){let o;const s=this._regioncode(t,e),a=this._regioncode(n,i);0===s&&0===a?(r.moveTo(t,e),r.lineTo(n,i)):(o=this._clipSegment(t,e,n,i,s,a))&&(r.moveTo(o[0],o[1]),r.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let i=0,r=e.length;i<r;i+=2)for(let o=0,s=t.length;o<s;o+=2)if(e[i]==t[o]&&e[i+1]==t[o+1]&&e[(i+2)%r]==t[(o+s-2)%s]&&e[(i+3)%r]==t[(o+s-1)%s]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:r}}=this,o=n[t];if(-1===o)return null;const s=[];let a=o;do{const n=Math.floor(a/3);if(s.push(e[2*n],e[2*n+1]),a=a%3==2?a-2:a+1,r[a]!==t)break;a=i[a]}while(a!==o&&-1!==a);return s}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,i=4*t;return n[i]||n[i+1]?this._clipInfinite(t,e,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let i,r,o,s,a=null,l=e[n-2],c=e[n-1],h=this._regioncode(l,c),u=0;for(let d=0;d<n;d+=2)if(i=l,r=c,l=e[d],c=e[d+1],o=h,h=this._regioncode(l,c),0===o&&0===h)s=u,u=0,a?a.push(l,c):a=[l,c];else{let e,n,d,f,p;if(0===o){if(null===(e=this._clipSegment(i,r,l,c,o,h)))continue;[n,d,f,p]=e}else{if(null===(e=this._clipSegment(l,c,i,r,h,o)))continue;[f,p,n,d]=e,s=u,u=this._edgecode(n,d),s&&u&&this._edge(t,s,u,a,a.length),a?a.push(n,d):a=[n,d]}s=u,u=this._edgecode(f,p),s&&u&&this._edge(t,s,u,a,a.length),a?a.push(f,p):a=[f,p]}if(a)s=u,u=this._edgecode(a[0],a[1]),s&&u&&this._edge(t,s,u,a,a.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return a}_clipSegment(t,e,n,i,r,o){for(;;){if(0===r&&0===o)return[t,e,n,i];if(r&o)return null;let s,a,l=r||o;8&l?(s=t+(n-t)*(this.ymax-e)/(i-e),a=this.ymax):4&l?(s=t+(n-t)*(this.ymin-e)/(i-e),a=this.ymin):2&l?(a=e+(i-e)*(this.xmax-t)/(n-t),s=this.xmax):(a=e+(i-e)*(this.xmin-t)/(n-t),s=this.xmin),r?(t=s,e=a,r=this._regioncode(t,e)):(n=s,i=a,o=this._regioncode(n,i))}}_clipInfinite(t,e,n,i,r,o){let s,a=Array.from(e);if((s=this._project(a[0],a[1],n,i))&&a.unshift(s[0],s[1]),(s=this._project(a[a.length-2],a[a.length-1],r,o))&&a.push(s[0],s[1]),a=this._clipFinite(t,a))for(let e,n=0,i=a.length,r=this._edgecode(a[i-2],a[i-1]);n<i;n+=2)e=r,r=this._edgecode(a[n],a[n+1]),e&&r&&(n=this._edge(t,e,r,a,n),i=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,e,n,i,r){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}i[r]===n&&i[r+1]===o||!this.contains(t,n,o)||(i.splice(r,0,n,o),r+=2)}if(i.length>4)for(let t=0;t<i.length;t+=2){const e=(t+2)%i.length,n=(t+4)%i.length;(i[t]===i[e]&&i[e]===i[n]||i[t+1]===i[e+1]&&i[e+1]===i[n+1])&&(i.splice(e,2),t-=2)}return r}_project(t,e,n,i){let r,o,s,a=1/0;if(i<0){if(e<=this.ymin)return null;(r=(this.ymin-e)/i)<a&&(s=this.ymin,o=t+(a=r)*n)}else if(i>0){if(e>=this.ymax)return null;(r=(this.ymax-e)/i)<a&&(s=this.ymax,o=t+(a=r)*n)}if(n>0){if(t>=this.xmax)return null;(r=(this.xmax-t)/n)<a&&(o=this.xmax,s=e+(a=r)*i)}else if(n<0){if(t<=this.xmin)return null;(r=(this.xmin-t)/n)<a&&(o=this.xmin,s=e+(a=r)*i)}return[o,s]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const _y=2*Math.PI,vy=Math.pow;function yy(t){return t[0]}function by(t){return t[1]}function xy(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class wy{static from(t,e=yy,n=by,i){return new wy("length"in t?function(t,e,n,i){const r=t.length,o=new Float64Array(2*r);for(let s=0;s<r;++s){const r=t[s];o[2*s]=e.call(i,r,s,t),o[2*s+1]=n.call(i,r,s,t)}return o}(t,e,n,i):Float64Array.from(function*(t,e,n,i){let r=0;for(const o of t)yield e.call(i,o,r,t),yield n.call(i,o,r,t),++r}(t,e,n,i)))}constructor(t){this._delaunator=new sy(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const i=2*e[t],r=2*e[t+1],o=2*e[t+2];if((n[o]-n[i])*(n[r+1]-n[i+1])-(n[r]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],i=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],r=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let t=0,n=e.length/2;t<n;++t){const n=xy(e[2*t],e[2*t+1],r);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new sy(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,r=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=r[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=i.length;t<e;++t)s[i[t]]=t;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,2===i.length&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new my(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:i,halfedges:r,triangles:o,collinear:s}=this;if(s){const e=s.indexOf(t);return e>0&&(yield s[e-1]),void(e<s.length-1&&(yield s[e+1]))}const a=e[t];if(-1===a)return;let l=a,c=-1;do{if(yield c=o[l],l=l%3==2?l-2:l+1,o[l]!==t)return;if(l=r[l],-1===l){const e=n[(i[t]+1)%n.length];return void(e!==c&&(yield e))}}while(l!==a)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const i=n;let r;for(;(r=this._step(n,t,e))>=0&&r!==n&&r!==i;)n=r;return r}_step(t,e,n){const{inedges:i,hull:r,_hullIndex:o,halfedges:s,triangles:a,points:l}=this;if(-1===i[t]||!l.length)return(t+1)%(l.length>>1);let c=t,h=vy(e-l[2*t],2)+vy(n-l[2*t+1],2);const u=i[t];let d=u;do{let i=a[d];const u=vy(e-l[2*i],2)+vy(n-l[2*i+1],2);if(u<h&&(h=u,c=i),d=d%3==2?d-2:d+1,a[d]!==t)break;if(d=s[d],-1===d){if(d=r[(o[t]+1)%r.length],d!==i&&vy(e-l[2*d],2)+vy(n-l[2*d+1],2)<h)return d;break}}while(d!==u);return c}render(t){const e=null==t?t=new py:void 0,{points:n,halfedges:i,triangles:r}=this;for(let e=0,o=i.length;e<o;++e){const o=i[e];if(o<e)continue;const s=2*r[e],a=2*r[o];t.moveTo(n[s],n[s+1]),t.lineTo(n[a],n[a+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new py:void 0,{points:i}=this;for(let n=0,r=i.length;n<r;n+=2){const r=i[n],o=i[n+1];t.moveTo(r+e,o),t.arc(r,o,e,0,_y)}return n&&n.value()}renderHull(t){const e=null==t?t=new py:void 0,{hull:n,points:i}=this,r=2*n[0],o=n.length;t.moveTo(i[r],i[r+1]);for(let e=1;e<o;++e){const r=2*n[e];t.lineTo(i[r],i[r+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new gy;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new py:void 0,{points:i,triangles:r}=this,o=2*r[t*=3],s=2*r[t+1],a=2*r[t+2];return e.moveTo(i[o],i[o+1]),e.lineTo(i[s],i[s+1]),e.lineTo(i[a],i[a+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new gy;return this.renderTriangle(t,e),e.value()}}var Sy={},Ty={};function Cy(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Ey(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function My(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function Ay(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+My(-t,6):t>9999?"+"+My(t,6):My(t,4)}(t.getUTCFullYear())+"-"+My(t.getUTCMonth()+1,2)+"-"+My(t.getUTCDate(),2)+(r?"T"+My(e,2)+":"+My(n,2)+":"+My(i,2)+"."+My(r,3)+"Z":i?"T"+My(e,2)+":"+My(n,2)+":"+My(i,2)+"Z":n||e?"T"+My(e,2)+":"+My(n,2)+"Z":"")}function Ry(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,r=[],o=t.length,s=0,a=0,l=o<=0,c=!1;function h(){if(l)return Ty;if(c)return c=!1,Sy;var e,i,r=s;if(34===t.charCodeAt(r)){for(;s++<o&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=o?l=!0:10===(i=t.charCodeAt(s++))?c=!0:13===i&&(c=!0,10===t.charCodeAt(s)&&++s),t.slice(r+1,e-1).replace(/""/g,'"')}for(;s<o;){if(10===(i=t.charCodeAt(e=s++)))c=!0;else if(13===i)c=!0,10===t.charCodeAt(s)&&++s;else if(i!==n)continue;return t.slice(r,e)}return l=!0,t.slice(r,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(i=h())!==Ty;){for(var u=[];i!==Sy&&i!==Ty;)u.push(i),i=h();e&&null==(u=e(u,a++))||r.push(u)}return r}function r(e,n){return e.map((function(e){return n.map((function(t){return s(e[t])})).join(t)}))}function o(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?Ay(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=Cy(t);return function(i,r){return e(n(i),r,t)}}(t,e):Cy(t)}));return o.columns=r||[],o},parseRows:i,format:function(e,n){return null==n&&(n=Ey(e)),[n.map(s).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Ey(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:s}}var ky=Ry(","),Iy=ky.parse,Py=ky.parseRows,Fy=ky.format,Dy=ky.formatBody,Ly=ky.formatRows,Oy=ky.formatRow,Ny=ky.formatValue,zy=Ry("\t"),Gy=zy.parse,By=zy.parseRows,Uy=zy.format,jy=zy.formatBody,$y=zy.formatRows,Hy=zy.formatRow,Wy=zy.formatValue;const Xy=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Yy(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Vy(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function qy(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ky(t,e){return fetch(t,e).then(qy)}function Zy(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=void 0),Ky(e,n).then((function(e){return t(e,i)}))}}var Jy=Zy(Iy),Qy=Zy(Gy);function tb(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function eb(t){return(e,n)=>Ky(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}var nb=eb("application/xml"),ib=eb("text/html"),rb=eb("image/svg+xml");function ob(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,s,a,l,c,h,u,d,f=t._root,p={data:i},g=t._x0,m=t._y0,_=t._x1,v=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((c=e>=(o=(g+_)/2))?g=o:_=o,(h=n>=(s=(m+v)/2))?m=s:v=s,r=f,!(f=f[u=h<<1|c]))return r[u]=p,t;if(a=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===a&&n===l)return p.next=f,r?r[u]=p:t._root=p,t;do{r=r?r[u]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+_)/2))?g=o:_=o,(h=n>=(s=(m+v)/2))?m=s:v=s}while((u=h<<1|c)==(d=(l>=s)<<1|a>=o));return r[d]=f,r[u]=p,t}function sb(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function ab(t){return t[0]}function lb(t){return t[1]}function cb(t,e,n){var i=new hb(null==e?ab:e,null==n?lb:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function hb(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function ub(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var db=cb.prototype=hb.prototype;function fb(t){return function(){return t}}function pb(t){return 1e-6*(t()-.5)}function gb(t){return t.x+t.vx}function mb(t){return t.y+t.vy}function _b(t){return t.index}function vb(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}db.copy=function(){var t,e,n=new hb(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=ub(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=ub(e));return n},db.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return ob(this.cover(e,n),e,n,t)},db.addAll=function(t){var e,n,i,r,o=t.length,s=new Array(o),a=new Array(o),l=1/0,c=1/0,h=-1/0,u=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=i,a[n]=r,i<l&&(l=i),i>h&&(h=i),r<c&&(c=r),r>u&&(u=r));if(l>h||c>u)return this;for(this.cover(l,c).cover(h,u),n=0;n<o;++n)ob(this,s[n],a[n],t[n]);return this},db.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var s,a,l=r-n||1,c=this._root;n>t||t>=r||i>e||e>=o;)switch(a=(e<i)<<1|t<n,(s=new Array(4))[a]=c,c=s,l*=2,a){case 0:r=n+l,o=i+l;break;case 1:n=r-l,o=i+l;break;case 2:r=n+l,i=o-l;break;case 3:n=r-l,i=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},db.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},db.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},db.find=function(t,e,n){var i,r,o,s,a,l,c,h=this._x0,u=this._y0,d=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new sb(g,h,u,d,f)),null==n?n=1/0:(h=t-n,u=e-n,d=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(r=l.x0)>d||(o=l.y0)>f||(s=l.x1)<h||(a=l.y1)<u))if(g.length){var m=(r+s)/2,_=(o+a)/2;p.push(new sb(g[3],m,_,s,a),new sb(g[2],r,_,m,a),new sb(g[1],m,o,s,_),new sb(g[0],r,o,m,_)),(c=(e>=_)<<1|t>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var v=t-+this._x.call(null,g.data),y=e-+this._y.call(null,g.data),b=v*v+y*y;if(b<n){var x=Math.sqrt(n=b);h=t-x,u=e-x,d=t+x,f=e+x,i=g.data}}return i},db.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,i,r,o,s,a,l,c,h,u,d,f=this._root,p=this._x0,g=this._y0,m=this._x1,_=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(a=(p+m)/2))?p=a:m=a,(h=s>=(l=(g+_)/2))?g=l:_=l,e=f,!(f=f[u=h<<1|c]))return this;if(!f.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,d=u)}for(;f.data!==t;)if(i=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,i?(r?i.next=r:delete i.next,this):e?(r?e[u]=r:delete e[u],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=r,this)},db.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},db.root=function(){return this._root},db.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},db.visit=function(t){var e,n,i,r,o,s,a=[],l=this._root;for(l&&a.push(new sb(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,s=e.y1)&&l.length){var c=(i+o)/2,h=(r+s)/2;(n=l[3])&&a.push(new sb(n,c,h,o,s)),(n=l[2])&&a.push(new sb(n,i,h,c,s)),(n=l[1])&&a.push(new sb(n,c,r,o,h)),(n=l[0])&&a.push(new sb(n,i,r,c,h))}return this},db.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new sb(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,s=e.x0,a=e.y0,l=e.x1,c=e.y1,h=(s+l)/2,u=(a+c)/2;(o=r[0])&&n.push(new sb(o,s,a,h,u)),(o=r[1])&&n.push(new sb(o,h,a,l,u)),(o=r[2])&&n.push(new sb(o,s,u,h,c)),(o=r[3])&&n.push(new sb(o,h,u,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},db.x=function(t){return arguments.length?(this._x=t,this):this._x},db.y=function(t){return arguments.length?(this._y=t,this):this._y};function yb(t){return t.x}function bb(t){return t.y}var xb=Math.PI*(3-Math.sqrt(5));function wb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Sb(t){return(t=wb(Math.abs(t)))?t[1]:NaN}var Tb,Cb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Eb(t){if(!(e=Cb.exec(t)))throw new Error("invalid format: "+t);var e;return new Mb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Mb(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ab(t,e){var n=wb(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Eb.prototype=Mb.prototype,Mb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Rb={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ab(100*t,e),r:Ab,s:function(t,e){var n=wb(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Tb=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+wb(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function kb(t){return t}var Ib,Pb,Fb,Db=Array.prototype.map,Lb=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ob(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?kb:(e=Db.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?kb:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Db.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=Eb(t)).fill,n=t.align,u=t.sign,d=t.symbol,f=t.zero,p=t.width,g=t.comma,m=t.precision,_=t.trim,v=t.type;"n"===v?(g=!0,v="g"):Rb[v]||(void 0===m&&(m=12),_=!0,v="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var y="$"===d?r:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===d?o:/[%p]/.test(v)?l:"",x=Rb[v],w=/[defgprs%]/.test(v);function S(t){var r,o,l,d=y,S=b;if("c"===v)S=x(t)+S,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:x(Math.abs(t),m),_&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),T&&0==+t&&"+"!==u&&(T=!1),d=(T?"("===u?u:c:"-"===u||"("===u?"":u)+d,S=("s"===v?Lb[8+Tb/3]:"")+S+(T&&"("===u?")":""),w)for(r=-1,o=t.length;++r<o;)if(48>(l=t.charCodeAt(r))||l>57){S=(46===l?s+t.slice(r+1):t.slice(r))+S,t=t.slice(0,r);break}}g&&!f&&(t=i(t,1/0));var C=d.length+t.length+S.length,E=C<p?new Array(p-C+1).join(e):"";switch(g&&f&&(t=i(E+t,E.length?p-S.length:1/0),E=""),n){case"<":t=d+t+S+E;break;case"=":t=d+E+t+S;break;case"^":t=E.slice(0,C=E.length>>1)+d+t+S+E.slice(C);break;default:t=E+d+t+S}return a(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return t+""},S}return{format:u,formatPrefix:function(t,e){var n=u(((t=Eb(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Sb(e)/3))),r=Math.pow(10,-i),o=Lb[8+i/3];return function(t){return n(r*t)+o}}}}function Nb(t){return Ib=Ob(t),Pb=Ib.format,Fb=Ib.formatPrefix,Ib}function zb(t){return Math.max(0,-Sb(Math.abs(t)))}function Gb(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Sb(e)/3)))-Sb(Math.abs(t)))}function Bb(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Sb(e)-Sb(t))+1}Nb({thousands:",",grouping:[3],currency:["$",""]});var Ub=Math.PI,jb=Ub/2,$b=Ub/4,Hb=2*Ub,Wb=180/Ub,Xb=Ub/180,Yb=Math.abs,Vb=Math.atan,qb=Math.atan2,Kb=Math.cos,Zb=Math.ceil,Jb=Math.exp,Qb=Math.hypot,tx=Math.log,ex=Math.pow,nx=Math.sin,ix=Math.sign||function(t){return t>0?1:t<0?-1:0},rx=Math.sqrt,ox=Math.tan;function sx(t){return t>1?0:t<-1?Ub:Math.acos(t)}function ax(t){return t>1?jb:t<-1?-jb:Math.asin(t)}function lx(t){return(t=nx(t/2))*t}function cx(){}function hx(t,e){t&&dx.hasOwnProperty(t.type)&&dx[t.type](t,e)}var ux={Feature:function(t,e){hx(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)hx(n[i].geometry,e)}},dx={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){fx(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fx(n[i],e,0)},Polygon:function(t,e){px(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)px(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)hx(n[i],e)}};function fx(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function px(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)fx(t[n],e,1);e.polygonEnd()}function gx(t,e){t&&ux.hasOwnProperty(t.type)?ux[t.type](t,e):hx(t,e)}var mx,_x,vx,yx,bx,xx,wx,Sx,Tx,Cx,Ex,Mx,Ax,Rx,kx,Ix,Px=new Au,Fx=new Au,Dx={point:cx,lineStart:cx,lineEnd:cx,polygonStart:function(){Px=new Au,Dx.lineStart=Lx,Dx.lineEnd=Ox},polygonEnd:function(){var t=+Px;Fx.add(t<0?Hb+t:t),this.lineStart=this.lineEnd=this.point=cx},sphere:function(){Fx.add(Hb)}};function Lx(){Dx.point=Nx}function Ox(){zx(mx,_x)}function Nx(t,e){Dx.point=zx,mx=t,_x=e,vx=t*=Xb,yx=Kb(e=(e*=Xb)/2+$b),bx=nx(e)}function zx(t,e){var n=(t*=Xb)-vx,i=n>=0?1:-1,r=i*n,o=Kb(e=(e*=Xb)/2+$b),s=nx(e),a=bx*s,l=yx*o+a*Kb(r),c=a*i*nx(r);Px.add(qb(c,l)),vx=t,yx=o,bx=s}function Gx(t){return[qb(t[1],t[0]),ax(t[2])]}function Bx(t){var e=t[0],n=t[1],i=Kb(n);return[i*Kb(e),i*nx(e),nx(n)]}function Ux(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function jx(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $x(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Hx(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Wx(t){var e=rx(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Xx,Yx,Vx,qx,Kx,Zx,Jx,Qx,tw,ew,nw,iw,rw,ow,sw,aw,lw={point:cw,lineStart:uw,lineEnd:dw,polygonStart:function(){lw.point=fw,lw.lineStart=pw,lw.lineEnd=gw,Rx=new Au,Dx.polygonStart()},polygonEnd:function(){Dx.polygonEnd(),lw.point=cw,lw.lineStart=uw,lw.lineEnd=dw,Px<0?(xx=-(Sx=180),wx=-(Tx=90)):Rx>1e-6?Tx=90:Rx<-1e-6&&(wx=-90),Ix[0]=xx,Ix[1]=Sx},sphere:function(){xx=-(Sx=180),wx=-(Tx=90)}};function cw(t,e){kx.push(Ix=[xx=t,Sx=t]),e<wx&&(wx=e),e>Tx&&(Tx=e)}function hw(t,e){var n=Bx([t*Xb,e*Xb]);if(Ax){var i=jx(Ax,n),r=jx([i[1],-i[0],0],i);Wx(r),r=Gx(r);var o,s=t-Cx,a=s>0?1:-1,l=r[0]*Wb*a,c=Yb(s)>180;c^(a*Cx<l&&l<a*t)?(o=r[1]*Wb)>Tx&&(Tx=o):c^(a*Cx<(l=(l+360)%360-180)&&l<a*t)?(o=-r[1]*Wb)<wx&&(wx=o):(e<wx&&(wx=e),e>Tx&&(Tx=e)),c?t<Cx?mw(xx,t)>mw(xx,Sx)&&(Sx=t):mw(t,Sx)>mw(xx,Sx)&&(xx=t):Sx>=xx?(t<xx&&(xx=t),t>Sx&&(Sx=t)):t>Cx?mw(xx,t)>mw(xx,Sx)&&(Sx=t):mw(t,Sx)>mw(xx,Sx)&&(xx=t)}else kx.push(Ix=[xx=t,Sx=t]);e<wx&&(wx=e),e>Tx&&(Tx=e),Ax=n,Cx=t}function uw(){lw.point=hw}function dw(){Ix[0]=xx,Ix[1]=Sx,lw.point=cw,Ax=null}function fw(t,e){if(Ax){var n=t-Cx;Rx.add(Yb(n)>180?n+(n>0?360:-360):n)}else Ex=t,Mx=e;Dx.point(t,e),hw(t,e)}function pw(){Dx.lineStart()}function gw(){fw(Ex,Mx),Dx.lineEnd(),Yb(Rx)>1e-6&&(xx=-(Sx=180)),Ix[0]=xx,Ix[1]=Sx,Ax=null}function mw(t,e){return(e-=t)<0?e+360:e}function _w(t,e){return t[0]-e[0]}function vw(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var yw={sphere:cx,point:bw,lineStart:ww,lineEnd:Cw,polygonStart:function(){yw.lineStart=Ew,yw.lineEnd=Mw},polygonEnd:function(){yw.lineStart=ww,yw.lineEnd=Cw}};function bw(t,e){t*=Xb;var n=Kb(e*=Xb);xw(n*Kb(t),n*nx(t),nx(e))}function xw(t,e,n){++Xx,Vx+=(t-Vx)/Xx,qx+=(e-qx)/Xx,Kx+=(n-Kx)/Xx}function ww(){yw.point=Sw}function Sw(t,e){t*=Xb;var n=Kb(e*=Xb);ow=n*Kb(t),sw=n*nx(t),aw=nx(e),yw.point=Tw,xw(ow,sw,aw)}function Tw(t,e){t*=Xb;var n=Kb(e*=Xb),i=n*Kb(t),r=n*nx(t),o=nx(e),s=qb(rx((s=sw*o-aw*r)*s+(s=aw*i-ow*o)*s+(s=ow*r-sw*i)*s),ow*i+sw*r+aw*o);Yx+=s,Zx+=s*(ow+(ow=i)),Jx+=s*(sw+(sw=r)),Qx+=s*(aw+(aw=o)),xw(ow,sw,aw)}function Cw(){yw.point=bw}function Ew(){yw.point=Aw}function Mw(){Rw(iw,rw),yw.point=bw}function Aw(t,e){iw=t,rw=e,t*=Xb,e*=Xb,yw.point=Rw;var n=Kb(e);ow=n*Kb(t),sw=n*nx(t),aw=nx(e),xw(ow,sw,aw)}function Rw(t,e){t*=Xb;var n=Kb(e*=Xb),i=n*Kb(t),r=n*nx(t),o=nx(e),s=sw*o-aw*r,a=aw*i-ow*o,l=ow*r-sw*i,c=Qb(s,a,l),h=ax(c),u=c&&-h/c;tw.add(u*s),ew.add(u*a),nw.add(u*l),Yx+=h,Zx+=h*(ow+(ow=i)),Jx+=h*(sw+(sw=r)),Qx+=h*(aw+(aw=o)),xw(ow,sw,aw)}function kw(t){return function(){return t}}function Iw(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Pw(t,e){return[Yb(t)>Ub?t+Math.round(-t/Hb)*Hb:t,e]}function Fw(t,e,n){return(t%=Hb)?e||n?Iw(Lw(t),Ow(e,n)):Lw(t):e||n?Ow(e,n):Pw}function Dw(t){return function(e,n){return[(e+=t)>Ub?e-Hb:e<-Ub?e+Hb:e,n]}}function Lw(t){var e=Dw(t);return e.invert=Dw(-t),e}function Ow(t,e){var n=Kb(t),i=nx(t),r=Kb(e),o=nx(e);function s(t,e){var s=Kb(e),a=Kb(t)*s,l=nx(t)*s,c=nx(e),h=c*n+a*i;return[qb(l*r-h*o,a*n-c*i),ax(h*r+l*o)]}return s.invert=function(t,e){var s=Kb(e),a=Kb(t)*s,l=nx(t)*s,c=nx(e),h=c*r-l*o;return[qb(l*r+c*o,a*n+h*i),ax(h*n-a*i)]},s}function Nw(t){function e(e){return(e=t(e[0]*Xb,e[1]*Xb))[0]*=Wb,e[1]*=Wb,e}return t=Fw(t[0]*Xb,t[1]*Xb,t.length>2?t[2]*Xb:0),e.invert=function(e){return(e=t.invert(e[0]*Xb,e[1]*Xb))[0]*=Wb,e[1]*=Wb,e},e}function zw(t,e,n,i,r,o){if(n){var s=Kb(e),a=nx(e),l=i*n;null==r?(r=e+i*Hb,o=e-l/2):(r=Gw(s,r),o=Gw(s,o),(i>0?r<o:r>o)&&(r+=i*Hb));for(var c,h=r;i>0?h>o:h<o;h-=l)c=Gx([s,-a*Kb(h),-a*nx(h)]),t.point(c[0],c[1])}}function Gw(t,e){(e=Bx(e))[0]-=t,Wx(e);var n=sx(-e[1]);return((-e[2]<0?-n:n)+Hb-1e-6)%Hb}function Bw(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:cx,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Uw(t,e){return Yb(t[0]-e[0])<1e-6&&Yb(t[1]-e[1])<1e-6}function jw(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function $w(t,e,n,i,r){var o,s,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(Uw(i,s)){if(!i[2]&&!s[2]){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}s[0]+=2e-6}a.push(n=new jw(i,t,null,!0)),l.push(n.o=new jw(i,null,n,!1)),a.push(n=new jw(s,t,null,!1)),l.push(n.o=new jw(s,null,n,!0))}})),a.length){for(l.sort(e),Hw(a),Hw(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var c,h,u=a[0];;){for(var d=u,f=!0;d.v;)if((d=d.n)===u)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,s=c.length;o<s;++o)r.point((h=c[o])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(c=d.p.z,o=c.length-1;o>=0;--o)r.point((h=c[o])[0],h[1]);else i(d.x,d.p.x,-1,r);d=d.p}c=(d=d.o).z,f=!f}while(!d.v);r.lineEnd()}}}function Hw(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Ww(t){return Yb(t[0])<=Ub?t[0]:ix(t[0])*((Yb(t[0])+Ub)%Hb-Ub)}function Xw(t,e){var n=Ww(e),i=e[1],r=nx(i),o=[nx(n),-Kb(n),0],s=0,a=0,l=new Au;1===r?i=jb+1e-6:-1===r&&(i=-jb-1e-6);for(var c=0,h=t.length;c<h;++c)if(d=(u=t[c]).length)for(var u,d,f=u[d-1],p=Ww(f),g=f[1]/2+$b,m=nx(g),_=Kb(g),v=0;v<d;++v,p=b,m=w,_=S,f=y){var y=u[v],b=Ww(y),x=y[1]/2+$b,w=nx(x),S=Kb(x),T=b-p,C=T>=0?1:-1,E=C*T,M=E>Ub,A=m*w;if(l.add(qb(A*C*nx(E),_*S+A*Kb(E))),s+=M?T+C*Hb:T,M^p>=n^b>=n){var R=jx(Bx(f),Bx(y));Wx(R);var k=jx(o,R);Wx(k);var I=(M^T>=0?-1:1)*ax(k[2]);(i>I||i===I&&(R[0]||R[1]))&&(a+=M^T>=0?1:-1)}}return(s<-1e-6||s<1e-6&&l<-1e-12)^1&a}function Yw(t,e,n,i){return function(r){var o,s,a,l=e(r),c=Bw(),h=e(c),u=!1,d={point:f,lineStart:g,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=v,d.lineEnd=y,s=[],o=[]},polygonEnd:function(){d.point=f,d.lineStart=g,d.lineEnd=m,s=pd(s);var t=Xw(o,i);s.length?(u||(r.polygonStart(),u=!0),$w(s,qw,t,n,r)):t&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),s=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(e,n){t(e,n)&&r.point(e,n)}function p(t,e){l.point(t,e)}function g(){d.point=p,l.lineStart()}function m(){d.point=f,l.lineEnd()}function _(t,e){a.push([t,e]),h.point(t,e)}function v(){h.lineStart(),a=[]}function y(){_(a[0][0],a[0][1]),h.lineEnd();var t,e,n,i,l=h.clean(),d=c.result(),f=d.length;if(a.pop(),o.push(a),a=null,f)if(1&l){if((e=(n=d[0]).length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else f>1&&2&l&&d.push(d.pop().concat(d.shift())),s.push(d.filter(Vw))}return d}}function Vw(t){return t.length>1}function qw(t,e){return((t=t.x)[0]<0?t[1]-jb-1e-6:jb-t[1])-((e=e.x)[0]<0?e[1]-jb-1e-6:jb-e[1])}Pw.invert=Pw;var Kw=Yw((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Ub:-Ub,l=Yb(o-n);Yb(l-Ub)<1e-6?(t.point(n,i=(i+s)/2>0?jb:-jb),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&l>=Ub&&(Yb(n-r)<1e-6&&(n-=1e-6*r),Yb(o-a)<1e-6&&(o-=1e-6*a),i=function(t,e,n,i){var r,o,s=nx(t-n);return Yb(s)>1e-6?Vb((nx(e)*(o=Kb(i))*nx(n)-nx(i)*(r=Kb(e))*nx(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*jb,i.point(-Ub,r),i.point(0,r),i.point(Ub,r),i.point(Ub,0),i.point(Ub,-r),i.point(0,-r),i.point(-Ub,-r),i.point(-Ub,0),i.point(-Ub,r);else if(Yb(t[0]-e[0])>1e-6){var o=t[0]<e[0]?Ub:-Ub;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-Ub,-jb]);function Zw(t){var e=Kb(t),n=6*Xb,i=e>0,r=Yb(e)>1e-6;function o(t,n){return Kb(t)*Kb(n)>e}function s(t,n,i){var r=[1,0,0],o=jx(Bx(t),Bx(n)),s=Ux(o,o),a=o[0],l=s-a*a;if(!l)return!i&&t;var c=e*s/l,h=-e*a/l,u=jx(r,o),d=Hx(r,c);$x(d,Hx(o,h));var f=u,p=Ux(d,f),g=Ux(f,f),m=p*p-g*(Ux(d,d)-1);if(!(m<0)){var _=rx(m),v=Hx(f,(-p-_)/g);if($x(v,d),v=Gx(v),!i)return v;var y,b=t[0],x=n[0],w=t[1],S=n[1];x<b&&(y=b,b=x,x=y);var T=x-b,C=Yb(T-Ub)<1e-6;if(!C&&S<w&&(y=w,w=S,S=y),C||T<1e-6?C?w+S>0^v[1]<(Yb(v[0]-b)<1e-6?w:S):w<=v[1]&&v[1]<=S:T>Ub^(b<=v[0]&&v[0]<=x)){var E=Hx(f,(-p+_)/g);return $x(E,d),[v,Gx(E)]}}}function a(e,n){var r=i?t:Ub-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return Yw(o,(function(t){var e,n,l,c,h;return{lineStart:function(){c=l=!1,h=1},point:function(u,d){var f,p=[u,d],g=o(u,d),m=i?g?0:a(u,d):g?a(u+(u<0?Ub:-Ub),d):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(f=s(e,p))||Uw(e,f)||Uw(p,f))&&(p[2]=1),g!==l)h=0,g?(t.lineStart(),f=s(p,e),t.point(f[0],f[1])):(f=s(e,p),t.point(f[0],f[1],2),t.lineEnd()),e=f;else if(r&&e&&i^g){var _;m&n||!(_=s(p,e,!0))||(h=0,i?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1],3)))}!g||e&&Uw(e,p)||t.point(p[0],p[1]),e=p,l=g,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return h|(c&&l)<<1}}}),(function(e,i,r,o){zw(o,t,n,r,e,i)}),i?[0,-t]:[-Ub,t-Ub])}var Jw,Qw,tS,eS;function nS(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,c){var h=0,u=0;if(null==r||(h=s(r,a))!==(u=s(o,a))||l(r,o)<0^a>0)do{c.point(0===h||3===h?t:n,h>1?i:e)}while((h=(h+a+4)%4)!==u);else c.point(o[0],o[1])}function s(i,r){return Yb(i[0]-t)<1e-6?r>0?0:3:Yb(i[0]-n)<1e-6?r>0?2:1:Yb(i[1]-e)<1e-6?r>0?1:0:r>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var l,c,h,u,d,f,p,g,m,_,v,y=s,b=Bw(),x={point:w,lineStart:function(){x.point=S,c&&c.push(h=[]);_=!0,m=!1,p=g=NaN},lineEnd:function(){l&&(S(u,d),f&&m&&b.rejoin(),l.push(b.result()));x.point=w,m&&y.lineEnd()},polygonStart:function(){y=b,l=[],c=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=c.length;n<r;++n)for(var o,s,a=c[n],l=1,h=a.length,u=a[0],d=u[0],f=u[1];l<h;++l)o=d,s=f,d=(u=a[l])[0],f=u[1],s<=i?f>i&&(d-o)*(i-s)>(f-s)*(t-o)&&++e:f<=i&&(d-o)*(i-s)<(f-s)*(t-o)&&--e;return e}(),n=v&&e,r=(l=pd(l)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&$w(l,a,e,o,s),s.polygonEnd());y=s,l=c=h=null}};function w(t,e){r(t,e)&&y.point(t,e)}function S(o,s){var a=r(o,s);if(c&&h.push([o,s]),_)u=o,d=s,f=a,_=!1,a&&(y.lineStart(),y.point(o,s));else if(a&&m)y.point(o,s);else{var l=[p=Math.max(-1e9,Math.min(1e9,p)),g=Math.max(-1e9,Math.min(1e9,g))],b=[o=Math.max(-1e9,Math.min(1e9,o)),s=Math.max(-1e9,Math.min(1e9,s))];!function(t,e,n,i,r,o){var s,a=t[0],l=t[1],c=0,h=1,u=e[0]-a,d=e[1]-l;if(s=n-a,u||!(s>0)){if(s/=u,u<0){if(s<c)return;s<h&&(h=s)}else if(u>0){if(s>h)return;s>c&&(c=s)}if(s=r-a,u||!(s<0)){if(s/=u,u<0){if(s>h)return;s>c&&(c=s)}else if(u>0){if(s<c)return;s<h&&(h=s)}if(s=i-l,d||!(s>0)){if(s/=d,d<0){if(s<c)return;s<h&&(h=s)}else if(d>0){if(s>h)return;s>c&&(c=s)}if(s=o-l,d||!(s<0)){if(s/=d,d<0){if(s>h)return;s>c&&(c=s)}else if(d>0){if(s<c)return;s<h&&(h=s)}return c>0&&(t[0]=a+c*u,t[1]=l+c*d),h<1&&(e[0]=a+h*u,e[1]=l+h*d),!0}}}}}(l,b,t,e,n,i)?a&&(y.lineStart(),y.point(o,s),v=!1):(m||(y.lineStart(),y.point(l[0],l[1])),y.point(b[0],b[1]),a||y.lineEnd(),v=!1)}p=o,g=s,m=a}return x}}var iS={sphere:cx,point:cx,lineStart:function(){iS.point=oS,iS.lineEnd=rS},lineEnd:cx,polygonStart:cx,polygonEnd:cx};function rS(){iS.point=iS.lineEnd=cx}function oS(t,e){Qw=t*=Xb,tS=nx(e*=Xb),eS=Kb(e),iS.point=sS}function sS(t,e){t*=Xb;var n=nx(e*=Xb),i=Kb(e),r=Yb(t-Qw),o=Kb(r),s=i*nx(r),a=eS*n-tS*i*o,l=tS*n+eS*i*o;Jw.add(qb(rx(s*s+a*a),l)),Qw=t,tS=n,eS=i}function aS(t){return Jw=new Au,gx(t,iS),+Jw}var lS=[null,null],cS={type:"LineString",coordinates:lS};function hS(t,e){return lS[0]=t,lS[1]=e,aS(cS)}var uS={Feature:function(t,e){return fS(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(fS(n[i].geometry,e))return!0;return!1}},dS={Sphere:function(){return!0},Point:function(t,e){return pS(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(pS(n[i],e))return!0;return!1},LineString:function(t,e){return gS(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(gS(n[i],e))return!0;return!1},Polygon:function(t,e){return mS(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(mS(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(fS(n[i],e))return!0;return!1}};function fS(t,e){return!(!t||!dS.hasOwnProperty(t.type))&&dS[t.type](t,e)}function pS(t,e){return 0===hS(t,e)}function gS(t,e){for(var n,i,r,o=0,s=t.length;o<s;o++){if(0===(i=hS(t[o],e)))return!0;if(o>0&&(r=hS(t[o],t[o-1]))>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<1e-12*r)return!0;n=i}return!1}function mS(t,e){return!!Xw(t.map(_S),vS(e))}function _S(t){return(t=t.map(vS)).pop(),t}function vS(t){return[t[0]*Xb,t[1]*Xb]}function yS(t,e,n){var i=md(t,e-1e-6,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function bS(t,e,n){var i=md(t,e-1e-6,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function xS(){var t,e,n,i,r,o,s,a,l,c,h,u,d=10,f=d,p=90,g=360,m=2.5;function _(){return{type:"MultiLineString",coordinates:v()}}function v(){return md(Zb(i/p)*p,n,p).map(h).concat(md(Zb(a/g)*g,s,g).map(u)).concat(md(Zb(e/d)*d,t,d).filter((function(t){return Yb(t%p)>1e-6})).map(l)).concat(md(Zb(o/f)*f,r,f).filter((function(t){return Yb(t%g)>1e-6})).map(c))}return _.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},_.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(u(s).slice(1),h(n).reverse().slice(1),u(a).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],a=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),a>s&&(t=a,a=s,s=t),_.precision(m)):[[i,a],[n,s]]},_.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),o>r&&(n=o,o=r,r=n),_.precision(m)):[[e,o],[t,r]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],_):[p,g]},_.stepMinor=function(t){return arguments.length?(d=+t[0],f=+t[1],_):[d,f]},_.precision=function(d){return arguments.length?(m=+d,l=yS(o,r,90),c=bS(e,t,m),h=yS(a,s,90),u=bS(i,n,m),_):m},_.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}var wS,SS,TS,CS,ES=t=>t,MS=new Au,AS=new Au,RS={point:cx,lineStart:cx,lineEnd:cx,polygonStart:function(){RS.lineStart=kS,RS.lineEnd=FS},polygonEnd:function(){RS.lineStart=RS.lineEnd=RS.point=cx,MS.add(Yb(AS)),AS=new Au},result:function(){var t=MS/2;return MS=new Au,t}};function kS(){RS.point=IS}function IS(t,e){RS.point=PS,wS=TS=t,SS=CS=e}function PS(t,e){AS.add(CS*t-TS*e),TS=t,CS=e}function FS(){PS(wS,SS)}var DS=RS,LS=1/0,OS=LS,NS=-LS,zS=NS,GS={point:function(t,e){t<LS&&(LS=t);t>NS&&(NS=t);e<OS&&(OS=e);e>zS&&(zS=e)},lineStart:cx,lineEnd:cx,polygonStart:cx,polygonEnd:cx,result:function(){var t=[[LS,OS],[NS,zS]];return NS=zS=-(OS=LS=1/0),t}};var BS,US,jS,$S,HS=GS,WS=0,XS=0,YS=0,VS=0,qS=0,KS=0,ZS=0,JS=0,QS=0,tT={point:eT,lineStart:nT,lineEnd:oT,polygonStart:function(){tT.lineStart=sT,tT.lineEnd=aT},polygonEnd:function(){tT.point=eT,tT.lineStart=nT,tT.lineEnd=oT},result:function(){var t=QS?[ZS/QS,JS/QS]:KS?[VS/KS,qS/KS]:YS?[WS/YS,XS/YS]:[NaN,NaN];return WS=XS=YS=VS=qS=KS=ZS=JS=QS=0,t}};function eT(t,e){WS+=t,XS+=e,++YS}function nT(){tT.point=iT}function iT(t,e){tT.point=rT,eT(jS=t,$S=e)}function rT(t,e){var n=t-jS,i=e-$S,r=rx(n*n+i*i);VS+=r*(jS+t)/2,qS+=r*($S+e)/2,KS+=r,eT(jS=t,$S=e)}function oT(){tT.point=eT}function sT(){tT.point=lT}function aT(){cT(BS,US)}function lT(t,e){tT.point=cT,eT(BS=jS=t,US=$S=e)}function cT(t,e){var n=t-jS,i=e-$S,r=rx(n*n+i*i);VS+=r*(jS+t)/2,qS+=r*($S+e)/2,KS+=r,ZS+=(r=$S*t-jS*e)*(jS+t),JS+=r*($S+e),QS+=3*r,eT(jS=t,$S=e)}var hT=tT;function uT(t){this._context=t}uT.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Hb)}},result:cx};var dT,fT,pT,gT,mT,_T=new Au,vT={point:cx,lineStart:function(){vT.point=yT},lineEnd:function(){dT&&bT(fT,pT),vT.point=cx},polygonStart:function(){dT=!0},polygonEnd:function(){dT=null},result:function(){var t=+_T;return _T=new Au,t}};function yT(t,e){vT.point=bT,fT=gT=t,pT=mT=e}function bT(t,e){gT-=t,mT-=e,_T.add(rx(gT*gT+mT*mT)),gT=t,mT=e}var xT=vT;function wT(){this._string=[]}function ST(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function TT(t){return function(e){var n=new CT;for(var i in t)n[i]=t[i];return n.stream=e,n}}function CT(){}function ET(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),gx(n,t.stream(HS)),e(HS.result()),null!=i&&t.clipExtent(i),t}function MT(t,e,n){return ET(t,(function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),s=+e[0][0]+(i-o*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])}),n)}function AT(t,e,n){return MT(t,[[0,0],e],n)}function RT(t,e,n){return ET(t,(function(n){var i=+e,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,s=-r*n[0][1];t.scale(150*r).translate([o,s])}),n)}function kT(t,e,n){return ET(t,(function(n){var i=+e,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],s=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([o,s])}),n)}wT.prototype={_radius:4.5,_circle:ST(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=ST(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},CT.prototype={constructor:CT,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var IT=Kb(30*Xb);function PT(t,e){return+e?function(t,e){function n(i,r,o,s,a,l,c,h,u,d,f,p,g,m){var _=c-i,v=h-r,y=_*_+v*v;if(y>4*e&&g--){var b=s+d,x=a+f,w=l+p,S=rx(b*b+x*x+w*w),T=ax(w/=S),C=Yb(Yb(w)-1)<1e-6||Yb(o-u)<1e-6?(o+u)/2:qb(x,b),E=t(C,T),M=E[0],A=E[1],R=M-i,k=A-r,I=v*R-_*k;(I*I/y>e||Yb((_*R+v*k)/y-.5)>.3||s*d+a*f+l*p<IT)&&(n(i,r,o,s,a,l,M,A,C,b/=S,x/=S,w,g,m),m.point(M,A),n(M,A,C,b,x,w,c,h,u,d,f,p,g,m))}}return function(e){var i,r,o,s,a,l,c,h,u,d,f,p,g={point:m,lineStart:_,lineEnd:y,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function m(n,i){n=t(n,i),e.point(n[0],n[1])}function _(){h=NaN,g.point=v,e.lineStart()}function v(i,r){var o=Bx([i,r]),s=t(i,r);n(h,u,c,d,f,p,h=s[0],u=s[1],c=i,d=o[0],f=o[1],p=o[2],16,e),e.point(h,u)}function y(){g.point=m,e.lineEnd()}function b(){_(),g.point=x,g.lineEnd=w}function x(t,e){v(i=t,e),r=h,o=u,s=d,a=f,l=p,g.point=v}function w(){n(h,u,c,d,f,p,r,o,i,s,a,l,16,e),g.lineEnd=y,y()}return g}}(t,e):function(t){return TT({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var FT=TT({point:function(t,e){this.stream.point(t*Xb,e*Xb)}});function DT(t,e,n,i,r,o){if(!o)return function(t,e,n,i,r){function o(o,s){return[e+t*(o*=i),n-t*(s*=r)]}return o.invert=function(o,s){return[(o-e)/t*i,(n-s)/t*r]},o}(t,e,n,i,r);var s=Kb(o),a=nx(o),l=s*t,c=a*t,h=s/t,u=a/t,d=(a*n-s*e)/t,f=(a*e+s*n)/t;function p(t,o){return[l*(t*=i)-c*(o*=r)+e,n-c*t-l*o]}return p.invert=function(t,e){return[i*(h*t-u*e+d),r*(f-u*t-h*e)]},p}function LT(t){return OT((function(){return t}))()}function OT(t){var e,n,i,r,o,s,a,l,c,h,u=150,d=480,f=250,p=0,g=0,m=0,_=0,v=0,y=0,b=1,x=1,w=null,S=Kw,T=null,C=ES,E=.5;function M(t){return l(t[0]*Xb,t[1]*Xb)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Wb,t[1]*Wb]}function R(){var t=DT(u,0,0,b,x,y).apply(null,e(p,g)),i=DT(u,d-t[0],f-t[1],b,x,y);return n=Fw(m,_,v),a=Iw(e,i),l=Iw(n,a),s=PT(a,E),k()}function k(){return c=h=null,M}return M.stream=function(t){return c&&h===t?c:c=FT(function(t){return TT({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(S(s(C(h=t)))))},M.preclip=function(t){return arguments.length?(S=t,w=void 0,k()):S},M.postclip=function(t){return arguments.length?(C=t,T=i=r=o=null,k()):C},M.clipAngle=function(t){return arguments.length?(S=+t?Zw(w=t*Xb):(w=null,Kw),k()):w*Wb},M.clipExtent=function(t){return arguments.length?(C=null==t?(T=i=r=o=null,ES):nS(T=+t[0][0],i=+t[0][1],r=+t[1][0],o=+t[1][1]),k()):null==T?null:[[T,i],[r,o]]},M.scale=function(t){return arguments.length?(u=+t,R()):u},M.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],R()):[d,f]},M.center=function(t){return arguments.length?(p=t[0]%360*Xb,g=t[1]%360*Xb,R()):[p*Wb,g*Wb]},M.rotate=function(t){return arguments.length?(m=t[0]%360*Xb,_=t[1]%360*Xb,v=t.length>2?t[2]%360*Xb:0,R()):[m*Wb,_*Wb,v*Wb]},M.angle=function(t){return arguments.length?(y=t%360*Xb,R()):y*Wb},M.reflectX=function(t){return arguments.length?(b=t?-1:1,R()):b<0},M.reflectY=function(t){return arguments.length?(x=t?-1:1,R()):x<0},M.precision=function(t){return arguments.length?(s=PT(a,E=t*t),k()):rx(E)},M.fitExtent=function(t,e){return MT(M,t,e)},M.fitSize=function(t,e){return AT(M,t,e)},M.fitWidth=function(t,e){return RT(M,t,e)},M.fitHeight=function(t,e){return kT(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&A,R()}}function NT(t){var e=0,n=Ub/3,i=OT(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Xb,n=t[1]*Xb):[e*Wb,n*Wb]},r}function zT(t,e){var n=nx(t),i=(n+nx(e))/2;if(Yb(i)<1e-6)return function(t){var e=Kb(t);function n(t,n){return[t*e,nx(n)/e]}return n.invert=function(t,n){return[t/e,ax(n*e)]},n}(t);var r=1+n*(2*i-n),o=rx(r)/i;function s(t,e){var n=rx(r-2*i*nx(e))/i;return[n*nx(t*=i),o-n*Kb(t)]}return s.invert=function(t,e){var n=o-e,s=qb(t,Yb(n))*ix(n);return n*i<0&&(s-=Ub*ix(t)*ix(n)),[s/i,ax((r-(t*t+n*n)*i*i)/(2*i))]},s}function GT(){return NT(zT).scale(155.424).center([0,33.6442])}function BT(){return GT().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function UT(t){return function(e,n){var i=Kb(e),r=Kb(n),o=t(i*r);return o===1/0?[2,0]:[o*r*nx(e),o*nx(n)]}}function jT(t){return function(e,n){var i=rx(e*e+n*n),r=t(i),o=nx(r),s=Kb(r);return[qb(e*o,i*s),ax(i&&n*o/i)]}}var $T=UT((function(t){return rx(2/(1+t))}));$T.invert=jT((function(t){return 2*ax(t/2)}));var HT=UT((function(t){return(t=sx(t))&&t/nx(t)}));function WT(t,e){return[t,tx(ox((jb+e)/2))]}function XT(t){var e,n,i,r=LT(t),o=r.center,s=r.scale,a=r.translate,l=r.clipExtent,c=null;function h(){var o=Ub*s(),a=r(Nw(r.rotate()).invert([0,0]));return l(null==c?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===WT?[[Math.max(a[0]-o,c),e],[Math.min(a[0]+o,n),i]]:[[c,Math.max(a[1]-o,e)],[n,Math.min(a[1]+o,i)]])}return r.scale=function(t){return arguments.length?(s(t),h()):s()},r.translate=function(t){return arguments.length?(a(t),h()):a()},r.center=function(t){return arguments.length?(o(t),h()):o()},r.clipExtent=function(t){return arguments.length?(null==t?c=e=n=i=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),h()):null==c?null:[[c,e],[n,i]]},h()}function YT(t){return ox((jb+t)/2)}function VT(t,e){var n=Kb(t),i=t===e?nx(t):tx(n/Kb(e))/tx(YT(e)/YT(t)),r=n*ex(YT(t),i)/i;if(!i)return WT;function o(t,e){r>0?e<1e-6-jb&&(e=1e-6-jb):e>jb-1e-6&&(e=jb-1e-6);var n=r/ex(YT(e),i);return[n*nx(i*t),r-n*Kb(i*t)]}return o.invert=function(t,e){var n=r-e,o=ix(i)*rx(t*t+n*n),s=qb(t,Yb(n))*ix(n);return n*i<0&&(s-=Ub*ix(t)*ix(n)),[s/i,2*Vb(ex(r/o,1/i))-jb]},o}function qT(t,e){return[t,e]}function KT(t,e){var n=Kb(t),i=t===e?nx(t):(n-Kb(e))/(e-t),r=n/i+t;if(Yb(i)<1e-6)return qT;function o(t,e){var n=r-e,o=i*t;return[n*nx(o),r-n*Kb(o)]}return o.invert=function(t,e){var n=r-e,o=qb(t,Yb(n))*ix(n);return n*i<0&&(o-=Ub*ix(t)*ix(n)),[o/i,r-ix(i)*rx(t*t+n*n)]},o}HT.invert=jT((function(t){return t})),WT.invert=function(t,e){return[t,2*Vb(Jb(e))-jb]},qT.invert=qT;var ZT=1.340264,JT=-.081106,QT=893e-6,tC=.003796,eC=rx(3)/2;function nC(t,e){var n=ax(eC*nx(e)),i=n*n,r=i*i*i;return[t*Kb(n)/(eC*(ZT+3*JT*i+r*(7*QT+9*tC*i))),n*(ZT+JT*i+r*(QT+tC*i))]}function iC(t,e){var n=Kb(e),i=Kb(t)*n;return[n*nx(t)/i,nx(e)/i]}function rC(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function oC(t,e){return[Kb(e)*nx(t),nx(e)]}function sC(t,e){var n=Kb(e),i=1+Kb(t)*n;return[n*nx(t)/i,nx(e)/i]}function aC(t,e){return[tx(ox((jb+e)/2)),-t]}function lC(t,e){return t.parent===e.parent?1:2}function cC(t,e){return t+e.x}function hC(t,e){return Math.max(t,e.y)}function uC(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function dC(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=pC)):void 0===e&&(e=fC);for(var n,i,r,o,s,a=new _C(t),l=[a];n=l.pop();)if((r=e(n.data))&&(s=(r=Array.from(r)).length))for(n.children=r,o=s-1;o>=0;--o)l.push(i=r[o]=new _C(r[o])),i.parent=n,i.depth=n.depth+1;return a.eachBefore(mC)}function fC(t){return t.children}function pC(t){return Array.isArray(t)?t[1]:null}function gC(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function mC(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function _C(t){this.data=t,this.depth=this.height=0,this.parent=null}function vC(t){return null==t?null:yC(t)}function yC(t){if("function"!=typeof t)throw new Error;return t}function bC(){return 0}function xC(t){return function(){return t}}nC.invert=function(t,e){for(var n,i=e,r=i*i,o=r*r*r,s=0;s<12&&(o=(r=(i-=n=(i*(ZT+JT*r+o*(QT+tC*r))-e)/(ZT+3*JT*r+o*(7*QT+9*tC*r)))*i)*r*r,!(Yb(n)<1e-12));++s);return[eC*t*(ZT+3*JT*r+o*(7*QT+9*tC*r))/Kb(i),ax(nx(i)/eC)]},iC.invert=jT(Vb),rC.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,s=o*o;i-=n=(i*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Yb(n)>1e-6&&--r>0);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},oC.invert=jT(ax),sC.invert=jT((function(t){return 2*Vb(t)})),aC.invert=function(t,e){return[-e,2*Vb(Jb(t))-jb]},_C.prototype=dC.prototype={constructor:_C,count:function(){return this.eachAfter(uC)},each:function(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,o=this,s=[o],a=[],l=-1;o=s.pop();)if(a.push(o),n=o.children)for(i=0,r=n.length;i<r;++i)s.push(n[i]);for(;o=a.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,i,r=this,o=[r],s=-1;r=o.pop();)if(t.call(e,r,++s,this),n=r.children)for(i=n.length-1;i>=0;--i)o.push(n[i]);return this},find:function(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;t=n.pop(),e=i.pop();for(;t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return dC(this).eachBefore(gC)},[Symbol.iterator]:function*(){var t,e,n,i,r=this,o=[r];do{for(t=o.reverse(),o=[];r=t.pop();)if(yield r,e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n])}while(o.length)}};const wC=4294967296;function SC(){let t=1;return()=>(t=(1664525*t+1013904223)%wC)/wC}function TC(t,e){for(var n,i,r=0,o=(t=function(t,e){let n,i,r=t.length;for(;r;)i=e()*r--|0,n=t[r],t[r]=t[i],t[i]=n;return t}(Array.from(t),e)).length,s=[];r<o;)n=t[r],i&&MC(i,n)?++r:(i=RC(s=CC(s,n)),r=0);return i}function CC(t,e){var n,i;if(AC(e,t))return[e];for(n=0;n<t.length;++n)if(EC(e,t[n])&&AC(kC(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(EC(kC(t[n],t[i]),e)&&EC(kC(t[n],e),t[i])&&EC(kC(t[i],e),t[n])&&AC(IC(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function EC(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function MC(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function AC(t,e){for(var n=0;n<e.length;++n)if(!MC(t,e[n]))return!1;return!0}function RC(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return kC(t[0],t[1]);case 3:return IC(t[0],t[1],t[2])}}function kC(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,s=e.y,a=e.r,l=o-n,c=s-i,h=a-r,u=Math.sqrt(l*l+c*c);return{x:(n+o+l/u*h)/2,y:(i+s+c/u*h)/2,r:(u+r+a)/2}}function IC(t,e,n){var i=t.x,r=t.y,o=t.r,s=e.x,a=e.y,l=e.r,c=n.x,h=n.y,u=n.r,d=i-s,f=i-c,p=r-a,g=r-h,m=l-o,_=u-o,v=i*i+r*r-o*o,y=v-s*s-a*a+l*l,b=v-c*c-h*h+u*u,x=f*p-d*g,w=(p*b-g*y)/(2*x)-i,S=(g*m-p*_)/x,T=(f*y-d*b)/(2*x)-r,C=(d*_-f*m)/x,E=S*S+C*C-1,M=2*(o+w*S+T*C),A=w*w+T*T-o*o,R=-(Math.abs(E)>1e-6?(M+Math.sqrt(M*M-4*E*A))/(2*E):A/M);return{x:i+w+S*R,y:r+T+C*R,r:R}}function PC(t,e,n){var i,r,o,s,a=t.x-e.x,l=t.y-e.y,c=a*a+l*l;c?(r=e.r+n.r,r*=r,s=t.r+n.r,r>(s*=s)?(i=(c+s-r)/(2*c),o=Math.sqrt(Math.max(0,s/c-i*i)),n.x=t.x-i*a-o*l,n.y=t.y-i*l+o*a):(i=(c+r-s)/(2*c),o=Math.sqrt(Math.max(0,r/c-i*i)),n.x=e.x+i*a-o*l,n.y=e.y+i*l+o*a)):(n.x=e.x+n.r,n.y=e.y)}function FC(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function DC(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return r*r+o*o}function LC(t){this._=t,this.next=null,this.previous=null}function OC(t,e){if(!(o=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,i,r,o,s,a,l,c,h,u,d;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(i=t[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;PC(i,n,r=t[2]),n=new LC(n),i=new LC(i),r=new LC(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;t:for(l=3;l<o;++l){PC(n._,i._,r=t[l]),r=new LC(r),c=i.next,h=n.previous,u=i._.r,d=n._.r;do{if(u<=d){if(FC(c._,r._)){i=c,n.next=i,i.previous=n,--l;continue t}u+=c._.r,c=c.next}else{if(FC(h._,r._)){(n=h).next=i,i.previous=n,--l;continue t}d+=h._.r,h=h.previous}}while(c!==h.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=DC(n);(r=r.next)!==i;)(a=DC(r))<s&&(n=r,s=a);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=TC(n,e),l=0;l<o;++l)(n=t[l]).x-=r.x,n.y-=r.y;return r.r}function NC(t){return Math.sqrt(t.value)}function zC(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function GC(t,e,n){return function(i){if(r=i.children){var r,o,s,a=r.length,l=t(i)*e||0;if(l)for(o=0;o<a;++o)r[o].r+=l;if(s=OC(r,n),l)for(o=0;o<a;++o)r[o].r-=l;i.r=s+l}}}function BC(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function UC(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function jC(t,e,n,i,r){for(var o,s=t.children,a=-1,l=s.length,c=t.value&&(i-e)/t.value;++a<l;)(o=s[a]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*c}var $C={depth:-1},HC={},WC={};function XC(t){return t.id}function YC(t){return t.parentId}function VC(t){let e=t.length;if(e<2)return"";for(;--e>1&&!qC(t,e););return t.slice(0,e)}function qC(t,e){if("/"===t[e]){let n=0;for(;e>0&&"\\"===t[--e];)++n;if(0==(1&n))return!0}return!1}function KC(t,e){return t.parent===e.parent?1:2}function ZC(t){var e=t.children;return e?e[0]:t.t}function JC(t){var e=t.children;return e?e[e.length-1]:t.t}function QC(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function tE(t,e,n){return t.a.parent===e.parent?t.a:n}function eE(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function nE(t,e,n,i,r){for(var o,s=t.children,a=-1,l=s.length,c=t.value&&(r-n)/t.value;++a<l;)(o=s[a]).x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*c}eE.prototype=Object.create(_C.prototype);var iE=(1+Math.sqrt(5))/2;function rE(t,e,n,i,r,o){for(var s,a,l,c,h,u,d,f,p,g,m,_=[],v=e.children,y=0,b=0,x=v.length,w=e.value;y<x;){l=r-n,c=o-i;do{h=v[b++].value}while(!h&&b<x);for(u=d=h,m=h*h*(g=Math.max(c/l,l/c)/(w*t)),p=Math.max(d/m,m/u);b<x;++b){if(h+=a=v[b].value,a<u&&(u=a),a>d&&(d=a),m=h*h*g,(f=Math.max(d/m,m/u))>p){h-=a;break}p=f}_.push(s={value:h,dice:l<c,children:v.slice(y,b)}),s.dice?jC(s,n,i,r,w?i+=c*h/w:o):nE(s,n,i,w?n+=l*h/w:r,o),w-=h,y=b}return _}var oE=function t(e){function n(t,n,i,r,o){rE(e,t,n,i,r,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(iE);var sE=function t(e){function n(t,n,i,r,o){if((s=t._squarify)&&s.ratio===e)for(var s,a,l,c,h,u=-1,d=s.length,f=t.value;++u<d;){for(l=(a=s[u]).children,c=a.value=0,h=l.length;c<h;++c)a.value+=l[c].value;a.dice?jC(a,n,i,r,f?i+=(o-i)*a.value/f:o):nE(a,n,i,f?n+=(r-n)*a.value/f:r,o),f-=a.value}else t._squarify=s=rE(e,t,n,i,r,o),s.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(iE);function aE(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function lE(t,e){return t[0]-e[0]||t[1]-e[1]}function cE(t){const e=t.length,n=[0,1];let i,r=2;for(i=2;i<e;++i){for(;r>1&&aE(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}var hE=Math.random,uE=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(hE),dE=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(hE),fE=function t(e){function n(t,n){var i,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=i)o=i,i=null;else do{i=2*e()-1,o=2*e()-1,r=i*i+o*o}while(!r||r>1);return t+n*o*Math.sqrt(-2*Math.log(r)/r)}}return n.source=t,n}(hE),pE=function t(e){var n=fE.source(e);function i(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(hE),gE=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,i=t;i>1;--i)n+=e();return n+i*e()}}return n.source=t,n}(hE),mE=function t(e){var n=gE.source(e);function i(t){if(0==(t=+t))return e;var i=n(t);return function(){return i()/t}}return i.source=t,i}(hE),_E=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(hE),vE=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(hE),yE=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(hE),bE=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(hE),xE=function t(e){var n=fE.source(e)();function i(t,i){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(i=null==i?1:+i,1===t)return()=>-Math.log1p(-e())*i;var r=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(r)),s=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),a=1+o*t}while(a<=0);a*=a*a;var l=1-e()}while(l>=1-.0331*t*t*t*t&&Math.log(l)>=.5*t*t+r*(1-a+Math.log(a)));return r*a*s()*i}}return i.source=t,i}(hE),wE=function t(e){var n=xE.source(e);function i(t,e){var i=n(t),r=n(e);return function(){var t=i();return 0===t?0:t/(t+r())}}return i.source=t,i}(hE),SE=function t(e){var n=bE.source(e),i=wE.source(e);function r(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var r=0,o=t,s=e;o*s>16&&o*(1-s)>16;){var a=Math.floor((o+1)*s),l=i(a,o-a+1)();l<=s?(r+=a,o-=a,s=(s-l)/(1-l)):(o=a-1,s/=l)}for(var c=s<.5,h=n(c?s:1-s),u=h(),d=0;u<=o;++d)u+=h();return r+(c?d:o-d)}}return r.source=t,r}(hE),TE=function t(e){function n(t,n,i){var r;return 0==(t=+t)?r=t=>-Math.log(t):(t=1/t,r=e=>Math.pow(e,t)),n=null==n?0:+n,i=null==i?1:+i,function(){return n+i*r(-Math.log1p(-e()))}}return n.source=t,n}(hE),CE=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(hE),EE=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var i=e();return t+n*Math.log(i/(1-i))}}return n.source=t,n}(hE),ME=function t(e){var n=xE.source(e),i=SE.source(e);function r(t){return function(){for(var r=0,o=t;o>16;){var s=Math.floor(.875*o),a=n(s)();if(a>o)return r+i(s-1,o/a)();r+=s,o-=a}for(var l=-Math.log1p(-e()),c=0;l<=o;++c)l-=Math.log1p(-e());return r+c}}return r.source=t,r}(hE);const AE=1/4294967296;function RE(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function kE(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const IE=Symbol("implicit");function PE(){var t=new Ru,e=[],n=[],i=IE;function r(r){let o=t.get(r);if(void 0===o){if(i!==IE)return i;t.set(r,o=e.push(r)-1)}return n[o%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Ru;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return PE(e,n).unknown(i)},RE.apply(r,arguments),r}function FE(){var t,e,n=PE().unknown(void 0),i=n.domain,r=n.range,o=0,s=1,a=!1,l=0,c=0,h=.5;function u(){var n=i().length,u=s<o,d=u?s:o,f=u?o:s;t=(f-d)/Math.max(1,n-l+2*c),a&&(t=Math.floor(t)),d+=(f-d-t*(n-l))*h,e=t*(1-l),a&&(d=Math.round(d),e=Math.round(e));var p=md(n).map((function(e){return d+t*e}));return r(u?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),u()):i()},n.range=function(t){return arguments.length?([o,s]=t,o=+o,s=+s,u()):[o,s]},n.rangeRound=function(t){return[o,s]=t,o=+o,s=+s,a=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,u()):a},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),u()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),u()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,u()):c},n.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),u()):h},n.copy=function(){return FE(i(),[o,s]).round(a).paddingInner(l).paddingOuter(c).align(h)},RE.apply(u(),arguments)}function DE(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return DE(e())},t}function LE(t){return+t}var OE=[0,1];function NE(t){return t}function zE(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function GE(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=zE(r,i),o=n(s,o)):(i=zE(i,r),o=n(o,s)),function(t){return o(i(t))}}function BE(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=zE(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=pu(t,e,1,i)-1;return o[n](r[n](e))}}function UE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jE(){var t,e,n,i,r,o,s=OE,a=OE,l=Wg,c=NE;function h(){var t=Math.min(s.length,a.length);return c!==NE&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(s[0],s[t-1])),i=t>2?BE:GE,r=o=null,u}function u(e){return null==e||isNaN(e=+e)?n:(r||(r=i(s.map(t),a,l)))(t(c(e)))}return u.invert=function(n){return c(e((o||(o=i(a,s.map(t),Bg)))(n)))},u.domain=function(t){return arguments.length?(s=Array.from(t,LE),h()):s.slice()},u.range=function(t){return arguments.length?(a=Array.from(t),h()):a.slice()},u.rangeRound=function(t){return a=Array.from(t),l=Xg,h()},u.clamp=function(t){return arguments.length?(c=!!t||NE,h()):c!==NE},u.interpolate=function(t){return arguments.length?(l=t,h()):l},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,i){return t=n,e=i,h()}}function $E(){return jE()(NE,NE)}function HE(t,e,n,i){var r,o=td(t,e,n);switch((i=Eb(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=Gb(o,s))||(i.precision=r),Fb(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=Bb(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=zb(o))||(i.precision=r-2*("%"===i.type))}return Pb(i)}function WE(t){var e=t.domain;return t.ticks=function(t){var n=e();return Ju(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return HE(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,o=e(),s=0,a=o.length-1,l=o[s],c=o[a],h=10;for(c<l&&(r=l,l=c,c=r,r=s,s=a,a=r);h-- >0;){if((r=Qu(l,c,n))===i)return o[s]=l,o[a]=c,e(o);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return t},t}function XE(t,e){var n,i=0,r=(t=t.slice()).length-1,o=t[i],s=t[r];return s<o&&(n=i,i=r,r=n,n=o,o=s,s=n),t[i]=e.floor(o),t[r]=e.ceil(s),t}function YE(t){return Math.log(t)}function VE(t){return Math.exp(t)}function qE(t){return-Math.log(-t)}function KE(t){return-Math.exp(-t)}function ZE(t){return isFinite(t)?+("1e"+t):t<0?0:t}function JE(t){return(e,n)=>-t(-e,n)}function QE(t){const e=t(YE,VE),n=e.domain;let i,r,o=10;function s(){return i=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),r=function(t){return 10===t?ZE:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(i=JE(i),r=JE(r),t(qE,KE)):t(YE,VE),e}return e.base=function(t){return arguments.length?(o=+t,s()):o},e.domain=function(t){return arguments.length?(n(t),s()):n()},e.ticks=t=>{const e=n();let s=e[0],a=e[e.length-1];const l=a<s;l&&([s,a]=[a,s]);let c,h,u=i(s),d=i(a);const f=null==t?10:+t;let p=[];if(!(o%1)&&d-u<f){if(u=Math.floor(u),d=Math.ceil(d),s>0){for(;u<=d;++u)for(c=1;c<o;++c)if(h=u<0?c/r(-u):c*r(u),!(h<s)){if(h>a)break;p.push(h)}}else for(;u<=d;++u)for(c=o-1;c>=1;--c)if(h=u>0?c/r(-u):c*r(u),!(h<s)){if(h>a)break;p.push(h)}2*p.length<f&&(p=Ju(s,a,f))}else p=Ju(u,d,Math.min(d-u,f)).map(r);return l?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=Eb(n)).precision||(n.trim=!0),n=Pb(n)),t===1/0)return n;const s=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/r(Math.round(i(t)));return e*o<o-.5&&(e*=o),e<=s?n(t):""}},e.nice=()=>n(XE(n(),{floor:t=>r(Math.floor(i(t))),ceil:t=>r(Math.ceil(i(t)))})),e}function tM(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function eM(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function nM(t){var e=1,n=t(tM(e),eM(e));return n.constant=function(n){return arguments.length?t(tM(e=+n),eM(e)):e},WE(n)}function iM(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function rM(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function oM(t){return t<0?-t*t:t*t}function sM(t){var e=t(NE,NE),n=1;function i(){return 1===n?t(NE,NE):.5===n?t(rM,oM):t(iM(n),iM(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},WE(e)}function aM(){var t=sM(jE());return t.copy=function(){return UE(t,aM()).exponent(t.exponent())},RE.apply(t,arguments),t}function lM(t){return Math.sign(t)*t*t}function cM(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}var hM=new Date,uM=new Date;function dM(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var s,a=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return a;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<i);return a},r.filter=function(n){return dM((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return hM.setTime(+e),uM.setTime(+i),t(hM),t(uM),Math.floor(n(hM,uM))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var fM=dM((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));fM.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?dM((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):fM:null};var pM=fM,gM=fM.range;var mM=dM((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),_M=mM,vM=mM.range,yM=dM((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),bM=yM,xM=yM.range,wM=dM((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),SM=wM,TM=wM.range,CM=dM((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5),(t=>t.getDate()-1)),EM=CM,MM=CM.range;function AM(t){return dM((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var RM=AM(0),kM=AM(1),IM=AM(2),PM=AM(3),FM=AM(4),DM=AM(5),LM=AM(6),OM=RM.range,NM=kM.range,zM=IM.range,GM=PM.range,BM=FM.range,UM=DM.range,jM=LM.range,$M=dM((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),HM=$M,WM=$M.range,XM=dM((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));XM.every=function(t){return isFinite(t=Math.floor(t))&&t>0?dM((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var YM=XM,VM=XM.range,qM=dM((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),KM=qM,ZM=qM.range,JM=dM((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),QM=JM,tA=JM.range,eA=dM((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),nA=eA,iA=eA.range;function rA(t){return dM((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var oA=rA(0),sA=rA(1),aA=rA(2),lA=rA(3),cA=rA(4),hA=rA(5),uA=rA(6),dA=oA.range,fA=sA.range,pA=aA.range,gA=lA.range,mA=cA.range,_A=hA.range,vA=uA.range,yA=dM((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),bA=yA,xA=yA.range,wA=dM((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));wA.every=function(t){return isFinite(t=Math.floor(t))&&t>0?dM((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var SA=wA,TA=wA.range;function CA(t,e,n,i,r,o){const s=[[_M,1,1e3],[_M,5,5e3],[_M,15,15e3],[_M,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[r,1,36e5],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,864e5],[i,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function a(e,n,i){const r=Math.abs(n-e)/i,o=su((([,,t])=>t)).right(s,r);if(o===s.length)return t.every(td(e/31536e6,n/31536e6,i));if(0===o)return pM.every(Math.max(td(e,n,i),1));const[a,l]=s[r/s[o-1][2]<s[o][2]/r?o-1:o];return a.every(l)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:a(t,e,n),o=r?r.range(t,+e+1):[];return i?o.reverse():o},a]}const[EA,MA]=CA(SA,bA,oA,nA,QM,KM),[AA,RA]=CA(YM,HM,RM,EM,SM,bM);function kA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function IA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function PA(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function FA(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=WA(r),h=XA(r),u=WA(o),d=XA(o),f=WA(s),p=XA(s),g=WA(a),m=XA(a),_=WA(l),v=XA(l),y={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:fR,e:fR,f:vR,g:RR,G:IR,H:pR,I:gR,j:mR,L:_R,m:yR,M:bR,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:tk,s:ek,S:xR,u:wR,U:SR,V:CR,w:ER,W:MR,x:null,X:null,y:AR,Y:kR,Z:PR,"%":QR},b={a:function(t){return s[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:FR,e:FR,f:zR,g:qR,G:ZR,H:DR,I:LR,j:OR,L:NR,m:GR,M:BR,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:tk,s:ek,S:UR,u:jR,U:$R,V:WR,w:XR,W:YR,x:null,X:null,y:VR,Y:KR,Z:JR,"%":QR},x={a:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=_.exec(e.slice(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=m.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return T(t,e,n,i)},d:iR,e:iR,f:cR,g:QA,G:JA,H:oR,I:oR,j:rR,L:lR,m:nR,M:sR,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=h.get(i[0].toLowerCase()),n+i[0].length):-1},q:eR,Q:uR,s:dR,S:aR,u:VA,U:qA,V:KA,w:YA,W:ZA,x:function(t,e,i){return T(t,n,e,i)},X:function(t,e,n){return T(t,i,e,n)},y:QA,Y:JA,Z:tR,"%":hR};function w(t,e){return function(n){var i,r,o,s=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(l,a)),null!=(r=GA[i=t.charAt(++a)])?i=t.charAt(++a):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),s.push(i),l=a+1);return s.push(t.slice(l,a)),s.join("")}}function S(t,e){return function(n){var i,r,o=PA(1900,void 0,1);if(T(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=IA(PA(o.y,0,1))).getUTCDay(),i=r>4||0===r?sA.ceil(i):sA(i),i=nA.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=kA(PA(o.y,0,1))).getDay(),i=r>4||0===r?kM.ceil(i):kM(i),i=EM.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?IA(PA(o.y,0,1)).getUTCDay():kA(PA(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,IA(o)):kA(o)}}function T(t,e,n,i){for(var r,o,s=0,a=e.length,l=n.length;s<a;){if(i>=l)return-1;if(37===(r=e.charCodeAt(s++))){if(r=e.charAt(s++),!(o=x[r in GA?e.charAt(s++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return y.x=w(n,y),y.X=w(i,y),y.c=w(e,y),b.x=w(n,b),b.X=w(i,b),b.c=w(e,b),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}var DA,LA,OA,NA,zA,GA={"-":"",_:" ",0:"0"},BA=/^\s*\d+/,UA=/^%/,jA=/[\\^$*+?|[\]().{}]/g;function $A(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function HA(t){return t.replace(jA,"\\$&")}function WA(t){return new RegExp("^(?:"+t.map(HA).join("|")+")","i")}function XA(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function YA(t,e,n){var i=BA.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function VA(t,e,n){var i=BA.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function qA(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function KA(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function ZA(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function JA(t,e,n){var i=BA.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function QA(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function tR(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function eR(t,e,n){var i=BA.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function nR(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function iR(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function rR(t,e,n){var i=BA.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function oR(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function sR(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function aR(t,e,n){var i=BA.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function lR(t,e,n){var i=BA.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function cR(t,e,n){var i=BA.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function hR(t,e,n){var i=UA.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function uR(t,e,n){var i=BA.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function dR(t,e,n){var i=BA.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function fR(t,e){return $A(t.getDate(),e,2)}function pR(t,e){return $A(t.getHours(),e,2)}function gR(t,e){return $A(t.getHours()%12||12,e,2)}function mR(t,e){return $A(1+EM.count(YM(t),t),e,3)}function _R(t,e){return $A(t.getMilliseconds(),e,3)}function vR(t,e){return _R(t,e)+"000"}function yR(t,e){return $A(t.getMonth()+1,e,2)}function bR(t,e){return $A(t.getMinutes(),e,2)}function xR(t,e){return $A(t.getSeconds(),e,2)}function wR(t){var e=t.getDay();return 0===e?7:e}function SR(t,e){return $A(RM.count(YM(t)-1,t),e,2)}function TR(t){var e=t.getDay();return e>=4||0===e?FM(t):FM.ceil(t)}function CR(t,e){return t=TR(t),$A(FM.count(YM(t),t)+(4===YM(t).getDay()),e,2)}function ER(t){return t.getDay()}function MR(t,e){return $A(kM.count(YM(t)-1,t),e,2)}function AR(t,e){return $A(t.getFullYear()%100,e,2)}function RR(t,e){return $A((t=TR(t)).getFullYear()%100,e,2)}function kR(t,e){return $A(t.getFullYear()%1e4,e,4)}function IR(t,e){var n=t.getDay();return $A((t=n>=4||0===n?FM(t):FM.ceil(t)).getFullYear()%1e4,e,4)}function PR(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$A(e/60|0,"0",2)+$A(e%60,"0",2)}function FR(t,e){return $A(t.getUTCDate(),e,2)}function DR(t,e){return $A(t.getUTCHours(),e,2)}function LR(t,e){return $A(t.getUTCHours()%12||12,e,2)}function OR(t,e){return $A(1+nA.count(SA(t),t),e,3)}function NR(t,e){return $A(t.getUTCMilliseconds(),e,3)}function zR(t,e){return NR(t,e)+"000"}function GR(t,e){return $A(t.getUTCMonth()+1,e,2)}function BR(t,e){return $A(t.getUTCMinutes(),e,2)}function UR(t,e){return $A(t.getUTCSeconds(),e,2)}function jR(t){var e=t.getUTCDay();return 0===e?7:e}function $R(t,e){return $A(oA.count(SA(t)-1,t),e,2)}function HR(t){var e=t.getUTCDay();return e>=4||0===e?cA(t):cA.ceil(t)}function WR(t,e){return t=HR(t),$A(cA.count(SA(t),t)+(4===SA(t).getUTCDay()),e,2)}function XR(t){return t.getUTCDay()}function YR(t,e){return $A(sA.count(SA(t)-1,t),e,2)}function VR(t,e){return $A(t.getUTCFullYear()%100,e,2)}function qR(t,e){return $A((t=HR(t)).getUTCFullYear()%100,e,2)}function KR(t,e){return $A(t.getUTCFullYear()%1e4,e,4)}function ZR(t,e){var n=t.getUTCDay();return $A((t=n>=4||0===n?cA(t):cA.ceil(t)).getUTCFullYear()%1e4,e,4)}function JR(){return"+0000"}function QR(){return"%"}function tk(t){return+t}function ek(t){return Math.floor(+t/1e3)}function nk(t){return DA=FA(t),LA=DA.format,OA=DA.parse,NA=DA.utcFormat,zA=DA.utcParse,DA}nk({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ik=Date.prototype.toISOString?function(t){return t.toISOString()}:NA("%Y-%m-%dT%H:%M:%S.%LZ"),rk=ik;var ok=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:zA("%Y-%m-%dT%H:%M:%S.%LZ"),sk=ok;function ak(t){return new Date(t)}function lk(t){return t instanceof Date?+t:+new Date(+t)}function ck(t,e,n,i,r,o,s,a,l,c){var h=$E(),u=h.invert,d=h.domain,f=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),_=c("%a %d"),v=c("%b %d"),y=c("%B"),b=c("%Y");function x(t){return(l(t)<t?f:a(t)<t?p:s(t)<t?g:o(t)<t?m:i(t)<t?r(t)<t?_:v:n(t)<t?y:b)(t)}return h.invert=function(t){return new Date(u(t))},h.domain=function(t){return arguments.length?d(Array.from(t,lk)):d().map(ak)},h.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},h.tickFormat=function(t,e){return null==e?x:c(e)},h.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(XE(n,t)):h},h.copy=function(){return UE(h,ck(t,e,n,i,r,o,s,a,l,c))},h}function hk(){var t,e,n,i,r,o=0,s=1,a=NE,l=!1;function c(e){return null==e||isNaN(e=+e)?r:a(0===n?.5:(e=(i(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function h(t){return function(e){var n,i;return arguments.length?([n,i]=e,a=t(n,i),c):[a(0),a(1)]}}return c.domain=function(r){return arguments.length?([o,s]=r,t=i(o=+o),e=i(s=+s),n=t===e?0:1/(e-t),c):[o,s]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(a=t,c):a},c.range=h(Wg),c.rangeRound=h(Xg),c.unknown=function(t){return arguments.length?(r=t,c):r},function(r){return i=r,t=r(o),e=r(s),n=t===e?0:1/(e-t),c}}function uk(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function dk(){var t=sM(hk());return t.copy=function(){return uk(t,dk()).exponent(t.exponent())},kE.apply(t,arguments)}function fk(){var t,e,n,i,r,o,s,a=0,l=.5,c=1,h=1,u=NE,d=!1;function f(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-e)*(h*t<h*e?i:r),u(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,i,r;return arguments.length?([n,i,r]=e,u=um(t,[n,i,r]),f):[u(0),u(.5),u(1)]}}return f.domain=function(s){return arguments.length?([a,l,c]=s,t=o(a=+a),e=o(l=+l),n=o(c=+c),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),h=e<t?-1:1,f):[a,l,c]},f.clamp=function(t){return arguments.length?(d=!!t,f):d},f.interpolator=function(t){return arguments.length?(u=t,f):u},f.range=p(Wg),f.rangeRound=p(Xg),f.unknown=function(t){return arguments.length?(s=t,f):s},function(s){return o=s,t=s(a),e=s(l),n=s(c),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),h=e<t?-1:1,f}}function pk(){var t=sM(fk());return t.copy=function(){return uk(t,pk()).exponent(t.exponent())},kE.apply(t,arguments)}function gk(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var mk=gk("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),_k=gk("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vk=gk("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),yk=gk("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),bk=gk("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),xk=gk("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),wk=gk("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Sk=gk("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Tk=gk("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ck=gk("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ek=t=>Dg(t[t.length-1]),Mk=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(gk),Ak=Ek(Mk),Rk=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(gk),kk=Ek(Rk),Ik=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(gk),Pk=Ek(Ik),Fk=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(gk),Dk=Ek(Fk),Lk=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(gk),Ok=Ek(Lk),Nk=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(gk),zk=Ek(Nk),Gk=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(gk),Bk=Ek(Gk),Uk=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(gk),jk=Ek(Uk),$k=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(gk),Hk=Ek($k),Wk=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(gk),Xk=Ek(Wk),Yk=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(gk),Vk=Ek(Yk),qk=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(gk),Kk=Ek(qk),Zk=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(gk),Jk=Ek(Zk),Qk=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(gk),tI=Ek(Qk),eI=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(gk),nI=Ek(eI),iI=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(gk),rI=Ek(iI),oI=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(gk),sI=Ek(oI),aI=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(gk),lI=Ek(aI),cI=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(gk),hI=Ek(cI),uI=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(gk),dI=Ek(uI),fI=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(gk),pI=Ek(fI),gI=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(gk),mI=Ek(gI),_I=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(gk),vI=Ek(_I),yI=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(gk),bI=Ek(yI),xI=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(gk),wI=Ek(xI),SI=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(gk),TI=Ek(SI),CI=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(gk),EI=Ek(CI);var MI=hm(wg(300,.5,0),wg(-240,.5,1)),AI=hm(wg(-100,.75,.35),wg(80,1.5,.8)),RI=hm(wg(260,.75,.35),wg(80,1.5,.8)),kI=wg();var II=zp(),PI=Math.PI/3,FI=2*Math.PI/3;function DI(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var LI=DI(gk("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),OI=DI(gk("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),NI=DI(gk("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),zI=DI(gk("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function GI(t){return function(){return t}}const BI=Math.abs,UI=Math.atan2,jI=Math.cos,$I=Math.max,HI=Math.min,WI=Math.sin,XI=Math.sqrt,YI=Math.PI,VI=YI/2,qI=2*YI;function KI(t){return t>1?0:t<-1?YI:Math.acos(t)}function ZI(t){return t>=1?VI:t<=-1?-VI:Math.asin(t)}function JI(t){return t.innerRadius}function QI(t){return t.outerRadius}function tP(t){return t.startAngle}function eP(t){return t.endAngle}function nP(t){return t&&t.padAngle}function iP(t,e,n,i,r,o,s,a){var l=n-t,c=i-e,h=s-r,u=a-o,d=u*l-h*c;if(!(d*d<1e-12))return[t+(d=(h*(e-o)-u*(t-r))/d)*l,e+d*c]}function rP(t,e,n,i,r,o,s){var a=t-n,l=e-i,c=(s?o:-o)/XI(a*a+l*l),h=c*l,u=-c*a,d=t+h,f=e+u,p=n+h,g=i+u,m=(d+p)/2,_=(f+g)/2,v=p-d,y=g-f,b=v*v+y*y,x=r-o,w=d*g-p*f,S=(y<0?-1:1)*XI($I(0,x*x*b-w*w)),T=(w*y-v*S)/b,C=(-w*v-y*S)/b,E=(w*y+v*S)/b,M=(-w*v+y*S)/b,A=T-m,R=C-_,k=E-m,I=M-_;return A*A+R*R>k*k+I*I&&(T=E,C=M),{cx:T,cy:C,x01:-h,y01:-u,x11:T*(r/x-1),y11:C*(r/x-1)}}var oP=Array.prototype.slice;function sP(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function aP(t){this._context=t}function lP(t){return new aP(t)}function cP(t){return t[0]}function hP(t){return t[1]}function uP(t,e){var n=GI(!0),i=null,r=lP,o=null;function s(s){var a,l,c,h=(s=sP(s)).length,u=!1;for(null==i&&(o=r(c=Mv())),a=0;a<=h;++a)!(a<h&&n(l=s[a],a,s))===u&&((u=!u)?o.lineStart():o.lineEnd()),u&&o.point(+t(l,a,s),+e(l,a,s));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?cP:GI(t),e="function"==typeof e?e:void 0===e?hP:GI(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:GI(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:GI(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:GI(!!t),s):n},s.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),s):r},s.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),s):i},s}function dP(t,e,n){var i=null,r=GI(!0),o=null,s=lP,a=null;function l(l){var c,h,u,d,f,p=(l=sP(l)).length,g=!1,m=new Array(p),_=new Array(p);for(null==o&&(a=s(f=Mv())),c=0;c<=p;++c){if(!(c<p&&r(d=l[c],c,l))===g)if(g=!g)h=c,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),u=c-1;u>=h;--u)a.point(m[u],_[u]);a.lineEnd(),a.areaEnd()}g&&(m[c]=+t(d,c,l),_[c]=+e(d,c,l),a.point(i?+i(d,c,l):m[c],n?+n(d,c,l):_[c]))}if(f)return a=null,f+""||null}function c(){return uP().defined(r).curve(s).context(o)}return t="function"==typeof t?t:void 0===t?cP:GI(+t),e="function"==typeof e?e:GI(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?hP:GI(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:GI(+e),i=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:GI(+e),l):t},l.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:GI(+t),l):i},l.y=function(t){return arguments.length?(e="function"==typeof t?t:GI(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:GI(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:GI(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(i).y(e)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:GI(!!t),l):r},l.curve=function(t){return arguments.length?(s=t,null!=o&&(a=s(o)),l):s},l.context=function(t){return arguments.length?(null==t?o=a=null:a=s(o=t),l):o},l}function fP(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function pP(t){return t}aP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var gP=_P(lP);function mP(t){this._curve=t}function _P(t){function e(e){return new mP(t(e))}return e._curve=t,e}function vP(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(_P(t)):e()._curve},t}function yP(){return vP(uP().curve(gP))}function bP(){var t=dP().curve(gP),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return vP(n())},delete t.lineX0,t.lineEndAngle=function(){return vP(i())},delete t.lineX1,t.lineInnerRadius=function(){return vP(r())},delete t.lineY0,t.lineOuterRadius=function(){return vP(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(_P(t)):e()._curve},t}function xP(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}mP.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class wP{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class SP{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0==this._point++)this._x0=t,this._y0=e;else{const n=xP(this._x0,this._y0),i=xP(this._x0,this._y0=(this._y0+e)/2),r=xP(t,this._y0),o=xP(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...i,...r,...o)}}}function TP(t){return new wP(t,!0)}function CP(t){return new wP(t,!1)}function EP(t){return new SP(t)}function MP(t){return t.source}function AP(t){return t.target}function RP(t){let e=MP,n=AP,i=cP,r=hP,o=null,s=null;function a(){let a;const l=oP.call(arguments),c=e.apply(this,l),h=n.apply(this,l);if(null==o&&(s=t(a=Mv())),s.lineStart(),l[0]=c,s.point(+i.apply(this,l),+r.apply(this,l)),l[0]=h,s.point(+i.apply(this,l),+r.apply(this,l)),s.lineEnd(),a)return s=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(i="function"==typeof t?t:GI(+t),a):i},a.y=function(t){return arguments.length?(r="function"==typeof t?t:GI(+t),a):r},a.context=function(e){return arguments.length?(null==e?o=s=null:s=t(o=e),a):o},a}const kP=XI(3);var IP={draw(t,e){const n=.59436*XI(e+HI(e/28,.75)),i=n/2,r=i*kP;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},PP={draw(t,e){const n=XI(e/YI);t.moveTo(n,0),t.arc(0,0,n,0,qI)}},FP={draw(t,e){const n=XI(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const DP=XI(1/3),LP=2*DP;var OP={draw(t,e){const n=XI(e/LP),i=n*DP;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},NP={draw(t,e){const n=.62625*XI(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},zP={draw(t,e){const n=.87559*XI(e-HI(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},GP={draw(t,e){const n=XI(e),i=-n/2;t.rect(i,i,n,n)}},BP={draw(t,e){const n=.4431*XI(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const UP=WI(YI/10)/WI(7*YI/10),jP=WI(qI/10)*UP,$P=-jI(qI/10)*UP;var HP={draw(t,e){const n=XI(.8908130915292852*e),i=jP*n,r=$P*n;t.moveTo(0,-n),t.lineTo(i,r);for(let e=1;e<5;++e){const o=qI*e/5,s=jI(o),a=WI(o);t.lineTo(a*n,-s*n),t.lineTo(s*i-a*r,a*i+s*r)}t.closePath()}};const WP=XI(3);var XP={draw(t,e){const n=-XI(e/(3*WP));t.moveTo(0,2*n),t.lineTo(-WP*n,-n),t.lineTo(WP*n,-n),t.closePath()}};const YP=XI(3);var VP={draw(t,e){const n=.6824*XI(e),i=n/2,r=n*YP/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}};const qP=-.5,KP=XI(3)/2,ZP=1/XI(12),JP=3*(ZP/2+1);var QP={draw(t,e){const n=XI(e/JP),i=n/2,r=n*ZP,o=i,s=n*ZP+n,a=-o,l=s;t.moveTo(i,r),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(qP*i-KP*r,KP*i+qP*r),t.lineTo(qP*o-KP*s,KP*o+qP*s),t.lineTo(qP*a-KP*l,KP*a+qP*l),t.lineTo(qP*i+KP*r,qP*r-KP*i),t.lineTo(qP*o+KP*s,qP*s-KP*o),t.lineTo(qP*a+KP*l,qP*l-KP*a),t.closePath()}},tF={draw(t,e){const n=.6189*XI(e-HI(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const eF=[PP,FP,OP,GP,HP,XP,QP],nF=[PP,zP,tF,VP,IP,BP,NP];function iF(){}function rF(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function oF(t){this._context=t}function sF(t){this._context=t}function aF(t){this._context=t}function lF(t,e){this._basis=new oF(t),this._beta=e}oF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rF(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rF(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},sF.prototype={areaStart:iF,areaEnd:iF,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:rF(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},aF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:rF(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},lF.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],s=t[n]-r,a=e[n]-o,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*s),this._beta*e[l]+(1-this._beta)*(o+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var cF=function t(e){function n(t){return 1===e?new oF(t):new lF(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function hF(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function uF(t,e){this._context=t,this._k=(1-e)/6}uF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:hF(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:hF(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var dF=function t(e){function n(t){return new uF(t,e)}return n.tension=function(e){return t(+e)},n}(0);function fF(t,e){this._context=t,this._k=(1-e)/6}fF.prototype={areaStart:iF,areaEnd:iF,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:hF(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var pF=function t(e){function n(t){return new fF(t,e)}return n.tension=function(e){return t(+e)},n}(0);function gF(t,e){this._context=t,this._k=(1-e)/6}gF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hF(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var mF=function t(e){function n(t){return new gF(t,e)}return n.tension=function(e){return t(+e)},n}(0);function _F(t,e,n){var i=t._x1,r=t._y1,o=t._x2,s=t._y2;if(t._l01_a>1e-12){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/h,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(i,r,o,s,t._x2,t._y2)}function vF(t,e){this._context=t,this._alpha=e}vF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:_F(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var yF=function t(e){function n(t){return e?new vF(t,e):new uF(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function bF(t,e){this._context=t,this._alpha=e}bF.prototype={areaStart:iF,areaEnd:iF,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_F(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var xF=function t(e){function n(t){return e?new bF(t,e):new fF(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function wF(t,e){this._context=t,this._alpha=e}wF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_F(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var SF=function t(e){function n(t){return e?new wF(t,e):new gF(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function TF(t){this._context=t}function CF(t){return t<0?-1:1}function EF(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),s=(n-t._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(CF(o)+CF(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function MF(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function AF(t,e,n){var i=t._x0,r=t._y0,o=t._x1,s=t._y1,a=(o-i)/3;t._context.bezierCurveTo(i+a,r+a*e,o-a,s-a*n,o,s)}function RF(t){this._context=t}function kF(t){this._context=new IF(t)}function IF(t){this._context=t}function PF(t){this._context=t}function FF(t){var e,n,i=t.length-1,r=new Array(i),o=new Array(i),s=new Array(i);for(r[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,s[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(r[i-1]=s[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(s[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function DF(t,e){this._context=t,this._t=e}function LF(t,e){if((r=t.length)>1)for(var n,i,r,o=1,s=t[e[0]],a=s.length;o<r;++o)for(i=s,s=t[e[o]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function OF(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function NF(t,e){return t[e]}function zF(t){const e=[];return e.key=t,e}function GF(t){var e=t.map(BF);return OF(t).sort((function(t,n){return e[t]-e[n]}))}function BF(t){for(var e,n=-1,i=0,r=t.length,o=-1/0;++n<r;)(e=+t[n][1])>o&&(o=e,i=n);return i}function UF(t){var e=t.map(jF);return OF(t).sort((function(t,n){return e[t]-e[n]}))}function jF(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}TF.prototype={areaStart:iF,areaEnd:iF,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},RF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:AF(this,this._t0,MF(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,AF(this,MF(this,n=EF(this,t,e)),n);break;default:AF(this,this._t0,n=EF(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(kF.prototype=Object.create(RF.prototype)).point=function(t,e){RF.prototype.point.call(this,e,t)},IF.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}},PF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=FF(t),r=FF(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},DF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var $F=t=>()=>t;function HF(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function WF(t,e,n){this.k=t,this.x=e,this.y=n}WF.prototype={constructor:WF,scale:function(t){return 1===t?this:new WF(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new WF(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var XF=new WF(1,0,0);function YF(t){for(;!t.__zoom;)if(!(t=t.parentNode))return XF;return t.__zoom}function VF(t){t.stopImmediatePropagation()}function qF(t){t.preventDefault(),t.stopImmediatePropagation()}function KF(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function ZF(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function JF(){return this.__zoom||XF}function QF(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function tD(){return navigator.maxTouchPoints||"ontouchstart"in this}function eD(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}YF.prototype=WF.prototype;var nD=Object.freeze({__proto__:null,bisect:pu,bisectRight:uu,bisectLeft:du,bisectCenter:fu,ascending:ru,bisector:su,blur:function(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const i=bu(e),r=t.slice();return i(t,r,0,n,1),i(r,t,0,n,1),i(t,r,0,n,1),t},blur2:gu,blurImage:mu,count:xu,cross:function(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(Tu)).map(wu),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(Su))return o;for(;;){o.push(r.map(((e,n)=>t[n][e])));let s=i;for(;++r[s]===n[s];){if(0===s)return e?o.map(e):o;r[s--]=0}}},cumsum:function(t,e){var n=0,i=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:r=>n+=+e(r,i++,t)||0)},descending:ou,deviation:Eu,extent:Mu,Adder:Au,fsum:function(t,e){const n=new Au;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&n.add(r)}return+n},fcumsum:function(t,e){const n=new Au;let i=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):r=>n.add(+e(r,++i,t)||0))},group:Ou,flatGroup:function(t,...e){return zu(Nu(t,...e),e)},flatRollup:function(t,e,...n){return zu(Bu(t,e,...n),n)},groups:Nu,index:function(t,...e){return ju(t,Lu,Uu,e)},indexes:function(t,...e){return ju(t,Array.from,Uu,e)},rollup:Gu,rollups:Bu,groupSort:function(t,e,n){return(2!==e.length?Hu(Gu(t,e,n),(([t,e],[n,i])=>ru(e,i)||ru(t,n))):Hu(Ou(t,n),(([t,n],[i,r])=>e(n,r)||ru(t,i)))).map((([t])=>t))},bin:id,histogram:id,thresholdFreedmanDiaconis:function(t,e,n){return Math.ceil((n-e)/(2*(ud(t,.75)-ud(t,.25))*Math.pow(xu(t),-1/3)))},thresholdScott:function(t,e,n){return Math.ceil((n-e)*Math.cbrt(xu(t))/(3.49*Eu(t)))},thresholdSturges:nd,max:rd,maxIndex:od,mean:function(t,e){let n=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,i+=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n},median:function(t,e){return ud(t,.5,e)},medianIndex:function(t,e){return fd(t,.5,e)},merge:pd,min:sd,minIndex:ad,mode:function(t,e){const n=new Ru;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&r>=r&&n.set(r,(n.get(r)||0)+1)}let i,r=0;for(const[t,e]of n)e>r&&(r=e,i=t);return i},nice:ed,pairs:function(t,e=gd){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n},permute:$u,quantile:ud,quantileIndex:fd,quantileSorted:dd,quickselect:ld,range:md,rank:function(t,e=ru){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const i=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=ru);const r=(t,i)=>e(n[t],n[i]);let o,s;return Uint32Array.from(n,((t,e)=>e)).sort(e===ru?(t,e)=>Xu(n[t],n[e]):Wu(r)).forEach(((t,e)=>{const n=r(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,s=e),i[t]=s):i[t]=NaN})),i},least:function(t,e=ru){let n,i=!1;if(1===e.length){let r;for(const o of t){const t=e(o);(i?ru(t,r)<0:0===ru(t,t))&&(n=o,r=t,i=!0)}}else for(const r of t)(i?e(r,n)<0:0===e(r,r))&&(n=r,i=!0);return n},leastIndex:_d,greatest:hd,greatestIndex:function(t,e=ru){if(1===e.length)return od(t,e);let n,i=-1,r=-1;for(const o of t)++r,(i<0?0===e(o,o):e(o,n)>0)&&(n=o,i=r);return i},scan:function(t,e){const n=_d(t,e);return n<0?void 0:n},shuffle:vd,shuffler:yd,sum:function(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n},ticks:Ju,tickIncrement:Qu,tickStep:td,transpose:bd,variance:Cu,zip:function(){return bd(arguments)},every:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(!e(i,++n,t))return!1;return!0},some:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(e(i,++n,t))return!0;return!1},filter:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let i=-1;for(const r of t)e(r,++i,t)&&n.push(r);return n},map:function(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,i)=>e(n,i,t)))},reduce:function(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const i=t[Symbol.iterator]();let r,o,s=-1;if(arguments.length<3){if(({done:r,value:n}=i.next()),r)return;++s}for(;({done:r,value:o}=i.next()),!r;)n=e(n,o,++s,t);return n},reverse:function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},sort:Hu,difference:function(t,...e){t=new ku(t);for(const n of e)for(const e of n)t.delete(e);return t},disjoint:function(t,e){const n=e[Symbol.iterator](),i=new ku;for(const e of t){if(i.has(e))return!1;let t,r;for(;({value:t,done:r}=n.next())&&!r;){if(Object.is(e,t))return!1;i.add(t)}}return!0},intersection:function(t,...e){t=new ku(t),e=e.map(wd);t:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue t}return t},subset:function(t,e){return Sd(e,t)},superset:Sd,union:function(...t){const e=new ku;for(const n of t)for(const t of n)e.add(t);return e},InternMap:Ru,InternSet:ku,axisTop:function(t){return Id(1,t)},axisRight:function(t){return Id(2,t)},axisBottom:function(t){return Id(3,t)},axisLeft:function(t){return Id(4,t)},brush:function(){return dv(tv)},brushX:function(){return dv(J_)},brushY:function(){return dv(Q_)},brushSelection:function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},chord:function(){return wv(!1,!1)},chordTranspose:function(){return wv(!1,!0)},chordDirected:function(){return wv(!0,!1)},ribbon:function(){return Nv()},ribbonArrow:function(){return Nv(Ov)},color:Dp,rgb:zp,hsl:Yp,lab:rg,hcl:ug,lch:function(t,e,n,i){return 1===arguments.length?hg(t):new dg(n,e,t,null==i?1:i)},gray:function(t,e){return new og(t,0,0,null==e?1:e)},cubehelix:wg,contours:Xv,contourDensity:function(){var t=Yv,e=Vv,n=qv,i=960,r=500,o=20,s=2,a=3*o,l=i+2*a>>s,c=r+2*a>>s,h=Bv(20);function u(i){var r=new Float32Array(l*c),h=Math.pow(2,-s),u=-1;for(const o of i){var d=(t(o,++u,i)+a)*h,f=(e(o,u,i)+a)*h,p=+n(o,u,i);if(d>=0&&d<l&&f>=0&&f<c){var g=Math.floor(d),m=Math.floor(f),_=d-g-.5,v=f-m-.5;r[g+m*l]+=(1-_)*(1-v)*p,r[g+1+m*l]+=_*(1-v)*p,r[g+1+(m+1)*l]+=_*v*p,r[g+(m+1)*l]+=(1-_)*v*p}}return gu({data:r,width:l,height:c},o*h),r}function d(t){var e=u(t),n=h(e),i=Math.pow(2,2*s);return Array.isArray(n)||(n=Ju(Number.MIN_VALUE,rd(e)/i,n)),Xv().size([l,c]).thresholds(n.map((t=>t*i)))(e).map(((t,e)=>(t.value=+n[e],f(t))))}function f(t){return t.coordinates.forEach(p),t}function p(t){t.forEach(g)}function g(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,s)-a,t[1]=t[1]*Math.pow(2,s)-a}function _(){return l=i+2*(a=3*o)>>s,c=r+2*a>>s,d}return d.contours=function(t){var e=u(t),n=Xv().size([l,c]),i=Math.pow(2,2*s),r=t=>{t=+t;var r=f(n.contour(e,t*i));return r.value=t,r};return Object.defineProperty(r,"max",{get:()=>rd(e)/i}),r},d.x=function(e){return arguments.length?(t="function"==typeof e?e:Bv(+e),d):t},d.y=function(t){return arguments.length?(e="function"==typeof t?t:Bv(+t),d):e},d.weight=function(t){return arguments.length?(n="function"==typeof t?t:Bv(+t),d):n},d.size=function(t){if(!arguments.length)return[i,r];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return i=e,r=n,_()},d.cellSize=function(t){if(!arguments.length)return 1<<s;if(!((t=+t)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(t)/Math.LN2),_()},d.thresholds=function(t){return arguments.length?(h="function"==typeof t?t:Array.isArray(t)?Bv(zv.call(t)):Bv(t),d):h},d.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*t*t+1)-1)/2,_()},d},Delaunay:wy,Voronoi:my,dispatch:Fd,drag:function(){var t,e,n,i,r=fp,o=pp,s=gp,a=mp,l={},c=Fd("start","drag","end"),h=0,u=0;function d(t){t.on("mousedown.drag",f).filter(a).on("touchstart.drag",m).on("touchmove.drag",_,op).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!i&&r.call(this,s,a)){var l=y(this,o.call(this,s,a),s,a,"mouse");l&&(Qf(s.view).on("mousemove.drag",p,sp).on("mouseup.drag",g,sp),cp(s.view),ap(s),n=!1,t=s.clientX,e=s.clientY,l("start",s))}}function p(i){if(lp(i),!n){var r=i.clientX-t,o=i.clientY-e;n=r*r+o*o>u}l.mouse("drag",i)}function g(t){Qf(t.view).on("mousemove.drag mouseup.drag",null),hp(t.view,n),lp(t),l.mouse("end",t)}function m(t,e){if(r.call(this,t,e)){var n,i,s=t.changedTouches,a=o.call(this,t,e),l=s.length;for(n=0;n<l;++n)(i=y(this,a,t,e,s[n].identifier,s[n]))&&(ap(t),i("start",t,s[n]))}}function _(t){var e,n,i=t.changedTouches,r=i.length;for(e=0;e<r;++e)(n=l[i[e].identifier])&&(lp(t),n("drag",t,i[e]))}function v(t){var e,n,r=t.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<o;++e)(n=l[r[e].identifier])&&(ap(t),n("end",t,r[e]))}function y(t,e,n,i,r,o){var a,u,f,p=c.copy(),g=rp(o||n,e);if(null!=(f=s.call(t,new dp("beforestart",{sourceEvent:n,target:d,identifier:r,active:h,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),i)))return a=f.x-g[0]||0,u=f.y-g[1]||0,function n(o,s,c){var m,_=g;switch(o){case"start":l[r]=n,m=h++;break;case"end":delete l[r],--h;case"drag":g=rp(c||s,e),m=h}p.call(o,t,new dp(o,{sourceEvent:s,subject:f,target:d,identifier:r,active:m,x:g[0]+a,y:g[1]+u,dx:g[0]-_[0],dy:g[1]-_[1],dispatch:p}),i)}}return d.filter=function(t){return arguments.length?(r="function"==typeof t?t:up(!!t),d):r},d.container=function(t){return arguments.length?(o="function"==typeof t?t:up(t),d):o},d.subject=function(t){return arguments.length?(s="function"==typeof t?t:up(t),d):s},d.touchable=function(t){return arguments.length?(a="function"==typeof t?t:up(!!t),d):a},d.on=function(){var t=c.on.apply(c,arguments);return t===c?d:t},d.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,d):Math.sqrt(u)},d},dragDisable:cp,dragEnable:hp,dsvFormat:Ry,csvParse:Iy,csvParseRows:Py,csvFormat:Fy,csvFormatBody:Dy,csvFormatRows:Ly,csvFormatRow:Oy,csvFormatValue:Ny,tsvParse:Gy,tsvParseRows:By,tsvFormat:Uy,tsvFormatBody:jy,tsvFormatRows:$y,tsvFormatRow:Hy,tsvFormatValue:Wy,autoType:function(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Xy&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t},easeLinear:t=>+t,easeQuad:g_,easeQuadIn:function(t){return t*t},easeQuadOut:function(t){return t*(2-t)},easeQuadInOut:g_,easeCubic:m_,easeCubicIn:function(t){return t*t*t},easeCubicOut:function(t){return--t*t*t+1},easeCubicInOut:m_,easePoly:y_,easePolyIn:__,easePolyOut:v_,easePolyInOut:y_,easeSin:w_,easeSinIn:function(t){return 1==+t?1:1-Math.cos(t*x_)},easeSinOut:function(t){return Math.sin(t*x_)},easeSinInOut:w_,easeExp:T_,easeExpIn:function(t){return S_(1-+t)},easeExpOut:function(t){return 1-S_(t)},easeExpInOut:T_,easeCircle:C_,easeCircleIn:function(t){return 1-Math.sqrt(1-t*t)},easeCircleOut:function(t){return Math.sqrt(1- --t*t)},easeCircleInOut:C_,easeBounce:A_,easeBounceIn:function(t){return 1-A_(1-t)},easeBounceOut:A_,easeBounceInOut:function(t){return((t*=2)<=1?1-A_(1-t):A_(t-1)+1)/2},easeBack:I_,easeBackIn:R_,easeBackOut:k_,easeBackInOut:I_,easeElastic:D_,easeElasticIn:F_,easeElasticOut:D_,easeElasticInOut:L_,blob:function(t,e){return fetch(t,e).then(Yy)},buffer:function(t,e){return fetch(t,e).then(Vy)},dsv:function(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=Ry(t);return Ky(e,n).then((function(t){return r.parse(t,i)}))},csv:Jy,tsv:Qy,image:function(t,e){return new Promise((function(n,i){var r=new Image;for(var o in e)r[o]=e[o];r.onerror=i,r.onload=function(){n(r)},r.src=t}))},json:function(t,e){return fetch(t,e).then(tb)},text:Ky,xml:nb,html:ib,svg:rb,forceCenter:function(t,e){var n,i=1;function r(){var r,o,s=n.length,a=0,l=0;for(r=0;r<s;++r)a+=(o=n[r]).x,l+=o.y;for(a=(a/s-t)*i,l=(l/s-e)*i,r=0;r<s;++r)(o=n[r]).x-=a,o.y-=l}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r.strength=function(t){return arguments.length?(i=+t,r):i},r},forceCollide:function(t){var e,n,i,r=1,o=1;function s(){for(var t,s,l,c,h,u,d,f=e.length,p=0;p<o;++p)for(s=cb(e,gb,mb).visitAfter(a),t=0;t<f;++t)l=e[t],u=n[l.index],d=u*u,c=l.x+l.vx,h=l.y+l.vy,s.visit(g);function g(t,e,n,o,s){var a=t.data,f=t.r,p=u+f;if(!a)return e>c+p||o<c-p||n>h+p||s<h-p;if(a.index>l.index){var g=c-a.x-a.vx,m=h-a.y-a.vy,_=g*g+m*m;_<p*p&&(0===g&&(_+=(g=pb(i))*g),0===m&&(_+=(m=pb(i))*m),_=(p-(_=Math.sqrt(_)))/_*r,l.vx+=(g*=_)*(p=(f*=f)/(d+f)),l.vy+=(m*=_)*p,a.vx-=g*(p=1-p),a.vy-=m*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var i,r,o=e.length;for(n=new Array(o),i=0;i<o;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=fb(null==t?1:+t)),s.initialize=function(t,n){e=t,i=n,l()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(r=+t,s):r},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:fb(+e),l(),s):t},s},forceLink:function(t){var e,n,i,r,o,s,a=_b,l=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},c=fb(30),h=1;function u(i){for(var r=0,a=t.length;r<h;++r)for(var l,c,u,d,f,p,g,m=0;m<a;++m)c=(l=t[m]).source,d=(u=l.target).x+u.vx-c.x-c.vx||pb(s),f=u.y+u.vy-c.y-c.vy||pb(s),d*=p=((p=Math.sqrt(d*d+f*f))-n[m])/p*i*e[m],f*=p,u.vx-=d*(g=o[m]),u.vy-=f*g,c.vx+=d*(g=1-g),c.vy+=f*g}function d(){if(i){var s,l,c=i.length,h=t.length,u=new Map(i.map(((t,e)=>[a(t,e,i),t])));for(s=0,r=new Array(c);s<h;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=vb(u,l.source)),"object"!=typeof l.target&&(l.target=vb(u,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(s=0,o=new Array(h);s<h;++s)l=t[s],o[s]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(h),f(),n=new Array(h),p()}}function f(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+l(t[n],n,t)}function p(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),u.initialize=function(t,e){i=t,s=e,d()},u.links=function(e){return arguments.length?(t=e,d(),u):t},u.id=function(t){return arguments.length?(a=t,u):a},u.iterations=function(t){return arguments.length?(h=+t,u):h},u.strength=function(t){return arguments.length?(l="function"==typeof t?t:fb(+t),f(),u):l},u.distance=function(t){return arguments.length?(c="function"==typeof t?t:fb(+t),p(),u):c},u},forceManyBody:function(){var t,e,n,i,r,o=fb(-30),s=1,a=1/0,l=.81;function c(n){var r,o=t.length,s=cb(t,yb,bb).visitAfter(u);for(i=n,r=0;r<o;++r)e=t[r],s.visit(d)}function h(){if(t){var e,n,i=t.length;for(r=new Array(i),e=0;e<i;++e)n=t[e],r[n.index]=+o(n,e,t)}}function u(t){var e,n,i,o,s,a=0,l=0;if(t.length){for(i=o=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,i+=n*e.x,o+=n*e.y);t.x=i/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=r[e.data.index]}while(e=e.next)}t.value=a}function d(t,o,c,h){if(!t.value)return!0;var u=t.x-e.x,d=t.y-e.y,f=h-o,p=u*u+d*d;if(f*f/l<p)return p<a&&(0===u&&(p+=(u=pb(n))*u),0===d&&(p+=(d=pb(n))*d),p<s&&(p=Math.sqrt(s*p)),e.vx+=u*t.value*i/p,e.vy+=d*t.value*i/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===u&&(p+=(u=pb(n))*u),0===d&&(p+=(d=pb(n))*d),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(f=r[t.data.index]*i/p,e.vx+=u*f,e.vy+=d*f)}while(t=t.next)}}return c.initialize=function(e,i){t=e,n=i,h()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:fb(+t),h(),c):o},c.distanceMin=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.distanceMax=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.theta=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c},forceRadial:function(t,e,n){var i,r,o,s=fb(.1);function a(t){for(var s=0,a=i.length;s<a;++s){var l=i[s],c=l.x-e||1e-6,h=l.y-n||1e-6,u=Math.sqrt(c*c+h*h),d=(o[s]-u)*r[s]*t/u;l.vx+=c*d,l.vy+=h*d}}function l(){if(i){var e,n=i.length;for(r=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(i[e],e,i),r[e]=isNaN(o[e])?0:+s(i[e],e,i)}}return"function"!=typeof t&&(t=fb(+t)),null==e&&(e=0),null==n&&(n=0),a.initialize=function(t){i=t,l()},a.strength=function(t){return arguments.length?(s="function"==typeof t?t:fb(+t),l(),a):s},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:fb(+e),l(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(n=+t,a):n},a},forceSimulation:function(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=Cm(u),c=Fd("tick","end"),h=function(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}();function u(){d(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function d(i){var l,c,h=t.length;void 0===i&&(i=1);for(var u=0;u<i;++u)for(n+=(o-n)*r,a.forEach((function(t){t(n)})),l=0;l<h;++l)null==(c=t[l]).fx?c.x+=c.vx*=s:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=s:(c.y=c.fy,c.vy=0);return e}function f(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+n),o=n*xb;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,h),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return l.restart(u),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(h=t,a.forEach(p),e):h},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,i){var r,o,s,a,l,c=0,h=t.length;for(null==i?i=1/0:i*=i,c=0;c<h;++c)(s=(r=e-(a=t[c]).x)*r+(o=n-a.y)*o)<i&&(l=a,i=s);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},forceX:function(t){var e,n,i,r=fb(.1);function o(t){for(var r,o=0,s=e.length;o<s;++o)(r=e[o]).vx+=(i[o]-r.x)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),i=new Array(s),o=0;o<s;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=fb(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:fb(+t),s(),o):r},o.x=function(e){return arguments.length?(t="function"==typeof e?e:fb(+e),s(),o):t},o},forceY:function(t){var e,n,i,r=fb(.1);function o(t){for(var r,o=0,s=e.length;o<s;++o)(r=e[o]).vy+=(i[o]-r.y)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),i=new Array(s),o=0;o<s;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=fb(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:fb(+t),s(),o):r},o.y=function(e){return arguments.length?(t="function"==typeof e?e:fb(+e),s(),o):t},o},formatDefaultLocale:Nb,get format(){return Pb},get formatPrefix(){return Fb},formatLocale:Ob,formatSpecifier:Eb,FormatSpecifier:Mb,precisionFixed:zb,precisionPrefix:Gb,precisionRound:Bb,geoArea:function(t){return Fx=new Au,gx(t,Dx),2*Fx},geoBounds:function(t){var e,n,i,r,o,s,a;if(Tx=Sx=-(xx=wx=1/0),kx=[],gx(t,lw),n=kx.length){for(kx.sort(_w),e=1,o=[i=kx[0]];e<n;++e)vw(i,(r=kx[e])[0])||vw(i,r[1])?(mw(i[0],r[1])>mw(i[0],i[1])&&(i[1]=r[1]),mw(r[0],i[1])>mw(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(a=mw(i[1],r[0]))>s&&(s=a,xx=r[0],Sx=i[1])}return kx=Ix=null,xx===1/0||wx===1/0?[[NaN,NaN],[NaN,NaN]]:[[xx,wx],[Sx,Tx]]},geoCentroid:function(t){Xx=Yx=Vx=qx=Kx=Zx=Jx=Qx=0,tw=new Au,ew=new Au,nw=new Au,gx(t,yw);var e=+tw,n=+ew,i=+nw,r=Qb(e,n,i);return r<1e-12&&(e=Zx,n=Jx,i=Qx,Yx<1e-6&&(e=Vx,n=qx,i=Kx),(r=Qb(e,n,i))<1e-12)?[NaN,NaN]:[qb(n,e)*Wb,ax(i/r)*Wb]},geoCircle:function(){var t,e,n=kw([0,0]),i=kw(90),r=kw(6),o={point:function(n,i){t.push(n=e(n,i)),n[0]*=Wb,n[1]*=Wb}};function s(){var s=n.apply(this,arguments),a=i.apply(this,arguments)*Xb,l=r.apply(this,arguments)*Xb;return t=[],e=Fw(-s[0]*Xb,-s[1]*Xb,0).invert,zw(o,a,l,1),s={type:"Polygon",coordinates:[t]},t=e=null,s}return s.center=function(t){return arguments.length?(n="function"==typeof t?t:kw([+t[0],+t[1]]),s):n},s.radius=function(t){return arguments.length?(i="function"==typeof t?t:kw(+t),s):i},s.precision=function(t){return arguments.length?(r="function"==typeof t?t:kw(+t),s):r},s},geoClipAntimeridian:Kw,geoClipCircle:Zw,geoClipExtent:function(){var t,e,n,i=0,r=0,o=960,s=500;return n={stream:function(n){return t&&e===n?t:t=nS(i,r,o,s)(e=n)},extent:function(a){return arguments.length?(i=+a[0][0],r=+a[0][1],o=+a[1][0],s=+a[1][1],t=e=null,n):[[i,r],[o,s]]}}},geoClipRectangle:nS,geoContains:function(t,e){return(t&&uS.hasOwnProperty(t.type)?uS[t.type]:fS)(t,e)},geoDistance:hS,geoGraticule:xS,geoGraticule10:function(){return xS()()},geoInterpolate:function(t,e){var n=t[0]*Xb,i=t[1]*Xb,r=e[0]*Xb,o=e[1]*Xb,s=Kb(i),a=nx(i),l=Kb(o),c=nx(o),h=s*Kb(n),u=s*nx(n),d=l*Kb(r),f=l*nx(r),p=2*ax(rx(lx(o-i)+s*l*lx(r-n))),g=nx(p),m=p?function(t){var e=nx(t*=p)/g,n=nx(p-t)/g,i=n*h+e*d,r=n*u+e*f,o=n*a+e*c;return[qb(r,i)*Wb,qb(o,rx(i*i+r*r))*Wb]}:function(){return[n*Wb,i*Wb]};return m.distance=p,m},geoLength:aS,geoPath:function(t,e){var n,i,r=4.5;function o(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),gx(t,n(i))),i.result()}return o.area=function(t){return gx(t,n(DS)),DS.result()},o.measure=function(t){return gx(t,n(xT)),xT.result()},o.bounds=function(t){return gx(t,n(HS)),HS.result()},o.centroid=function(t){return gx(t,n(hT)),hT.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,ES):(t=e).stream,o):t},o.context=function(t){return arguments.length?(i=null==t?(e=null,new wT):new uT(e=t),"function"!=typeof r&&i.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),o):r},o.projection(t).context(e)},geoAlbers:BT,geoAlbersUsa:function(){var t,e,n,i,r,o,s=BT(),a=GT().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=GT().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function h(t){var e=t[0],s=t[1];return o=null,n.point(e,s),o||(i.point(e,s),o)||(r.point(e,s),o)}function u(){return t=e=null,h}return h.invert=function(t){var e=s.scale(),n=s.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?a:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:s).invert(t)},h.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([s.stream(e=n),a.stream(n),l.stream(n)])},h.precision=function(t){return arguments.length?(s.precision(t),a.precision(t),l.precision(t),u()):s.precision()},h.scale=function(t){return arguments.length?(s.scale(t),a.scale(.35*t),l.scale(t),h.translate(s.translate())):s.scale()},h.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),o=+t[0],h=+t[1];return n=s.translate(t).clipExtent([[o-.455*e,h-.238*e],[o+.455*e,h+.238*e]]).stream(c),i=a.translate([o-.307*e,h+.201*e]).clipExtent([[o-.425*e+1e-6,h+.12*e+1e-6],[o-.214*e-1e-6,h+.234*e-1e-6]]).stream(c),r=l.translate([o-.205*e,h+.212*e]).clipExtent([[o-.214*e+1e-6,h+.166*e+1e-6],[o-.115*e-1e-6,h+.234*e-1e-6]]).stream(c),u()},h.fitExtent=function(t,e){return MT(h,t,e)},h.fitSize=function(t,e){return AT(h,t,e)},h.fitWidth=function(t,e){return RT(h,t,e)},h.fitHeight=function(t,e){return kT(h,t,e)},h.scale(1070)},geoAzimuthalEqualArea:function(){return LT($T).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:$T,geoAzimuthalEquidistant:function(){return LT(HT).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:HT,geoConicConformal:function(){return NT(VT).scale(109.5).parallels([30,30])},geoConicConformalRaw:VT,geoConicEqualArea:GT,geoConicEqualAreaRaw:zT,geoConicEquidistant:function(){return NT(KT).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:KT,geoEqualEarth:function(){return LT(nC).scale(177.158)},geoEqualEarthRaw:nC,geoEquirectangular:function(){return LT(qT).scale(152.63)},geoEquirectangularRaw:qT,geoGnomonic:function(){return LT(iC).scale(144.049).clipAngle(60)},geoGnomonicRaw:iC,geoIdentity:function(){var t,e,n,i,r,o,s,a=1,l=0,c=0,h=1,u=1,d=0,f=null,p=1,g=1,m=TT({point:function(t,e){var n=y([t,e]);this.stream.point(n[0],n[1])}}),_=ES;function v(){return p=a*h,g=a*u,o=s=null,y}function y(n){var i=n[0]*p,r=n[1]*g;if(d){var o=r*t-i*e;i=i*t+r*e,r=o}return[i+l,r+c]}return y.invert=function(n){var i=n[0]-l,r=n[1]-c;if(d){var o=r*t+i*e;i=i*t-r*e,r=o}return[i/p,r/g]},y.stream=function(t){return o&&s===t?o:o=m(_(s=t))},y.postclip=function(t){return arguments.length?(_=t,f=n=i=r=null,v()):_},y.clipExtent=function(t){return arguments.length?(_=null==t?(f=n=i=r=null,ES):nS(f=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),v()):null==f?null:[[f,n],[i,r]]},y.scale=function(t){return arguments.length?(a=+t,v()):a},y.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],v()):[l,c]},y.angle=function(n){return arguments.length?(e=nx(d=n%360*Xb),t=Kb(d),v()):d*Wb},y.reflectX=function(t){return arguments.length?(h=t?-1:1,v()):h<0},y.reflectY=function(t){return arguments.length?(u=t?-1:1,v()):u<0},y.fitExtent=function(t,e){return MT(y,t,e)},y.fitSize=function(t,e){return AT(y,t,e)},y.fitWidth=function(t,e){return RT(y,t,e)},y.fitHeight=function(t,e){return kT(y,t,e)},y},geoProjection:LT,geoProjectionMutator:OT,geoMercator:function(){return XT(WT).scale(961/Hb)},geoMercatorRaw:WT,geoNaturalEarth1:function(){return LT(rC).scale(175.295)},geoNaturalEarth1Raw:rC,geoOrthographic:function(){return LT(oC).scale(249.5).clipAngle(90.000001)},geoOrthographicRaw:oC,geoStereographic:function(){return LT(sC).scale(250).clipAngle(142)},geoStereographicRaw:sC,geoTransverseMercator:function(){var t=XT(aC),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:aC,geoRotation:Nw,geoStream:gx,geoTransform:function(t){return{stream:TT(t)}},cluster:function(){var t=lC,e=1,n=1,i=!1;function r(r){var o,s=0;r.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(cC,0)/t.length}(n),e.y=function(t){return 1+t.reduce(hC,0)}(n)):(e.x=o?s+=t(e,o):0,e.y=0,o=e)}));var a=function(t){for(var e;e=t.children;)t=e[0];return t}(r),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),c=a.x-t(a,l)/2,h=l.x+t(l,a)/2;return r.eachAfter(i?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-c)/(h-c)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},hierarchy:dC,Node:_C,pack:function(){var t=null,e=1,n=1,i=bC;function r(r){const o=SC();return r.x=e/2,r.y=n/2,t?r.eachBefore(zC(t)).eachAfter(GC(i,.5,o)).eachBefore(BC(1)):r.eachBefore(zC(NC)).eachAfter(GC(bC,1,o)).eachAfter(GC(i,r.r/Math.min(e,n),o)).eachBefore(BC(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=vC(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(i="function"==typeof t?t:xC(+t),r):i},r},packSiblings:function(t){return OC(t,SC()),t},packEnclose:function(t){return TC(t,SC())},partition:function(){var t=1,e=1,n=0,i=!1;function r(r){var o=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/o,r.eachBefore(function(t,e){return function(i){i.children&&jC(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var r=i.x0,o=i.y0,s=i.x1-n,a=i.y1-n;s<r&&(r=s=(r+s)/2),a<o&&(o=a=(o+a)/2),i.x0=r,i.y0=o,i.x1=s,i.y1=a}}(e,o)),i&&r.eachBefore(UC),r}return r.round=function(t){return arguments.length?(i=!!t,r):i},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r},stratify:function(){var t,e=XC,n=YC;function i(i){var r,o,s,a,l,c,h,u,d=Array.from(i),f=e,p=n,g=new Map;if(null!=t){const e=d.map(((e,n)=>function(t){let e=(t=`${t}`).length;qC(t,e-1)&&!qC(t,e-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:`/${t}`}(t(e,n,i)))),n=e.map(VC),r=new Set(e).add("");for(const t of n)r.has(t)||(r.add(t),e.push(t),n.push(VC(t)),d.push(WC));f=(t,n)=>e[n],p=(t,e)=>n[e]}for(s=0,r=d.length;s<r;++s)o=d[s],c=d[s]=new _C(o),null!=(h=f(o,s,i))&&(h+="")&&(u=c.id=h,g.set(u,g.has(u)?HC:c)),null!=(h=p(o,s,i))&&(h+="")&&(c.parent=h);for(s=0;s<r;++s)if(h=(c=d[s]).parent){if(!(l=g.get(h)))throw new Error("missing: "+h);if(l===HC)throw new Error("ambiguous: "+h);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(a)throw new Error("multiple roots");a=c}if(!a)throw new Error("no root");if(null!=t){for(;a.data===WC&&1===a.children.length;)a=a.children[0],--r;for(let t=d.length-1;t>=0&&(c=d[t],c.data===WC);--t)c.data=null}if(a.parent=$C,a.eachBefore((function(t){t.depth=t.parent.depth+1,--r})).eachBefore(mC),a.parent=null,r>0)throw new Error("cycle");return a}return i.id=function(t){return arguments.length?(e=vC(t),i):e},i.parentId=function(t){return arguments.length?(n=vC(t),i):n},i.path=function(e){return arguments.length?(t=vC(e),i):t},i},tree:function(){var t=KC,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,o,s=new eE(t,0),a=[s];e=a.pop();)if(i=e._.children)for(e.children=new Array(o=i.length),r=o-1;r>=0;--r)a.push(n=e.children[r]=new eE(i[r],r)),n.parent=e;return(s.parent=new eE(null,0)).children=[s],s}(r);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(s),i)r.eachBefore(a);else{var c=r,h=r,u=r;r.eachBefore((function(t){t.x<c.x&&(c=t),t.x>h.x&&(h=t),t.depth>u.depth&&(u=t)}));var d=c===h?1:t(c,h)/2,f=d-c.x,p=e/(h.x+d+f),g=n/(u.depth||1);r.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*g}))}return r}function o(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,o=e,s=e,a=n,l=o.parent.children[0],c=o.m,h=s.m,u=a.m,d=l.m;a=JC(a),o=ZC(o),a&&o;)l=ZC(l),(s=JC(s)).a=e,(r=a.z+u-o.z-c+t(a._,o._))>0&&(QC(tE(a,e,i),e,r),c+=r,h+=r),u+=a.m,c+=o.m,d+=l.m,h+=s.m;a&&!JC(s)&&(s.t=a,s.m+=u-h),o&&!ZC(l)&&(l.t=o,l.m+=c-d,i=e)}return i}(e,r,e.parent.A||i[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},treemap:function(){var t=oE,e=!1,n=1,i=1,r=[0],o=bC,s=bC,a=bC,l=bC,c=bC;function h(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(u),r=[0],e&&t.eachBefore(UC),t}function u(e){var n=r[e.depth],i=e.x0+n,h=e.y0+n,u=e.x1-n,d=e.y1-n;u<i&&(i=u=(i+u)/2),d<h&&(h=d=(h+d)/2),e.x0=i,e.y0=h,e.x1=u,e.y1=d,e.children&&(n=r[e.depth+1]=o(e)/2,i+=c(e)-n,h+=s(e)-n,(u-=a(e)-n)<i&&(i=u=(i+u)/2),(d-=l(e)-n)<h&&(h=d=(h+d)/2),t(e,i,h,u,d))}return h.round=function(t){return arguments.length?(e=!!t,h):e},h.size=function(t){return arguments.length?(n=+t[0],i=+t[1],h):[n,i]},h.tile=function(e){return arguments.length?(t=yC(e),h):t},h.padding=function(t){return arguments.length?h.paddingInner(t).paddingOuter(t):h.paddingInner()},h.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:xC(+t),h):o},h.paddingOuter=function(t){return arguments.length?h.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):h.paddingTop()},h.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:xC(+t),h):s},h.paddingRight=function(t){return arguments.length?(a="function"==typeof t?t:xC(+t),h):a},h.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:xC(+t),h):l},h.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:xC(+t),h):c},h},treemapBinary:function(t,e,n,i,r){var o,s,a=t.children,l=a.length,c=new Array(l+1);for(c[0]=s=o=0;o<l;++o)c[o+1]=s+=a[o].value;!function t(e,n,i,r,o,s,l){if(e>=n-1){var h=a[e];return h.x0=r,h.y0=o,h.x1=s,void(h.y1=l)}var u=c[e],d=i/2+u,f=e+1,p=n-1;for(;f<p;){var g=f+p>>>1;c[g]<d?f=g+1:p=g}d-c[f-1]<c[f]-d&&e+1<f&&--f;var m=c[f]-u,_=i-m;if(s-r>l-o){var v=i?(r*_+s*m)/i:s;t(e,f,m,r,o,v,l),t(f,n,_,v,o,s,l)}else{var y=i?(o*_+l*m)/i:l;t(e,f,m,r,o,s,y),t(f,n,_,r,y,s,l)}}(0,l,t.value,e,n,i,r)},treemapDice:jC,treemapSlice:nE,treemapSliceDice:function(t,e,n,i,r){(1&t.depth?nE:jC)(t,e,n,i,r)},treemapSquarify:oE,treemapResquarify:sE,interpolate:Wg,interpolateArray:function(t,e){return(Ng(e)?Og:zg)(t,e)},interpolateBasis:Cg,interpolateBasisClosed:Eg,interpolateDate:Gg,interpolateDiscrete:function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},interpolateHue:function(t,e){var n=Rg(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},interpolateNumber:Bg,interpolateNumberArray:Og,interpolateObject:Ug,interpolateRound:Xg,interpolateString:Hg,interpolateTransformCss:Jg,interpolateTransformSvg:Qg,interpolateZoom:em,interpolateRgb:Pg,interpolateRgbBasis:Dg,interpolateRgbBasisClosed:Lg,interpolateHsl:im,interpolateHslLong:rm,interpolateLab:function(t,e){var n=Ig((t=rg(t)).l,(e=rg(e)).l),i=Ig(t.a,e.a),r=Ig(t.b,e.b),o=Ig(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=o(e),t+""}},interpolateHcl:sm,interpolateHclLong:am,interpolateCubehelix:cm,interpolateCubehelixLong:hm,piecewise:um,quantize:function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},path:Mv,polygonArea:function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[1]*r[0]-e[0]*r[1];return o/2},polygonCentroid:function(t){for(var e,n,i=-1,r=t.length,o=0,s=0,a=t[r-1],l=0;++i<r;)e=a,a=t[i],l+=n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o/(l*=3),s/l]},polygonHull:function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(lE),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var o=cE(i),s=cE(r),a=s[0]===o[0],l=s[s.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[i[o[e]][2]]);for(e=+a;e<s.length-l;++e)c.push(t[i[s[e]][2]]);return c},polygonContains:function(t,e){for(var n,i,r=t.length,o=t[r-1],s=e[0],a=e[1],l=o[0],c=o[1],h=!1,u=0;u<r;++u)n=(o=t[u])[0],(i=o[1])>a!=c>a&&s<(l-n)*(a-i)/(c-i)+n&&(h=!h),l=n,c=i;return h},polygonLength:function(t){for(var e,n,i=-1,r=t.length,o=t[r-1],s=o[0],a=o[1],l=0;++i<r;)e=s,n=a,e-=s=(o=t[i])[0],n-=a=o[1],l+=Math.hypot(e,n);return l},quadtree:cb,randomUniform:uE,randomInt:dE,randomNormal:fE,randomLogNormal:pE,randomBates:mE,randomIrwinHall:gE,randomExponential:_E,randomPareto:vE,randomBernoulli:yE,randomGeometric:bE,randomBinomial:SE,randomGamma:xE,randomBeta:wE,randomWeibull:TE,randomCauchy:CE,randomLogistic:EE,randomPoisson:ME,randomLcg:function(t=Math.random()){let e=0|(0<=t&&t<1?t/AE:Math.abs(t));return()=>(e=1664525*e+1013904223|0,AE*(e>>>0))},scaleBand:FE,scalePoint:function(){return DE(FE.apply(null,arguments).paddingInner(1))},scaleIdentity:function t(e){var n;function i(t){return null==t||isNaN(t=+t)?n:t}return i.invert=i,i.domain=i.range=function(t){return arguments.length?(e=Array.from(t,LE),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,LE):[0,1],WE(i)},scaleLinear:function t(){var e=$E();return e.copy=function(){return UE(e,t())},RE.apply(e,arguments),WE(e)},scaleLog:function t(){const e=QE(jE()).domain([1,10]);return e.copy=()=>UE(e,t()).base(e.base()),RE.apply(e,arguments),e},scaleSymlog:function t(){var e=nM(jE());return e.copy=function(){return UE(e,t()).constant(e.constant())},RE.apply(e,arguments)},scaleOrdinal:PE,scaleImplicit:IE,scalePow:aM,scaleSqrt:function(){return aM.apply(null,arguments).exponent(.5)},scaleRadial:function t(){var e,n=$E(),i=[0,1],r=!1;function o(t){var i=cM(n(t));return isNaN(i)?e:r?Math.round(i):i}return o.invert=function(t){return n.invert(lM(t))},o.domain=function(t){return arguments.length?(n.domain(t),o):n.domain()},o.range=function(t){return arguments.length?(n.range((i=Array.from(t,LE)).map(lM)),o):i.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(r=!!t,o):r},o.clamp=function(t){return arguments.length?(n.clamp(t),o):n.clamp()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t(n.domain(),i).round(r).clamp(n.clamp()).unknown(e)},RE.apply(o,arguments),WE(o)},scaleQuantile:function t(){var e,n=[],i=[],r=[];function o(){var t=0,e=Math.max(1,i.length);for(r=new Array(e-1);++t<e;)r[t-1]=dd(n,t/e);return s}function s(t){return null==t||isNaN(t=+t)?e:i[pu(r,t)]}return s.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?r[e-1]:n[0],e<r.length?r[e]:n[n.length-1]]},s.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(ru),o()},s.range=function(t){return arguments.length?(i=Array.from(t),o()):i.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return r.slice()},s.copy=function(){return t().domain(n).range(i).unknown(e)},RE.apply(s,arguments)},scaleQuantize:function t(){var e,n=0,i=1,r=1,o=[.5],s=[0,1];function a(t){return null!=t&&t<=t?s[pu(o,t,0,r)]:e}function l(){var t=-1;for(o=new Array(r);++t<r;)o[t]=((t+1)*i-(t-r)*n)/(r+1);return a}return a.domain=function(t){return arguments.length?([n,i]=t,n=+n,i=+i,l()):[n,i]},a.range=function(t){return arguments.length?(r=(s=Array.from(t)).length-1,l()):s.slice()},a.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=r?[o[r-1],i]:[o[e-1],o[e]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return o.slice()},a.copy=function(){return t().domain([n,i]).range(s).unknown(e)},RE.apply(WE(a),arguments)},scaleThreshold:function t(){var e,n=[.5],i=[0,1],r=1;function o(t){return null!=t&&t<=t?i[pu(n,t,0,r)]:e}return o.domain=function(t){return arguments.length?(n=Array.from(t),r=Math.min(n.length,i.length-1),o):n.slice()},o.range=function(t){return arguments.length?(i=Array.from(t),r=Math.min(n.length,i.length-1),o):i.slice()},o.invertExtent=function(t){var e=i.indexOf(t);return[n[e-1],n[e]]},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t().domain(n).range(i).unknown(e)},RE.apply(o,arguments)},scaleTime:function(){return RE.apply(ck(AA,RA,YM,HM,RM,EM,SM,bM,_M,LA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return RE.apply(ck(EA,MA,SA,bA,oA,nA,QM,KM,_M,NA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},scaleSequential:function t(){var e=WE(hk()(NE));return e.copy=function(){return uk(e,t())},kE.apply(e,arguments)},scaleSequentialLog:function t(){var e=QE(hk()).domain([1,10]);return e.copy=function(){return uk(e,t()).base(e.base())},kE.apply(e,arguments)},scaleSequentialPow:dk,scaleSequentialSqrt:function(){return dk.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function t(){var e=nM(hk());return e.copy=function(){return uk(e,t()).constant(e.constant())},kE.apply(e,arguments)},scaleSequentialQuantile:function t(){var e=[],n=NE;function i(t){if(null!=t&&!isNaN(t=+t))return n((pu(e,t,1)-1)/(e.length-1))}return i.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(ru),i},i.interpolator=function(t){return arguments.length?(n=t,i):n},i.range=function(){return e.map(((t,i)=>n(i/(e.length-1))))},i.quantiles=function(t){return Array.from({length:t+1},((n,i)=>ud(e,i/t)))},i.copy=function(){return t(n).domain(e)},kE.apply(i,arguments)},scaleDiverging:function t(){var e=WE(fk()(NE));return e.copy=function(){return uk(e,t())},kE.apply(e,arguments)},scaleDivergingLog:function t(){var e=QE(fk()).domain([.1,1,10]);return e.copy=function(){return uk(e,t()).base(e.base())},kE.apply(e,arguments)},scaleDivergingPow:pk,scaleDivergingSqrt:function(){return pk.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function t(){var e=nM(fk());return e.copy=function(){return uk(e,t()).constant(e.constant())},kE.apply(e,arguments)},tickFormat:HE,schemeCategory10:mk,schemeAccent:_k,schemeDark2:vk,schemePaired:yk,schemePastel1:bk,schemePastel2:xk,schemeSet1:wk,schemeSet2:Sk,schemeSet3:Tk,schemeTableau10:Ck,interpolateBrBG:Ak,schemeBrBG:Mk,interpolatePRGn:kk,schemePRGn:Rk,interpolatePiYG:Pk,schemePiYG:Ik,interpolatePuOr:Dk,schemePuOr:Fk,interpolateRdBu:Ok,schemeRdBu:Lk,interpolateRdGy:zk,schemeRdGy:Nk,interpolateRdYlBu:Bk,schemeRdYlBu:Gk,interpolateRdYlGn:jk,schemeRdYlGn:Uk,interpolateSpectral:Hk,schemeSpectral:$k,interpolateBuGn:Xk,schemeBuGn:Wk,interpolateBuPu:Vk,schemeBuPu:Yk,interpolateGnBu:Kk,schemeGnBu:qk,interpolateOrRd:Jk,schemeOrRd:Zk,interpolatePuBuGn:tI,schemePuBuGn:Qk,interpolatePuBu:nI,schemePuBu:eI,interpolatePuRd:rI,schemePuRd:iI,interpolateRdPu:sI,schemeRdPu:oI,interpolateYlGnBu:lI,schemeYlGnBu:aI,interpolateYlGn:hI,schemeYlGn:cI,interpolateYlOrBr:dI,schemeYlOrBr:uI,interpolateYlOrRd:pI,schemeYlOrRd:fI,interpolateBlues:mI,schemeBlues:gI,interpolateGreens:vI,schemeGreens:_I,interpolateGreys:bI,schemeGreys:yI,interpolatePurples:wI,schemePurples:xI,interpolateReds:TI,schemeReds:SI,interpolateOranges:EI,schemeOranges:CI,interpolateCividis:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},interpolateCubehelixDefault:MI,interpolateRainbow:function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return kI.h=360*t-100,kI.s=1.5-1.5*e,kI.l=.8-.9*e,kI+""},interpolateWarm:AI,interpolateCool:RI,interpolateSinebow:function(t){var e;return t=(.5-t)*Math.PI,II.r=255*(e=Math.sin(t))*e,II.g=255*(e=Math.sin(t+PI))*e,II.b=255*(e=Math.sin(t+FI))*e,II+""},interpolateTurbo:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},interpolateViridis:LI,interpolateMagma:OI,interpolateInferno:NI,interpolatePlasma:zI,create:function(t){return Qf($d(t).call(document.documentElement))},creator:$d,local:ep,matcher:qd,namespace:Bd,namespaces:Gd,pointer:rp,pointers:function(t,e){return t.target&&(t=ip(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>rp(t,e)))},select:Qf,selectAll:function(t){return"string"==typeof t?new Zf([document.querySelectorAll(t)],[document.documentElement]):new Zf([Xd(t)],Kf)},selection:Jf,selector:Wd,selectorAll:Vd,style:bf,window:mf,arc:function(){var t=JI,e=QI,n=GI(0),i=null,r=tP,o=eP,s=nP,a=null;function l(){var l,c,h=+t.apply(this,arguments),u=+e.apply(this,arguments),d=r.apply(this,arguments)-VI,f=o.apply(this,arguments)-VI,p=BI(f-d),g=f>d;if(a||(a=l=Mv()),u<h&&(c=u,u=h,h=c),u>1e-12)if(p>qI-1e-12)a.moveTo(u*jI(d),u*WI(d)),a.arc(0,0,u,d,f,!g),h>1e-12&&(a.moveTo(h*jI(f),h*WI(f)),a.arc(0,0,h,f,d,g));else{var m,_,v=d,y=f,b=d,x=f,w=p,S=p,T=s.apply(this,arguments)/2,C=T>1e-12&&(i?+i.apply(this,arguments):XI(h*h+u*u)),E=HI(BI(u-h)/2,+n.apply(this,arguments)),M=E,A=E;if(C>1e-12){var R=ZI(C/h*WI(T)),k=ZI(C/u*WI(T));(w-=2*R)>1e-12?(b+=R*=g?1:-1,x-=R):(w=0,b=x=(d+f)/2),(S-=2*k)>1e-12?(v+=k*=g?1:-1,y-=k):(S=0,v=y=(d+f)/2)}var I=u*jI(v),P=u*WI(v),F=h*jI(x),D=h*WI(x);if(E>1e-12){var L,O=u*jI(y),N=u*WI(y),z=h*jI(b),G=h*WI(b);if(p<YI&&(L=iP(I,P,z,G,O,N,F,D))){var B=I-L[0],U=P-L[1],j=O-L[0],$=N-L[1],H=1/WI(KI((B*j+U*$)/(XI(B*B+U*U)*XI(j*j+$*$)))/2),W=XI(L[0]*L[0]+L[1]*L[1]);M=HI(E,(h-W)/(H-1)),A=HI(E,(u-W)/(H+1))}}S>1e-12?A>1e-12?(m=rP(z,G,I,P,u,A,g),_=rP(O,N,F,D,u,A,g),a.moveTo(m.cx+m.x01,m.cy+m.y01),A<E?a.arc(m.cx,m.cy,A,UI(m.y01,m.x01),UI(_.y01,_.x01),!g):(a.arc(m.cx,m.cy,A,UI(m.y01,m.x01),UI(m.y11,m.x11),!g),a.arc(0,0,u,UI(m.cy+m.y11,m.cx+m.x11),UI(_.cy+_.y11,_.cx+_.x11),!g),a.arc(_.cx,_.cy,A,UI(_.y11,_.x11),UI(_.y01,_.x01),!g))):(a.moveTo(I,P),a.arc(0,0,u,v,y,!g)):a.moveTo(I,P),h>1e-12&&w>1e-12?M>1e-12?(m=rP(F,D,O,N,h,-M,g),_=rP(I,P,z,G,h,-M,g),a.lineTo(m.cx+m.x01,m.cy+m.y01),M<E?a.arc(m.cx,m.cy,M,UI(m.y01,m.x01),UI(_.y01,_.x01),!g):(a.arc(m.cx,m.cy,M,UI(m.y01,m.x01),UI(m.y11,m.x11),!g),a.arc(0,0,h,UI(m.cy+m.y11,m.cx+m.x11),UI(_.cy+_.y11,_.cx+_.x11),g),a.arc(_.cx,_.cy,M,UI(_.y11,_.x11),UI(_.y01,_.x01),!g))):a.arc(0,0,h,x,b,g):a.lineTo(F,D)}else a.moveTo(0,0);if(a.closePath(),l)return a=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-YI/2;return[jI(i)*n,WI(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:GI(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:GI(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:GI(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:GI(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:GI(+t),l):r},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:GI(+t),l):o},l.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:GI(+t),l):s},l.context=function(t){return arguments.length?(a=null==t?null:t,l):a},l},area:dP,line:uP,pie:function(){var t=pP,e=fP,n=null,i=GI(0),r=GI(qI),o=GI(0);function s(s){var a,l,c,h,u,d=(s=sP(s)).length,f=0,p=new Array(d),g=new Array(d),m=+i.apply(this,arguments),_=Math.min(qI,Math.max(-qI,r.apply(this,arguments)-m)),v=Math.min(Math.abs(_)/d,o.apply(this,arguments)),y=v*(_<0?-1:1);for(a=0;a<d;++a)(u=g[p[a]=a]=+t(s[a],a,s))>0&&(f+=u);for(null!=e?p.sort((function(t,n){return e(g[t],g[n])})):null!=n&&p.sort((function(t,e){return n(s[t],s[e])})),a=0,c=f?(_-d*y)/f:0;a<d;++a,m=h)l=p[a],h=m+((u=g[l])>0?u*c:0)+y,g[l]={data:s[l],index:a,value:u,startAngle:m,endAngle:h,padAngle:v};return g}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:GI(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,n=null,s):e},s.sort=function(t){return arguments.length?(n=t,e=null,s):n},s.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:GI(+t),s):i},s.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:GI(+t),s):r},s.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:GI(+t),s):o},s},areaRadial:bP,radialArea:bP,lineRadial:yP,radialLine:yP,pointRadial:xP,link:RP,linkHorizontal:function(){return RP(TP)},linkVertical:function(){return RP(CP)},linkRadial:function(){const t=RP(EP);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},symbol:function(t,e){let n=null;function i(){let i;if(n||(n=i=Mv()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:GI(t||PP),e="function"==typeof e?e:GI(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:GI(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:GI(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},symbolsStroke:nF,symbolsFill:eF,symbols:eF,symbolAsterisk:IP,symbolCircle:PP,symbolCross:FP,symbolDiamond:OP,symbolDiamond2:NP,symbolPlus:zP,symbolSquare:GP,symbolSquare2:BP,symbolStar:HP,symbolTriangle:XP,symbolTriangle2:VP,symbolWye:QP,symbolX:tF,curveBasisClosed:function(t){return new sF(t)},curveBasisOpen:function(t){return new aF(t)},curveBasis:function(t){return new oF(t)},curveBumpX:TP,curveBumpY:CP,curveBundle:cF,curveCardinalClosed:pF,curveCardinalOpen:mF,curveCardinal:dF,curveCatmullRomClosed:xF,curveCatmullRomOpen:SF,curveCatmullRom:yF,curveLinearClosed:function(t){return new TF(t)},curveLinear:lP,curveMonotoneX:function(t){return new RF(t)},curveMonotoneY:function(t){return new kF(t)},curveNatural:function(t){return new PF(t)},curveStep:function(t){return new DF(t,.5)},curveStepAfter:function(t){return new DF(t,1)},curveStepBefore:function(t){return new DF(t,0)},stack:function(){var t=GI([]),e=OF,n=LF,i=NF;function r(r){var o,s,a=Array.from(t.apply(this,arguments),zF),l=a.length,c=-1;for(const t of r)for(o=0,++c;o<l;++o)(a[o][c]=[0,+i(t,a[o].key,c,r)]).data=t;for(o=0,s=sP(e(a));o<l;++o)a[s[o]].index=o;return n(a,s),a}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:GI(Array.from(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:GI(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?OF:"function"==typeof t?t:GI(Array.from(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?LF:t,r):n},r},stackOffsetExpand:function(t,e){if((i=t.length)>0){for(var n,i,r,o=0,s=t[0].length;o<s;++o){for(r=n=0;n<i;++n)r+=t[n][o][1]||0;if(r)for(n=0;n<i;++n)t[n][o][1]/=r}LF(t,e)}},stackOffsetDiverging:function(t,e){if((a=t.length)>0)for(var n,i,r,o,s,a,l=0,c=t[e[0]].length;l<c;++l)for(o=s=0,n=0;n<a;++n)(r=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=o,i[1]=o+=r):r<0?(i[1]=s,i[0]=s+=r):(i[0]=0,i[1]=r)},stackOffsetNone:LF,stackOffsetSilhouette:function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],o=r.length;i<o;++i){for(var s=0,a=0;s<n;++s)a+=t[s][i][1]||0;r[i][1]+=r[i][0]=-a/2}LF(t,e)}},stackOffsetWiggle:function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,o=0,s=1;s<i;++s){for(var a=0,l=0,c=0;a<r;++a){for(var h=t[e[a]],u=h[s][1]||0,d=(u-(h[s-1][1]||0))/2,f=0;f<a;++f){var p=t[e[f]];d+=(p[s][1]||0)-(p[s-1][1]||0)}l+=u,c+=d*u}n[s-1][1]+=n[s-1][0]=o,l&&(o-=c/l)}n[s-1][1]+=n[s-1][0]=o,LF(t,e)}},stackOrderAppearance:GF,stackOrderAscending:UF,stackOrderDescending:function(t){return UF(t).reverse()},stackOrderInsideOut:function(t){var e,n,i=t.length,r=t.map(jF),o=GF(t),s=0,a=0,l=[],c=[];for(e=0;e<i;++e)n=o[e],s<a?(s+=r[n],l.push(n)):(a+=r[n],c.push(n));return c.reverse().concat(l)},stackOrderNone:OF,stackOrderReverse:function(t){return OF(t).reverse()},timeInterval:dM,timeMillisecond:pM,timeMilliseconds:gM,utcMillisecond:pM,utcMilliseconds:gM,timeSecond:_M,timeSeconds:vM,utcSecond:_M,utcSeconds:vM,timeMinute:bM,timeMinutes:xM,timeHour:SM,timeHours:TM,timeDay:EM,timeDays:MM,timeWeek:RM,timeWeeks:OM,timeSunday:RM,timeSundays:OM,timeMonday:kM,timeMondays:NM,timeTuesday:IM,timeTuesdays:zM,timeWednesday:PM,timeWednesdays:GM,timeThursday:FM,timeThursdays:BM,timeFriday:DM,timeFridays:UM,timeSaturday:LM,timeSaturdays:jM,timeMonth:HM,timeMonths:WM,timeYear:YM,timeYears:VM,utcMinute:KM,utcMinutes:ZM,utcHour:QM,utcHours:tA,utcDay:nA,utcDays:iA,utcWeek:oA,utcWeeks:dA,utcSunday:oA,utcSundays:dA,utcMonday:sA,utcMondays:fA,utcTuesday:aA,utcTuesdays:pA,utcWednesday:lA,utcWednesdays:gA,utcThursday:cA,utcThursdays:mA,utcFriday:hA,utcFridays:_A,utcSaturday:uA,utcSaturdays:vA,utcMonth:bA,utcMonths:xA,utcYear:SA,utcYears:TA,utcTicks:EA,utcTickInterval:MA,timeTicks:AA,timeTickInterval:RA,timeFormatDefaultLocale:nk,get timeFormat(){return LA},get timeParse(){return OA},get utcFormat(){return NA},get utcParse(){return zA},timeFormatLocale:FA,isoFormat:rk,isoParse:sk,now:wm,timer:Cm,timerFlush:Em,timeout:km,interval:function(t,e,n){var i=new Tm,r=e;return null==e?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(t,e,n){e=+e,n=null==n?wm():+n,i._restart((function o(s){s+=r,i._restart(o,r+=e,n),t(s)}),e,n)},i.restart(t,e,n),i)},transition:d_,active:function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>1&&n.name===e)return new u_([[t]],z_,e,+i);return null},interrupt:Nm,zoom:function(){var t,e,n,i=KF,r=ZF,o=eD,s=QF,a=tD,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],h=250,u=em,d=Fd("start","zoom","end"),f=500,p=0,g=10;function m(t){t.property("__zoom",JF).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",C).filter(a).on("touchstart.zoom",E).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new WF(e,t.x,t.y)}function v(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new WF(t.k,i,r)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n,i){t.on("start.zoom",(function(){x(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,o=arguments,s=x(t,o).event(i),a=r.apply(t,o),l=null==n?y(a):"function"==typeof n?n.apply(t,o):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),h=t.__zoom,d="function"==typeof e?e.apply(t,o):e,f=u(h.invert(l).concat(c/h.k),d.invert(l).concat(c/d.k));return function(t){if(1===t)t=d;else{var e=f(t),n=c/e[2];t=new WF(n,l[0]-e[0]*n,l[1]-e[1]*n)}s.zoom(null,t)}}))}function x(t,e,n){return!n&&t.__zooming||new w(t,e)}function w(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,e),this.taps=0}function S(t,...e){if(i.apply(this,arguments)){var n=x(this,e).event(t),r=this.__zoom,a=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,s.apply(this,arguments)))),h=rp(t);if(n.wheel)n.mouse[0][0]===h[0]&&n.mouse[0][1]===h[1]||(n.mouse[1]=r.invert(n.mouse[0]=h)),clearTimeout(n.wheel);else{if(r.k===a)return;n.mouse=[h,r.invert(h)],Nm(this),n.start()}qF(t),n.wheel=setTimeout(u,150),n.zoom("mouse",o(v(_(r,a),n.mouse[0],n.mouse[1]),n.extent,c))}function u(){n.wheel=null,n.end()}}function T(t,...e){if(!n&&i.apply(this,arguments)){var r=t.currentTarget,s=x(this,e,!0).event(t),a=Qf(t.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",f,!0),l=rp(t,r),h=t.clientX,u=t.clientY;cp(t.view),VF(t),s.mouse=[l,this.__zoom.invert(l)],Nm(this),s.start()}function d(t){if(qF(t),!s.moved){var e=t.clientX-h,n=t.clientY-u;s.moved=e*e+n*n>p}s.event(t).zoom("mouse",o(v(s.that.__zoom,s.mouse[0]=rp(t,r),s.mouse[1]),s.extent,c))}function f(t){a.on("mousemove.zoom mouseup.zoom",null),hp(t.view,s.moved),qF(t),s.event(t).end()}}function C(t,...e){if(i.apply(this,arguments)){var n=this.__zoom,s=rp(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(s),l=n.k*(t.shiftKey?.5:2),u=o(v(_(n,l),s,a),r.apply(this,e),c);qF(t),h>0?Qf(this).transition().duration(h).call(b,u,s,t):Qf(this).call(m.transform,u,s,t)}}function E(n,...r){if(i.apply(this,arguments)){var o,s,a,l,c=n.touches,h=c.length,u=x(this,r,n.changedTouches.length===h).event(n);for(VF(n),s=0;s<h;++s)l=[l=rp(a=c[s],this),this.__zoom.invert(l),a.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,o=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(u.taps<2&&(e=l[0],t=setTimeout((function(){t=null}),f)),Nm(this),u.start())}}function M(t,...e){if(this.__zooming){var n,i,r,s,a=x(this,e).event(t),l=t.changedTouches,h=l.length;for(qF(t),n=0;n<h;++n)r=rp(i=l[n],this),a.touch0&&a.touch0[2]===i.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===i.identifier&&(a.touch1[0]=r);if(i=a.that.__zoom,a.touch1){var u=a.touch0[0],d=a.touch0[1],f=a.touch1[0],p=a.touch1[1],g=(g=f[0]-u[0])*g+(g=f[1]-u[1])*g,m=(m=p[0]-d[0])*m+(m=p[1]-d[1])*m;i=_(i,Math.sqrt(g/m)),r=[(u[0]+f[0])/2,(u[1]+f[1])/2],s=[(d[0]+p[0])/2,(d[1]+p[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],s=a.touch0[1]}a.zoom("touch",o(v(i,r,s),a.extent,c))}}function A(t,...i){if(this.__zooming){var r,o,s=x(this,i).event(t),a=t.changedTouches,l=a.length;for(VF(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),r=0;r<l;++r)o=a[r],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=rp(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<g)){var c=Qf(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return m.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",JF),t!==r?b(t,e,n,i):r.interrupt().each((function(){x(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},m.scaleBy=function(t,e,n,i){m.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n,i)},m.scaleTo=function(t,e,n,i){m.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,s=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,a=i.invert(s),l="function"==typeof e?e.apply(this,arguments):e;return o(v(_(i,l),s,a),t,c)}),n,i)},m.translateBy=function(t,e,n,i){m.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}),null,i)},m.translateTo=function(t,e,n,i,s){m.transform(t,(function(){var t=r.apply(this,arguments),s=this.__zoom,a=null==i?y(t):"function"==typeof i?i.apply(this,arguments):i;return o(XF.translate(a[0],a[1]).scale(s.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),i,s)},w.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Qf(this.that).datum();d.call(t,this.that,new HF(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:d}),e)}},m.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:$F(+t),m):s},m.filter=function(t){return arguments.length?(i="function"==typeof t?t:$F(!!t),m):i},m.touchable=function(t){return arguments.length?(a="function"==typeof t?t:$F(!!t),m):a},m.extent=function(t){return arguments.length?(r="function"==typeof t?t:$F([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):r},m.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],m):[l[0],l[1]]},m.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(t){return arguments.length?(o=t,m):o},m.duration=function(t){return arguments.length?(h=+t,m):h},m.interpolate=function(t){return arguments.length?(u=t,m):u},m.on=function(){var t=d.on.apply(d,arguments);return t===d?m:t},m.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,m):Math.sqrt(p)},m.tapDistance=function(t){return arguments.length?(g=+t,m):g},m},zoomTransform:YF,zoomIdentity:XF,ZoomTransform:WF}),iD=Math.abs,rD=Math.cos,oD=Math.sin,sD=Math.PI;function aD(t){return t>1?0:t<-1?sD:Math.acos(t)}function lD(t){return t>0?Math.sqrt(t):0}function cD(t,e){var n=rD(e),i=function(t){return t?t/Math.sin(t):1}(aD(n*rD(t/=2)));return[2*n*oD(t)*i,oD(e)*i]}function hD(){return LT(cD).scale(152.63)}function uD(t){return t}function dD(t){if(null==t)return uD;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var l=2,c=t.length,h=new Array(c);for(h[0]=(e+=t[0])*i+o,h[1]=(n+=t[1])*r+s;l<c;)h[l]=t[l],++l;return h}}function fD(t){var e,n=dD(t.transform),i=1/0,r=i,o=-i,s=-i;function a(t){(t=n(t))[0]<i&&(i=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>s&&(s=t[1])}function l(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"Point":a(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(a)}}for(e in t.arcs.forEach((function(t){for(var e,a=-1,l=t.length;++a<l;)(e=n(t[a],a))[0]<i&&(i=e[0]),e[0]>o&&(o=e[0]),e[1]<r&&(r=e[1]),e[1]>s&&(s=e[1])})),t.objects)l(t.objects[e]);return[i,r,o,s]}function pD(t,e){var n=e.id,i=e.bbox,r=null==e.properties?{}:e.properties,o=gD(t,e);return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function gD(t,e){var n=dD(t.transform),i=t.arcs;function r(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(a)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:i,coordinates:n}}(e)}function mD(t,e){var n={},i={},r={},o=[],s=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),o.push(r)}}return e.forEach((function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)})),e.forEach((function(e){var n,o,s=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];t.transform?(n=[0,0],i.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=i[i.length-1];return e<0?[n,r]:[r,n]}(e),a=s[0],l=s[1];if(n=r[a])if(delete r[n.end],n.push(e),n.end=l,o=i[l]){delete i[o.start];var c=o===n?n:n.concat(o);i[c.start=n.start]=r[c.end=o.end]=c}else i[n.start]=r[n.end]=n;else if(n=i[l])if(delete i[n.start],n.unshift(e),n.start=a,o=r[a]){delete r[o.end];var h=o===n?n:o.concat(n);i[h.start=o.start]=r[h.end=n.end]=h}else i[n.start]=r[n.end]=n;else i[(n=[e]).start=a]=r[n.end=l]=n})),a(r,i),a(i,r),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function _D(t,e,n){var i,r,o;if(arguments.length>1)i=vD(t,e,n);else for(r=0,i=new Array(o=t.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:mD(t,i)}}function vD(t,e,n){var i,r=[],o=[];function s(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:i})}function a(t){t.forEach(s)}function l(t){t.forEach(a)}return function t(e){switch(i=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":a(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(l)}(e.arcs)}}(e),o.forEach(null==n?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)}),r}function yD(t,e){var n={},i=[],r=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),i.push(t)}function s(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(gD(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),i.forEach((function(t){if(!t._){var e=[],i=[t];for(t._=1,r.push(e);t=i.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,i.push(t))}))}))}))}})),i.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:r.map((function(e){var i,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&r.push(t)}))}))})),(i=(r=mD(t,r)).length)>1)for(var o,a,l=1,c=s(r[0]);l<i;++l)(o=s(r[l]))>c&&(a=r[0],r[0]=r[l],r[l]=a,c=o);return r})).filter((function(t){return t.length>0}))}}function bD(t,e){for(var n=0,i=t.length;n<i;){var r=n+i>>>1;t[r]<e?n=r+1:i=r}return n}function xD(t){if(null==t)return uD;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var l=2,c=t.length,h=new Array(c),u=Math.round((t[0]-o)/i),d=Math.round((t[1]-s)/r);for(h[0]=u-e,e=u,h[1]=d-n,n=d;l<c;)h[l]=t[l],++l;return h}}cD.invert=function(t,e){if(!(t*t+4*e*e>sD*sD+1e-6)){var n=t,i=e,r=25;do{var o,s=oD(n),a=oD(n/2),l=rD(n/2),c=oD(i),h=rD(i),u=oD(2*i),d=c*c,f=h*h,p=a*a,g=1-f*l*l,m=g?aD(h*l)*lD(o=1/g):o=0,_=2*m*h*a-t,v=m*c-e,y=o*(f*p+m*h*l*d),b=o*(.5*s*u-2*m*c*a),x=.25*o*(u*a-m*c*f*s),w=o*(d*l+m*p*h),S=b*x-w*y;if(!S)break;var T=(v*b-_*w)/S,C=(_*x-v*y)/S;n-=T,i-=C}while((iD(T)>1e-6||iD(C)>1e-6)&&--r>0);return[n,i]}};var wD=Object.freeze({__proto__:null,bbox:fD,feature:function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return pD(t,e)}))}:pD(t,e)},mesh:function(t){return gD(t,_D.apply(this,arguments))},meshArcs:_D,merge:function(t){return gD(t,yD.apply(this,arguments))},mergeArcs:yD,neighbors:function(t){var e={},n=t.map((function(){return[]}));function i(t,n){t.forEach((function(t){t<0&&(t=~t);var i=e[t];i?i.push(n):e[t]=[n]}))}function r(t,e){t.forEach((function(t){i(t,e)}))}var o={LineString:i,MultiLineString:r,Polygon:r,MultiPolygon:function(t,e){t.forEach((function(t){r(t,e)}))}};for(var s in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in o&&o[e.type](e.arcs,n)})),e)for(var a=e[s],l=a.length,c=0;c<l;++c)for(var h=c+1;h<l;++h){var u,d=a[c],f=a[h];(u=n[d])[s=bD(u,f)]!==f&&u.splice(s,0,f),(u=n[f])[s=bD(u,d)]!==d&&u.splice(s,0,d)}return n},quantize:function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)a=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be ≥2");var n,i=(a=t.bbox||fD(t))[0],r=a[1],o=a[2],s=a[3];e={scale:[o-i?(o-i)/(n-1):1,s-r?(s-r)/(n-1):1],translate:[i,r]}}var a,l,c=xD(e),h=t.objects,u={};function d(t){return c(t)}function f(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(f)};break;case"Point":e={type:"Point",coordinates:d(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(d)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(l in h)u[l]=f(h[l]);return{type:"Topology",bbox:a,transform:e,objects:u,arcs:t.arcs.map((function(t){var e,n=0,i=1,r=t.length,o=new Array(r);for(o[0]=c(t[0],0);++n<r;)((e=c(t[n],n))[0]||e[1])&&(o[i++]=e);return 1===i&&(o[i++]=[0,0]),o.length=i,o}))}},transform:dD,untransform:xD});function SD(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var TD="object"==typeof global&&global&&global.Object===Object&&global,CD="object"==typeof self&&self&&self.Object===Object&&self,ED=TD||CD||Function("return this")(),MD=function(){return ED.Date.now()},AD=/\s/;var RD=/^\s+/;function kD(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&AD.test(t.charAt(e)););return e}(t)+1).replace(RD,""):t}var ID=ED.Symbol,PD=Object.prototype,FD=PD.hasOwnProperty,DD=PD.toString,LD=ID?ID.toStringTag:void 0;var OD=Object.prototype.toString;var ND=ID?ID.toStringTag:void 0;function zD(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ND&&ND in Object(t)?function(t){var e=FD.call(t,LD),n=t[LD];try{t[LD]=void 0;var i=!0}catch(t){}var r=DD.call(t);return i&&(e?t[LD]=n:delete t[LD]),r}(t):function(t){return OD.call(t)}(t)}var GD=/^[-+]0x[0-9a-f]+$/i,BD=/^0b[01]+$/i,UD=/^0o[0-7]+$/i,jD=parseInt;function $D(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==zD(t)}(t))return NaN;if(SD(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=SD(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=kD(t);var n=BD.test(t);return n||UD.test(t)?jD(t.slice(2),n?2:8):GD.test(t)?NaN:+t}var HD=Math.max,WD=Math.min;function XD(t,e,n){var i,r,o,s,a,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=i,o=r;return i=r=void 0,c=e,s=t.apply(o,n)}function p(t){return c=t,a=setTimeout(m,e),h?f(t):s}function g(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-c>=o}function m(){var t=MD();if(g(t))return _(t);a=setTimeout(m,function(t){var n=e-(t-l);return u?WD(n,o-(t-c)):n}(t))}function _(t){return a=void 0,d&&i?f(t):(i=r=void 0,s)}function v(){var t=MD(),n=g(t);if(i=arguments,r=this,l=t,n){if(void 0===a)return p(l);if(u)return clearTimeout(a),a=setTimeout(m,e),f(l)}return void 0===a&&(a=setTimeout(m,e)),s}return e=$D(e)||0,SD(n)&&(h=!!n.leading,o=(u="maxWait"in n)?HD($D(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=r=a=void 0},v.flush=function(){return void 0===a?s:_(MD())},v}const YD={Map:no,View:ur,TileLayer:ko,VectorLayer:la,OSM:Fa,Vector:Wa,GeoJSON:fl,WKB:Ml,Point:Wi,Feature:Ya,Collection:j,Translate:Pl,Style:us,Circle:ns,Fill:rs,Icon:gs};export{eh as CircularProgress,iu as Slider,nD as d3,XD as debounce,hD as geoAitoff,YD as ol,wD as topojson};
